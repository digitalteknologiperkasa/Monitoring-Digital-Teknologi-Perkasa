import{u as I,r as n,o as w,c as m,e as t,g as x,j as f,f as k,q as j,k as u,A as S,b as c,C as M,E as b}from"./index-_4p_gb65.js";const N={class:"max-w-4xl mx-auto space-y-8 animate-in fade-in duration-500"},Z={class:"grid grid-cols-1 gap-8"},z={class:"bg-white dark:bg-[#141414] rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm overflow-hidden"},_={class:"p-6"},C={class:"max-w-md space-y-4"},J=["disabled"],V=["disabled"],D={class:"flex justify-end pt-2"},G=["disabled"],E={key:0,class:"size-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},X={key:0,class:"mt-2 text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1"},Y={class:"bg-white dark:bg-[#141414] rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm overflow-hidden"},A={class:"p-6 space-y-6"},U={class:"flex items-center justify-between"},O={__name:"Settings",setup(B){const o=I(),i=n(localStorage.getItem("app_name")||"Monitoring Digitek"),l=n(""),s=n(localStorage.getItem("project_id")||null),p=n(!1),g=n("Viewer"),y=async()=>{if(o.user?.id)try{const{data:a}=await c.get(`/profiles?id=eq.${o.user.id}&select=role,project_id`,{headers:{Accept:"application/vnd.pgrst.object+json"}});g.value=a?.role||"Viewer",a?.project_id&&(s.value=a.project_id,localStorage.setItem("project_id",a.project_id))}catch(a){console.error("Error fetching profile:",a),o.user?.role&&(g.value=o.user.role),o.user?.project_id&&(s.value=o.user.project_id)}},v=async()=>{try{const a=s.value||o.user?.project_id||1,{data:e}=await c.get(`/projects?id=eq.${a}&select=*&limit=1`);if(e&&e.length>0){const r=e[0];i.value=r.name,l.value=r.description||"",s.value=r.id,localStorage.setItem("project_id",r.id),localStorage.setItem("app_name",r.name),localStorage.setItem("app_description",r.description||""),window.dispatchEvent(new CustomEvent("app-name-updated",{detail:r.name})),window.dispatchEvent(new CustomEvent("app-description-updated",{detail:r.description||""}))}}catch(a){console.error("Error fetching project info:",a)}},d=M(()=>["Super Admin"].includes(g.value)),h=async()=>{if(!d.value){alert("Hanya Super Admin yang dapat mengubah informasi proyek.");return}if(!i.value.trim()){alert("Nama proyek tidak boleh kosong.");return}p.value=!0;try{const a={name:i.value.trim(),description:l.value.trim()};if(s.value){console.log("Updating project:",s.value,a);const{data:e}=await c.patch(`/projects?id=eq.${s.value}`,a,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indmb3NkbHZ4ZGxocGN5emV2ampjIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDU3MzY2NSwiZXhwIjoyMDg2MTQ5NjY1fQ.5_nVki3vfaGvtk8kHixX6FR3c47AOceLhbxW0I0Kwnk",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indmb3NkbHZ4ZGxocGN5emV2ampjIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDU3MzY2NSwiZXhwIjoyMDg2MTQ5NjY1fQ.5_nVki3vfaGvtk8kHixX6FR3c47AOceLhbxW0I0Kwnk",Prefer:"return=representation"}});if(console.log("Update response:",e),!e||e.length===0)throw new Error("Project not found or permission denied. No rows updated.")}else{console.log("Creating new project:",a);const{data:e}=await c.post("/projects",a,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indmb3NkbHZ4ZGxocGN5emV2ampjIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDU3MzY2NSwiZXhwIjoyMDg2MTQ5NjY1fQ.5_nVki3vfaGvtk8kHixX6FR3c47AOceLhbxW0I0Kwnk",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indmb3NkbHZ4ZGxocGN5emV2ampjIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDU3MzY2NSwiZXhwIjoyMDg2MTQ5NjY1fQ.5_nVki3vfaGvtk8kHixX6FR3c47AOceLhbxW0I0Kwnk",Prefer:"return=representation"}});console.log("Create response:",e),e&&e.length>0&&(s.value=e[0].id,localStorage.setItem("project_id",e[0].id))}localStorage.setItem("app_name",i.value.trim()),localStorage.setItem("app_description",l.value.trim()),window.dispatchEvent(new CustomEvent("app-name-updated",{detail:i.value.trim()})),window.dispatchEvent(new CustomEvent("app-description-updated",{detail:l.value.trim()})),alert("Informasi proyek berhasil diperbarui!")}catch(a){console.error("Error updating project info:",a),alert("Gagal memperbarui informasi proyek: "+(a.response?.data?.message||a.message))}finally{p.value=!1}};return w(()=>{y(),v()}),(a,e)=>(b(),m("div",N,[e[13]||(e[13]=t("div",{class:"flex flex-col gap-1"},[t("h2",{class:"text-[#121417] dark:text-white text-3xl font-extrabold leading-tight tracking-tight"}," System Settings "),t("p",{class:"text-[#646f82] dark:text-gray-400 text-base font-normal"}," Manage application preferences and configuration. ")],-1)),t("div",Z,[t("section",z,[e[7]||(e[7]=t("div",{class:"px-6 py-5 border-b border-gray-100 dark:border-gray-800 flex items-center gap-3"},[t("div",{class:"size-10 rounded-lg bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center"},[t("span",{class:"material-symbols-outlined text-emerald-600 dark:text-emerald-400"},"info")]),t("h3",{class:"text-lg font-bold text-[#121417] dark:text-white"}," General Information ")],-1)),t("div",_,[t("div",C,[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-semibold text-[#121417] dark:text-white mb-2"}," Nama Projek ",-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>i.value=r),type:"text",disabled:!d.value,class:"w-full bg-gray-50 dark:bg-[#1a1a1a] border border-gray-200 dark:border-gray-700 rounded-lg py-2.5 px-4 text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Masukkan nama proyek..."},null,8,J),[[f,i.value]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-semibold text-[#121417] dark:text-white mb-2"}," Deskripsi Projek ",-1)),x(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=r=>l.value=r),disabled:!d.value,rows:"4",class:"w-full bg-gray-50 dark:bg-[#1a1a1a] border border-gray-200 dark:border-gray-700 rounded-lg py-2.5 px-4 text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed resize-none",placeholder:"Masukkan deskripsi proyek..."},null,8,V),[[f,l.value]])]),t("div",D,[t("button",{onClick:h,disabled:p.value||!d.value,class:"bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-400 text-white px-6 py-2.5 rounded-lg text-sm font-bold shadow-lg shadow-emerald-900/10 transition-all flex items-center gap-2"},[p.value?(b(),m("span",E)):k("",!0),e[5]||(e[5]=t("span",null,"Update Information",-1))],8,G)]),d.value?k("",!0):(b(),m("p",X,[...e[6]||(e[6]=[t("span",{class:"material-symbols-outlined text-xs"},"warning",-1),j(" Hanya akun dengan role Super Admin yang dapat mengubah informasi proyek. ",-1)])]))])])]),t("section",Y,[e[11]||(e[11]=t("div",{class:"px-6 py-5 border-b border-gray-100 dark:border-gray-800 flex items-center gap-3"},[t("div",{class:"size-10 rounded-lg bg-blue-50 dark:bg-blue-500/10 flex items-center justify-center"},[t("span",{class:"material-symbols-outlined text-blue-600 dark:text-blue-400"},"palette")]),t("h3",{class:"text-lg font-bold text-[#121417] dark:text-white"}," Appearance ")],-1)),t("div",A,[t("div",U,[e[10]||(e[10]=t("div",null,[t("p",{class:"text-sm font-semibold text-[#121417] dark:text-white"},"Interface Theme"),t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Kustomisasi tampilan aplikasi sesuai keinginan Anda.")],-1)),t("div",{class:"relative flex items-center bg-gray-100 dark:bg-[#1a1a1a] rounded-lg p-1 border border-gray-200 dark:border-gray-700 w-[180px] h-10 overflow-hidden cursor-pointer",onClick:e[2]||(e[2]=r=>a.$emit("toggleDarkMode"))},[t("div",{class:u(["absolute top-1 bottom-1 w-[calc(50%-4px)] rounded-md transition-all duration-300 ease-in-out shadow-sm",[a.$parent.isDarkMode?"translate-x-[calc(100%+4px)] bg-gray-800":"translate-x-0 bg-white"]])},null,2),t("div",{class:u(["relative flex-1 flex items-center justify-center gap-2 text-sm font-semibold transition-colors duration-300 z-10",[a.$parent.isDarkMode?"text-gray-500":"text-amber-500"]])},[...e[8]||(e[8]=[t("span",{class:"material-symbols-outlined text-[20px]"},"light_mode",-1),t("span",null,"Light",-1)])],2),t("div",{class:u(["relative flex-1 flex items-center justify-center gap-2 text-sm font-semibold transition-colors duration-300 z-10",[a.$parent.isDarkMode?"text-emerald-400":"text-gray-500"]])},[...e[9]||(e[9]=[t("span",{class:"material-symbols-outlined text-[20px]"},"dark_mode",-1),t("span",null,"Dark",-1)])],2)])])])]),e[12]||(e[12]=S('<section class="bg-white dark:bg-[#141414] rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm overflow-hidden"><div class="px-6 py-5 border-b border-gray-100 dark:border-gray-800 flex items-center gap-3"><div class="size-10 rounded-lg bg-purple-50 dark:bg-purple-500/10 flex items-center justify-center"><span class="material-symbols-outlined text-purple-600 dark:text-purple-400">language</span></div><h3 class="text-lg font-bold text-[#121417] dark:text-white"> Language </h3></div><div class="p-6"><div class="max-w-xs"><label class="block text-sm font-semibold text-[#121417] dark:text-white mb-2">Pilih Bahasa</label><select class="w-full bg-gray-50 dark:bg-[#1a1a1a] border border-gray-200 dark:border-gray-700 rounded-lg py-2.5 px-4 text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500/20 outline-none transition-all"><option value="id">Bahasa Indonesia</option><option value="en">English (Coming Soon)</option></select></div></div></section><section class="bg-white dark:bg-[#141414] rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm overflow-hidden"><div class="px-6 py-5 border-b border-gray-100 dark:border-gray-800 flex items-center gap-3"><div class="size-10 rounded-lg bg-orange-50 dark:bg-orange-500/10 flex items-center justify-center"><span class="material-symbols-outlined text-orange-600 dark:text-orange-400">help</span></div><h3 class="text-lg font-bold text-[#121417] dark:text-white"> Help &amp; Support </h3></div><div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-4"><a href="#" class="flex items-start gap-4 p-4 rounded-xl border border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-all group"><div class="size-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center group-hover:bg-emerald-500 group-hover:text-white transition-all"><span class="material-symbols-outlined">description</span></div><div><p class="text-sm font-bold text-[#121417] dark:text-white">Dokumentasi</p><p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Baca panduan dan referensi API.</p></div></a><a href="#" class="flex items-start gap-4 p-4 rounded-xl border border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-all group"><div class="size-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center group-hover:bg-emerald-500 group-hover:text-white transition-all"><span class="material-symbols-outlined">support_agent</span></div><div><p class="text-sm font-bold text-[#121417] dark:text-white">Hubungi Support</p><p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Dapatkan bantuan teknis dari tim kami.</p></div></a></div></section>',2))])]))}};export{O as default};
