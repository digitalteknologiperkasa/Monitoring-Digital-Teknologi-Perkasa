const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AccessControl-pXdleQvB.js","assets/AccessControl-Bj1nhJxE.css","assets/Reports-D9OYaNL7.js","assets/Reports-BvCjiwCO.css","assets/FeatureManagement-Bh0giOdu.js","assets/FeatureManagement-OQCi_L23.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function ho(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const me={},Ws=[],Nt=()=>{},Nl=()=>!1,jn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),fo=e=>e.startsWith("onUpdate:"),Ne=Object.assign,po=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},td=Object.prototype.hasOwnProperty,fe=(e,t)=>td.call(e,t),K=Array.isArray,Gs=e=>Br(e)==="[object Map]",tr=e=>Br(e)==="[object Set]",qo=e=>Br(e)==="[object Date]",re=e=>typeof e=="function",Re=e=>typeof e=="string",$t=e=>typeof e=="symbol",ge=e=>e!==null&&typeof e=="object",$l=e=>(ge(e)||re(e))&&re(e.then)&&re(e.catch),Dl=Object.prototype.toString,Br=e=>Dl.call(e),sd=e=>Br(e).slice(8,-1),Ll=e=>Br(e)==="[object Object]",Nn=e=>Re(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fr=ho(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$n=e=>{const t=Object.create(null);return(s=>t[s]||(t[s]=e(s)))},rd=/-\w/g,ht=$n(e=>e.replace(rd,t=>t.slice(1).toUpperCase())),nd=/\B([A-Z])/g,us=$n(e=>e.replace(nd,"-$1").toLowerCase()),Dn=$n(e=>e.charAt(0).toUpperCase()+e.slice(1)),ai=$n(e=>e?`on${Dn(e)}`:""),as=(e,t)=>!Object.is(e,t),un=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Ul=(e,t,s,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:s})},Ln=e=>{const t=parseFloat(e);return isNaN(t)?e:t},id=e=>{const t=Re(e)?Number(e):NaN;return isNaN(t)?e:t};let Vo;const Un=()=>Vo||(Vo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function As(e){if(K(e)){const t={};for(let s=0;s<e.length;s++){const r=e[s],n=Re(r)?cd(r):As(r);if(n)for(const i in n)t[i]=n[i]}return t}else if(Re(e)||ge(e))return e}const od=/;(?![^(]*\))/g,ad=/:([^]+)/,ld=/\/\*[^]*?\*\//g;function cd(e){const t={};return e.replace(ld,"").split(od).forEach(s=>{if(s){const r=s.split(ad);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function lt(e){let t="";if(Re(e))t=e;else if(K(e))for(let s=0;s<e.length;s++){const r=lt(e[s]);r&&(t+=r+" ")}else if(ge(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const ud="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dd=ho(ud);function Bl(e){return!!e||e===""}function hd(e,t){if(e.length!==t.length)return!1;let s=!0;for(let r=0;s&&r<e.length;r++)s=Cs(e[r],t[r]);return s}function Cs(e,t){if(e===t)return!0;let s=qo(e),r=qo(t);if(s||r)return s&&r?e.getTime()===t.getTime():!1;if(s=$t(e),r=$t(t),s||r)return e===t;if(s=K(e),r=K(t),s||r)return s&&r?hd(e,t):!1;if(s=ge(e),r=ge(t),s||r){if(!s||!r)return!1;const n=Object.keys(e).length,i=Object.keys(t).length;if(n!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Cs(e[o],t[o]))return!1}}return String(e)===String(t)}function go(e,t){return e.findIndex(s=>Cs(s,t))}const Ml=e=>!!(e&&e.__v_isRef===!0),X=e=>Re(e)?e:e==null?"":K(e)||ge(e)&&(e.toString===Dl||!re(e.toString))?Ml(e)?X(e.value):JSON.stringify(e,Fl,2):String(e),Fl=(e,t)=>Ml(t)?Fl(e,t.value):Gs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[r,n],i)=>(s[li(r,i)+" =>"]=n,s),{})}:tr(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>li(s))}:$t(t)?li(t):ge(t)&&!K(t)&&!Ll(t)?String(t):t,li=(e,t="")=>{var s;return $t(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};let Ue;class ql{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ue,!t&&Ue&&(this.index=(Ue.scopes||(Ue.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Ue;try{return Ue=this,t()}finally{Ue=s}}}on(){++this._on===1&&(this.prevScope=Ue,Ue=this)}off(){this._on>0&&--this._on===0&&(Ue=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Vl(e){return new ql(e)}function Hl(){return Ue}function fd(e,t=!1){Ue&&Ue.cleanups.push(e)}let ve;const ci=new WeakSet;class Kl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ue&&Ue.active&&Ue.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ci.has(this)&&(ci.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ho(this),zl(this);const t=ve,s=bt;ve=this,bt=!0;try{return this.fn()}finally{Jl(this),ve=t,bt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)bo(t);this.deps=this.depsTail=void 0,Ho(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ci.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ni(this)&&this.run()}get dirty(){return Ni(this)}}let Wl=0,pr,gr;function Gl(e,t=!1){if(e.flags|=8,t){e.next=gr,gr=e;return}e.next=pr,pr=e}function mo(){Wl++}function yo(){if(--Wl>0)return;if(gr){let t=gr;for(gr=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;pr;){let t=pr;for(pr=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=s}}if(e)throw e}function zl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Jl(e){let t,s=e.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),bo(r),pd(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=s}function Ni(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Yl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Yl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===kr)||(e.globalVersion=kr,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ni(e))))return;e.flags|=2;const t=e.dep,s=ve,r=bt;ve=e,bt=!0;try{zl(e);const n=e.fn(e._value);(t.version===0||as(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{ve=s,bt=r,Jl(e),e.flags&=-3}}function bo(e,t=!1){const{dep:s,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),s.subs===e&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)bo(i,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function pd(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let bt=!0;const Xl=[];function Wt(){Xl.push(bt),bt=!1}function Gt(){const e=Xl.pop();bt=e===void 0?!0:e}function Ho(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ve;ve=void 0;try{t()}finally{ve=s}}}let kr=0;class gd{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ve||!bt||ve===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ve)s=this.activeLink=new gd(ve,this),ve.deps?(s.prevDep=ve.depsTail,ve.depsTail.nextDep=s,ve.depsTail=s):ve.deps=ve.depsTail=s,Ql(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=ve.depsTail,s.nextDep=void 0,ve.depsTail.nextDep=s,ve.depsTail=s,ve.deps===s&&(ve.deps=r)}return s}trigger(t){this.version++,kr++,this.notify(t)}notify(t){mo();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{yo()}}}function Ql(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ql(r)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const bn=new WeakMap,Rs=Symbol(""),$i=Symbol(""),Ar=Symbol("");function Me(e,t,s){if(bt&&ve){let r=bn.get(e);r||bn.set(e,r=new Map);let n=r.get(s);n||(r.set(s,n=new vo),n.map=r,n.key=s),n.track()}}function qt(e,t,s,r,n,i){const o=bn.get(e);if(!o){kr++;return}const a=l=>{l&&l.trigger()};if(mo(),t==="clear")o.forEach(a);else{const l=K(e),c=l&&Nn(s);if(l&&s==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===Ar||!$t(f)&&f>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(Ar)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Rs)),Gs(e)&&a(o.get($i)));break;case"delete":l||(a(o.get(Rs)),Gs(e)&&a(o.get($i)));break;case"set":Gs(e)&&a(o.get(Rs));break}}yo()}function md(e,t){const s=bn.get(e);return s&&s.get(t)}function Is(e){const t=de(e);return t===e?t:(Me(t,"iterate",Ar),nt(e)?t:t.map(vt))}function Bn(e){return Me(e=de(e),"iterate",Ar),e}function ts(e,t){return zt(e)?Ys(Kt(e)?vt(t):t):vt(t)}const yd={__proto__:null,[Symbol.iterator](){return ui(this,Symbol.iterator,e=>ts(this,e))},concat(...e){return Is(this).concat(...e.map(t=>K(t)?Is(t):t))},entries(){return ui(this,"entries",e=>(e[1]=ts(this,e[1]),e))},every(e,t){return Dt(this,"every",e,t,void 0,arguments)},filter(e,t){return Dt(this,"filter",e,t,s=>s.map(r=>ts(this,r)),arguments)},find(e,t){return Dt(this,"find",e,t,s=>ts(this,s),arguments)},findIndex(e,t){return Dt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Dt(this,"findLast",e,t,s=>ts(this,s),arguments)},findLastIndex(e,t){return Dt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Dt(this,"forEach",e,t,void 0,arguments)},includes(...e){return di(this,"includes",e)},indexOf(...e){return di(this,"indexOf",e)},join(e){return Is(this).join(e)},lastIndexOf(...e){return di(this,"lastIndexOf",e)},map(e,t){return Dt(this,"map",e,t,void 0,arguments)},pop(){return ir(this,"pop")},push(...e){return ir(this,"push",e)},reduce(e,...t){return Ko(this,"reduce",e,t)},reduceRight(e,...t){return Ko(this,"reduceRight",e,t)},shift(){return ir(this,"shift")},some(e,t){return Dt(this,"some",e,t,void 0,arguments)},splice(...e){return ir(this,"splice",e)},toReversed(){return Is(this).toReversed()},toSorted(e){return Is(this).toSorted(e)},toSpliced(...e){return Is(this).toSpliced(...e)},unshift(...e){return ir(this,"unshift",e)},values(){return ui(this,"values",e=>ts(this,e))}};function ui(e,t,s){const r=Bn(e),n=r[t]();return r!==e&&!nt(e)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.done||(i.value=s(i.value)),i}),n}const bd=Array.prototype;function Dt(e,t,s,r,n,i){const o=Bn(e),a=o!==e&&!nt(e),l=o[t];if(l!==bd[t]){const d=l.apply(e,i);return a?vt(d):d}let c=s;o!==e&&(a?c=function(d,f){return s.call(this,ts(e,d),f,e)}:s.length>2&&(c=function(d,f){return s.call(this,d,f,e)}));const u=l.call(o,c,r);return a&&n?n(u):u}function Ko(e,t,s,r){const n=Bn(e);let i=s;return n!==e&&(nt(e)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,e)}):i=function(o,a,l){return s.call(this,o,ts(e,a),l,e)}),n[t](i,...r)}function di(e,t,s){const r=de(e);Me(r,"iterate",Ar);const n=r[t](...s);return(n===-1||n===!1)&&Mn(s[0])?(s[0]=de(s[0]),r[t](...s)):n}function ir(e,t,s=[]){Wt(),mo();const r=de(e)[t].apply(e,s);return yo(),Gt(),r}const vd=ho("__proto__,__v_isRef,__isVue"),Zl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($t));function _d(e){$t(e)||(e=String(e));const t=de(this);return Me(t,"has",e),t.hasOwnProperty(e)}class ec{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,r){if(s==="__v_skip")return t.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?Cd:nc:i?rc:sc).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=K(t);if(!n){let l;if(o&&(l=yd[s]))return l;if(s==="hasOwnProperty")return _d}const a=Reflect.get(t,s,ke(t)?t:r);if(($t(s)?Zl.has(s):vd(s))||(n||Me(t,"get",s),i))return a;if(ke(a)){const l=o&&Nn(s)?a:a.value;return n&&ge(l)?Li(l):l}return ge(a)?n?Li(a):Mr(a):a}}class tc extends ec{constructor(t=!1){super(!1,t)}set(t,s,r,n){let i=t[s];const o=K(t)&&Nn(s);if(!this._isShallow){const c=zt(i);if(!nt(r)&&!zt(r)&&(i=de(i),r=de(r)),!o&&ke(i)&&!ke(r))return c||(i.value=r),!0}const a=o?Number(s)<t.length:fe(t,s),l=Reflect.set(t,s,r,ke(t)?t:n);return t===de(n)&&(a?as(r,i)&&qt(t,"set",s,r):qt(t,"add",s,r)),l}deleteProperty(t,s){const r=fe(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&r&&qt(t,"delete",s,void 0),n}has(t,s){const r=Reflect.has(t,s);return(!$t(s)||!Zl.has(s))&&Me(t,"has",s),r}ownKeys(t){return Me(t,"iterate",K(t)?"length":Rs),Reflect.ownKeys(t)}}class wd extends ec{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Sd=new tc,xd=new wd,Ed=new tc(!0);const Di=e=>e,Xr=e=>Reflect.getPrototypeOf(e);function kd(e,t,s){return function(...r){const n=this.__v_raw,i=de(n),o=Gs(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=n[e](...r),u=s?Di:t?Ys:vt;return!t&&Me(i,"iterate",l?$i:Rs),Ne(Object.create(c),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}}})}}function Qr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ad(e,t){const s={get(n){const i=this.__v_raw,o=de(i),a=de(n);e||(as(n,a)&&Me(o,"get",n),Me(o,"get",a));const{has:l}=Xr(o),c=t?Di:e?Ys:vt;if(l.call(o,n))return c(i.get(n));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!e&&Me(de(n),"iterate",Rs),n.size},has(n){const i=this.__v_raw,o=de(i),a=de(n);return e||(as(n,a)&&Me(o,"has",n),Me(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=de(a),c=t?Di:e?Ys:vt;return!e&&Me(l,"iterate",Rs),a.forEach((u,d)=>n.call(i,c(u),c(d),o))}};return Ne(s,e?{add:Qr("add"),set:Qr("set"),delete:Qr("delete"),clear:Qr("clear")}:{add(n){!t&&!nt(n)&&!zt(n)&&(n=de(n));const i=de(this);return Xr(i).has.call(i,n)||(i.add(n),qt(i,"add",n,n)),this},set(n,i){!t&&!nt(i)&&!zt(i)&&(i=de(i));const o=de(this),{has:a,get:l}=Xr(o);let c=a.call(o,n);c||(n=de(n),c=a.call(o,n));const u=l.call(o,n);return o.set(n,i),c?as(i,u)&&qt(o,"set",n,i):qt(o,"add",n,i),this},delete(n){const i=de(this),{has:o,get:a}=Xr(i);let l=o.call(i,n);l||(n=de(n),l=o.call(i,n)),a&&a.call(i,n);const c=i.delete(n);return l&&qt(i,"delete",n,void 0),c},clear(){const n=de(this),i=n.size!==0,o=n.clear();return i&&qt(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=kd(n,e,t)}),s}function _o(e,t){const s=Ad(e,t);return(r,n,i)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(fe(s,n)&&n in r?s:r,n,i)}const Rd={get:_o(!1,!1)},Td={get:_o(!1,!0)},Od={get:_o(!0,!1)};const sc=new WeakMap,rc=new WeakMap,nc=new WeakMap,Cd=new WeakMap;function Pd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Id(e){return e.__v_skip||!Object.isExtensible(e)?0:Pd(sd(e))}function Mr(e){return zt(e)?e:wo(e,!1,Sd,Rd,sc)}function ic(e){return wo(e,!1,Ed,Td,rc)}function Li(e){return wo(e,!0,xd,Od,nc)}function wo(e,t,s,r,n){if(!ge(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Id(e);if(i===0)return e;const o=n.get(e);if(o)return o;const a=new Proxy(e,i===2?r:s);return n.set(e,a),a}function Kt(e){return zt(e)?Kt(e.__v_raw):!!(e&&e.__v_isReactive)}function zt(e){return!!(e&&e.__v_isReadonly)}function nt(e){return!!(e&&e.__v_isShallow)}function Mn(e){return e?!!e.__v_raw:!1}function de(e){const t=e&&e.__v_raw;return t?de(t):e}function So(e){return!fe(e,"__v_skip")&&Object.isExtensible(e)&&Ul(e,"__v_skip",!0),e}const vt=e=>ge(e)?Mr(e):e,Ys=e=>ge(e)?Li(e):e;function ke(e){return e?e.__v_isRef===!0:!1}function Ee(e){return oc(e,!1)}function jd(e){return oc(e,!0)}function oc(e,t){return ke(e)?e:new Nd(e,t)}class Nd{constructor(t,s){this.dep=new vo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:de(t),this._value=s?t:vt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,r=this.__v_isShallow||nt(t)||zt(t);t=r?t:de(t),as(t,s)&&(this._rawValue=t,this._value=r?t:vt(t),this.dep.trigger())}}function ct(e){return ke(e)?e.value:e}const $d={get:(e,t,s)=>t==="__v_raw"?e:ct(Reflect.get(e,t,s)),set:(e,t,s,r)=>{const n=e[t];return ke(n)&&!ke(s)?(n.value=s,!0):Reflect.set(e,t,s,r)}};function ac(e){return Kt(e)?e:new Proxy(e,$d)}function Dd(e){const t=K(e)?new Array(e.length):{};for(const s in e)t[s]=Ud(e,s);return t}class Ld{constructor(t,s,r){this._object=t,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=de(t);let n=!0,i=t;if(!K(t)||!Nn(String(s)))do n=!Mn(i)||nt(i);while(n&&(i=i.__v_raw));this._shallow=n}get value(){let t=this._object[this._key];return this._shallow&&(t=ct(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&ke(this._raw[this._key])){const s=this._object[this._key];if(ke(s)){s.value=t;return}}this._object[this._key]=t}get dep(){return md(this._raw,this._key)}}function Ud(e,t,s){return new Ld(e,t,s)}class Bd{constructor(t,s,r){this.fn=t,this.setter=s,this._value=void 0,this.dep=new vo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=kr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ve!==this)return Gl(this,!0),!0}get value(){const t=this.dep.track();return Yl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Md(e,t,s=!1){let r,n;return re(e)?r=e:(r=e.get,n=e.set),new Bd(r,n,s)}const Zr={},vn=new WeakMap;let ys;function Fd(e,t=!1,s=ys){if(s){let r=vn.get(s);r||vn.set(s,r=[]),r.push(e)}}function qd(e,t,s=me){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,c=k=>n?k:nt(k)||n===!1||n===0?Vt(k,1):Vt(k);let u,d,f,p,h=!1,y=!1;if(ke(e)?(d=()=>e.value,h=nt(e)):Kt(e)?(d=()=>c(e),h=!0):K(e)?(y=!0,h=e.some(k=>Kt(k)||nt(k)),d=()=>e.map(k=>{if(ke(k))return k.value;if(Kt(k))return c(k);if(re(k))return l?l(k,2):k()})):re(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Wt();try{f()}finally{Gt()}}const k=ys;ys=u;try{return l?l(e,3,[p]):e(p)}finally{ys=k}}:d=Nt,t&&n){const k=d,N=n===!0?1/0:n;d=()=>Vt(k(),N)}const g=Hl(),_=()=>{u.stop(),g&&g.active&&po(g.effects,u)};if(i&&t){const k=t;t=(...N)=>{k(...N),_()}}let E=y?new Array(e.length).fill(Zr):Zr;const S=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(t){const N=u.run();if(n||h||(y?N.some((M,U)=>as(M,E[U])):as(N,E))){f&&f();const M=ys;ys=u;try{const U=[N,E===Zr?void 0:y&&E[0]===Zr?[]:E,p];E=N,l?l(t,3,U):t(...U)}finally{ys=M}}}else u.run()};return a&&a(S),u=new Kl(d),u.scheduler=o?()=>o(S,!1):S,p=k=>Fd(k,!1,u),f=u.onStop=()=>{const k=vn.get(u);if(k){if(l)l(k,4);else for(const N of k)N();vn.delete(u)}},t?r?S(!0):E=u.run():o?o(S.bind(null,!0),!0):u.run(),_.pause=u.pause.bind(u),_.resume=u.resume.bind(u),_.stop=_,_}function Vt(e,t=1/0,s){if(t<=0||!ge(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,ke(e))Vt(e.value,t,s);else if(K(e))for(let r=0;r<e.length;r++)Vt(e[r],t,s);else if(tr(e)||Gs(e))e.forEach(r=>{Vt(r,t,s)});else if(Ll(e)){for(const r in e)Vt(e[r],t,s);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Vt(e[r],t,s)}return e}function Fr(e,t,s,r){try{return r?e(...r):e()}catch(n){Fn(n,t,s)}}function _t(e,t,s,r){if(re(e)){const n=Fr(e,t,s,r);return n&&$l(n)&&n.catch(i=>{Fn(i,t,s)}),n}if(K(e)){const n=[];for(let i=0;i<e.length;i++)n.push(_t(e[i],t,s,r));return n}}function Fn(e,t,s,r=!0){const n=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||me;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(i){Wt(),Fr(i,null,10,[e,l,c]),Gt();return}}Vd(e,s,n,r,o)}function Vd(e,t,s,r=!0,n=!1){if(n)throw e;console.error(e)}const Ke=[];let Pt=-1;const zs=[];let ss=null,Ms=0;const lc=Promise.resolve();let _n=null;function qn(e){const t=_n||lc;return e?t.then(this?e.bind(this):e):t}function Hd(e){let t=Pt+1,s=Ke.length;for(;t<s;){const r=t+s>>>1,n=Ke[r],i=Rr(n);i<e||i===e&&n.flags&2?t=r+1:s=r}return t}function xo(e){if(!(e.flags&1)){const t=Rr(e),s=Ke[Ke.length-1];!s||!(e.flags&2)&&t>=Rr(s)?Ke.push(e):Ke.splice(Hd(t),0,e),e.flags|=1,cc()}}function cc(){_n||(_n=lc.then(dc))}function Kd(e){K(e)?zs.push(...e):ss&&e.id===-1?ss.splice(Ms+1,0,e):e.flags&1||(zs.push(e),e.flags|=1),cc()}function Wo(e,t,s=Pt+1){for(;s<Ke.length;s++){const r=Ke[s];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ke.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function uc(e){if(zs.length){const t=[...new Set(zs)].sort((s,r)=>Rr(s)-Rr(r));if(zs.length=0,ss){ss.push(...t);return}for(ss=t,Ms=0;Ms<ss.length;Ms++){const s=ss[Ms];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ss=null,Ms=0}}const Rr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function dc(e){try{for(Pt=0;Pt<Ke.length;Pt++){const t=Ke[Pt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Fr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Pt<Ke.length;Pt++){const t=Ke[Pt];t&&(t.flags&=-2)}Pt=-1,Ke.length=0,uc(),_n=null,(Ke.length||zs.length)&&dc()}}let st=null,hc=null;function wn(e){const t=st;return st=e,hc=e&&e.type.__scopeId||null,t}function gt(e,t=st,s){if(!t||e._n)return e;const r=(...n)=>{r._d&&En(-1);const i=wn(t);let o;try{o=e(...n)}finally{wn(i),r._d&&En(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function hi(e,t){if(st===null)return e;const s=zn(st),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[i,o,a,l=me]=t[n];i&&(re(i)&&(i={mounted:i,updated:i}),i.deep&&Vt(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function ds(e,t,s,r){const n=e.dirs,i=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Wt(),_t(l,s,8,[e.el,a,e,t]),Gt())}}function dn(e,t){if(Fe){let s=Fe.provides;const r=Fe.parent&&Fe.parent.provides;r===s&&(s=Fe.provides=Object.create(r)),s[e]=t}}function ut(e,t,s=!1){const r=To();if(r||Ts){let n=Ts?Ts._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return s&&re(t)?t.call(r&&r.proxy):t}}function Wd(){return!!(To()||Ts)}const Gd=Symbol.for("v-scx"),zd=()=>ut(Gd);function mr(e,t,s){return fc(e,t,s)}function fc(e,t,s=me){const{immediate:r,deep:n,flush:i,once:o}=s,a=Ne({},s),l=t&&r||!t&&i!=="post";let c;if(Cr){if(i==="sync"){const p=zd();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Nt,p.resume=Nt,p.pause=Nt,p}}const u=Fe;a.call=(p,h,y)=>_t(p,u,h,y);let d=!1;i==="post"?a.scheduler=p=>{Ze(p,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(p,h)=>{h?p():xo(p)}),a.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=qd(e,t,a);return Cr&&(c?c.push(f):l&&f()),f}function Jd(e,t,s){const r=this.proxy,n=Re(e)?e.includes(".")?pc(r,e):()=>r[e]:e.bind(r,r);let i;re(t)?i=t:(i=t.handler,s=t);const o=Vr(this),a=fc(n,i.bind(r),s);return o(),a}function pc(e,t){const s=t.split(".");return()=>{let r=e;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const Yd=Symbol("_vte"),gc=e=>e.__isTeleport,Ft=Symbol("_leaveCb"),en=Symbol("_enterCb");function Xd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qr(()=>{e.isMounted=!0}),Ec(()=>{e.isUnmounting=!0}),e}const at=[Function,Array],mc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:at,onEnter:at,onAfterEnter:at,onEnterCancelled:at,onBeforeLeave:at,onLeave:at,onAfterLeave:at,onLeaveCancelled:at,onBeforeAppear:at,onAppear:at,onAfterAppear:at,onAppearCancelled:at},yc=e=>{const t=e.subTree;return t.component?yc(t.component):t},Qd={name:"BaseTransition",props:mc,setup(e,{slots:t}){const s=To(),r=Xd();return()=>{const n=t.default&&_c(t.default(),!0);if(!n||!n.length)return;const i=bc(n),o=de(e),{mode:a}=o;if(r.isLeaving)return fi(i);const l=Go(i);if(!l)return fi(i);let c=Ui(l,o,r,s,d=>c=d);l.type!==We&&Tr(l,c);let u=s.subTree&&Go(s.subTree);if(u&&u.type!==We&&!_s(u,l)&&yc(s).type!==We){let d=Ui(u,o,r,s);if(Tr(u,d),a==="out-in"&&l.type!==We)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,s.job.flags&8||s.update(),delete d.afterLeave,u=void 0},fi(i);a==="in-out"&&l.type!==We?d.delayLeave=(f,p,h)=>{const y=vc(r,u);y[String(u.key)]=u,f[Ft]=()=>{p(),f[Ft]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{h(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function bc(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==We){t=s;break}}return t}const Zd=Qd;function vc(e,t){const{leavingVNodes:s}=e;let r=s.get(t.type);return r||(r=Object.create(null),s.set(t.type,r)),r}function Ui(e,t,s,r,n){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:h,onLeaveCancelled:y,onBeforeAppear:g,onAppear:_,onAfterAppear:E,onAppearCancelled:S}=t,k=String(e.key),N=vc(s,e),M=(P,z)=>{P&&_t(P,r,9,z)},U=(P,z)=>{const q=z[1];M(P,z),K(P)?P.every(I=>I.length<=1)&&q():P.length<=1&&q()},H={mode:o,persisted:a,beforeEnter(P){let z=l;if(!s.isMounted)if(i)z=g||l;else return;P[Ft]&&P[Ft](!0);const q=N[k];q&&_s(e,q)&&q.el[Ft]&&q.el[Ft](),M(z,[P])},enter(P){let z=c,q=u,I=d;if(!s.isMounted)if(i)z=_||c,q=E||u,I=S||d;else return;let ee=!1;const ie=P[en]=we=>{ee||(ee=!0,we?M(I,[P]):M(q,[P]),H.delayedLeave&&H.delayedLeave(),P[en]=void 0)};z?U(z,[P,ie]):ie()},leave(P,z){const q=String(e.key);if(P[en]&&P[en](!0),s.isUnmounting)return z();M(f,[P]);let I=!1;const ee=P[Ft]=ie=>{I||(I=!0,z(),ie?M(y,[P]):M(h,[P]),P[Ft]=void 0,N[q]===e&&delete N[q])};N[q]=e,p?U(p,[P,ee]):ee()},clone(P){const z=Ui(P,t,s,r,n);return n&&n(z),z}};return H}function fi(e){if(Vn(e))return e=ls(e),e.children=null,e}function Go(e){if(!Vn(e))return gc(e.type)&&e.children?bc(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&re(s.default))return s.default()}}function Tr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Tr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function _c(e,t=!1,s){let r=[],n=0;for(let i=0;i<e.length;i++){let o=e[i];const a=s==null?o.key:String(s)+String(o.key!=null?o.key:i);o.type===$e?(o.patchFlag&128&&n++,r=r.concat(_c(o.children,t,a))):(t||o.type!==We)&&r.push(a!=null?ls(o,{key:a}):o)}if(n>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function wc(e,t){return re(e)?Ne({name:e.name},t,{setup:e}):e}function Sc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Sn=new WeakMap;function yr(e,t,s,r,n=!1){if(K(e)){e.forEach((h,y)=>yr(h,t&&(K(t)?t[y]:t),s,r,n));return}if(br(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&yr(e,t,s,r.component.subTree);return}const i=r.shapeFlag&4?zn(r.component):r.el,o=n?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===me?a.refs={}:a.refs,d=a.setupState,f=de(d),p=d===me?Nl:h=>fe(f,h);if(c!=null&&c!==l){if(zo(t),Re(c))u[c]=null,p(c)&&(d[c]=null);else if(ke(c)){c.value=null;const h=t;h.k&&(u[h.k]=null)}}if(re(l))Fr(l,a,12,[o,u]);else{const h=Re(l),y=ke(l);if(h||y){const g=()=>{if(e.f){const _=h?p(l)?d[l]:u[l]:l.value;if(n)K(_)&&po(_,i);else if(K(_))_.includes(i)||_.push(i);else if(h)u[l]=[i],p(l)&&(d[l]=u[l]);else{const E=[i];l.value=E,e.k&&(u[e.k]=E)}}else h?(u[l]=o,p(l)&&(d[l]=o)):y&&(l.value=o,e.k&&(u[e.k]=o))};if(o){const _=()=>{g(),Sn.delete(e)};_.id=-1,Sn.set(e,_),Ze(_,s)}else zo(e),g()}}}function zo(e){const t=Sn.get(e);t&&(t.flags|=8,Sn.delete(e))}Un().requestIdleCallback;Un().cancelIdleCallback;const br=e=>!!e.type.__asyncLoader,Vn=e=>e.type.__isKeepAlive;function eh(e,t){xc(e,"a",t)}function th(e,t){xc(e,"da",t)}function xc(e,t,s=Fe){const r=e.__wdc||(e.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Hn(t,r,s),s){let n=s.parent;for(;n&&n.parent;)Vn(n.parent.vnode)&&sh(r,t,s,n),n=n.parent}}function sh(e,t,s,r){const n=Hn(t,e,r,!0);Eo(()=>{po(r[t],n)},s)}function Hn(e,t,s=Fe,r=!1){if(s){const n=s[e]||(s[e]=[]),i=t.__weh||(t.__weh=(...o)=>{Wt();const a=Vr(s),l=_t(t,s,e,o);return a(),Gt(),l});return r?n.unshift(i):n.push(i),i}}const Jt=e=>(t,s=Fe)=>{(!Cr||e==="sp")&&Hn(e,(...r)=>t(...r),s)},rh=Jt("bm"),qr=Jt("m"),nh=Jt("bu"),ih=Jt("u"),Ec=Jt("bum"),Eo=Jt("um"),oh=Jt("sp"),ah=Jt("rtg"),lh=Jt("rtc");function ch(e,t=Fe){Hn("ec",e,t)}const uh="components";function Kn(e,t){return hh(uh,e,!0,t)||e}const dh=Symbol.for("v-ndc");function hh(e,t,s=!0,r=!1){const n=st||Fe;if(n){const i=n.type;{const a=Yh(i,!1);if(a&&(a===t||a===ht(t)||a===Dn(ht(t))))return i}const o=Jo(n[e]||i[e],t)||Jo(n.appContext[e],t);return!o&&r?i:o}}function Jo(e,t){return e&&(e[t]||e[ht(t)]||e[Dn(ht(t))])}function vs(e,t,s,r){let n;const i=s,o=K(e);if(o||Re(e)){const a=o&&Kt(e);let l=!1,c=!1;a&&(l=!nt(e),c=zt(e),e=Bn(e)),n=new Array(e.length);for(let u=0,d=e.length;u<d;u++)n[u]=t(l?c?Ys(vt(e[u])):vt(e[u]):e[u],u,void 0,i)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,i)}else if(ge(e))if(e[Symbol.iterator])n=Array.from(e,(a,l)=>t(a,l,void 0,i));else{const a=Object.keys(e);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];n[l]=t(e[u],u,l,i)}}else n=[];return n}const Bi=e=>e?Vc(e)?zn(e):Bi(e.parent):null,vr=Ne(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Bi(e.parent),$root:e=>Bi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ac(e),$forceUpdate:e=>e.f||(e.f=()=>{xo(e.update)}),$nextTick:e=>e.n||(e.n=qn.bind(e.proxy)),$watch:e=>Jd.bind(e)}),pi=(e,t)=>e!==me&&!e.__isScriptSetup&&fe(e,t),fh={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=e;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return n[t];case 4:return s[t];case 3:return i[t]}else{if(pi(r,t))return o[t]=1,r[t];if(n!==me&&fe(n,t))return o[t]=2,n[t];if(fe(i,t))return o[t]=3,i[t];if(s!==me&&fe(s,t))return o[t]=4,s[t];Mi&&(o[t]=0)}}const c=vr[t];let u,d;if(c)return t==="$attrs"&&Me(e.attrs,"get",""),c(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(s!==me&&fe(s,t))return o[t]=4,s[t];if(d=l.config.globalProperties,fe(d,t))return d[t]},set({_:e},t,s){const{data:r,setupState:n,ctx:i}=e;return pi(n,t)?(n[t]=s,!0):r!==me&&fe(r,t)?(r[t]=s,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:r,appContext:n,props:i,type:o}},a){let l;return!!(s[a]||e!==me&&a[0]!=="$"&&fe(e,a)||pi(t,a)||fe(i,a)||fe(r,a)||fe(vr,a)||fe(n.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:fe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Yo(e){return K(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Mi=!0;function ph(e){const t=Ac(e),s=e.proxy,r=e.ctx;Mi=!1,t.beforeCreate&&Xo(t.beforeCreate,e,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:h,activated:y,deactivated:g,beforeDestroy:_,beforeUnmount:E,destroyed:S,unmounted:k,render:N,renderTracked:M,renderTriggered:U,errorCaptured:H,serverPrefetch:P,expose:z,inheritAttrs:q,components:I,directives:ee,filters:ie}=t;if(c&&gh(c,r,null),o)for(const se in o){const ae=o[se];re(ae)&&(r[se]=ae.bind(s))}if(n){const se=n.call(s,s);ge(se)&&(e.data=Mr(se))}if(Mi=!0,i)for(const se in i){const ae=i[se],it=re(ae)?ae.bind(s,s):re(ae.get)?ae.get.bind(s,s):Nt,xt=!re(ae)&&re(ae.set)?ae.set.bind(s):Nt,Ce=et({get:it,set:xt});Object.defineProperty(r,se,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:Ae=>Ce.value=Ae})}if(a)for(const se in a)kc(a[se],r,s,se);if(l){const se=re(l)?l.call(s):l;Reflect.ownKeys(se).forEach(ae=>{dn(ae,se[ae])})}u&&Xo(u,e,"c");function oe(se,ae){K(ae)?ae.forEach(it=>se(it.bind(s))):ae&&se(ae.bind(s))}if(oe(rh,d),oe(qr,f),oe(nh,p),oe(ih,h),oe(eh,y),oe(th,g),oe(ch,H),oe(lh,M),oe(ah,U),oe(Ec,E),oe(Eo,k),oe(oh,P),K(z))if(z.length){const se=e.exposed||(e.exposed={});z.forEach(ae=>{Object.defineProperty(se,ae,{get:()=>s[ae],set:it=>s[ae]=it,enumerable:!0})})}else e.exposed||(e.exposed={});N&&e.render===Nt&&(e.render=N),q!=null&&(e.inheritAttrs=q),I&&(e.components=I),ee&&(e.directives=ee),P&&Sc(e)}function gh(e,t,s=Nt){K(e)&&(e=Fi(e));for(const r in e){const n=e[r];let i;ge(n)?"default"in n?i=ut(n.from||r,n.default,!0):i=ut(n.from||r):i=ut(n),ke(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Xo(e,t,s){_t(K(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,s)}function kc(e,t,s,r){let n=r.includes(".")?pc(s,r):()=>s[r];if(Re(e)){const i=t[e];re(i)&&mr(n,i)}else if(re(e))mr(n,e.bind(s));else if(ge(e))if(K(e))e.forEach(i=>kc(i,t,s,r));else{const i=re(e.handler)?e.handler.bind(s):t[e.handler];re(i)&&mr(n,i,e)}}function Ac(e){const t=e.type,{mixins:s,extends:r}=t,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!n.length&&!s&&!r?l=t:(l={},n.length&&n.forEach(c=>xn(l,c,o,!0)),xn(l,t,o)),ge(t)&&i.set(t,l),l}function xn(e,t,s,r=!1){const{mixins:n,extends:i}=t;i&&xn(e,i,s,!0),n&&n.forEach(o=>xn(e,o,s,!0));for(const o in t)if(!(r&&o==="expose")){const a=mh[o]||s&&s[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const mh={data:Qo,props:Zo,emits:Zo,methods:ur,computed:ur,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:ur,directives:ur,watch:bh,provide:Qo,inject:yh};function Qo(e,t){return t?e?function(){return Ne(re(e)?e.call(this,this):e,re(t)?t.call(this,this):t)}:t:e}function yh(e,t){return ur(Fi(e),Fi(t))}function Fi(e){if(K(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Ve(e,t){return e?[...new Set([].concat(e,t))]:t}function ur(e,t){return e?Ne(Object.create(null),e,t):t}function Zo(e,t){return e?K(e)&&K(t)?[...new Set([...e,...t])]:Ne(Object.create(null),Yo(e),Yo(t??{})):t}function bh(e,t){if(!e)return t;if(!t)return e;const s=Ne(Object.create(null),e);for(const r in t)s[r]=Ve(e[r],t[r]);return s}function Rc(){return{app:null,config:{isNativeTag:Nl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vh=0;function _h(e,t){return function(r,n=null){re(r)||(r=Ne({},r)),n!=null&&!ge(n)&&(n=null);const i=Rc(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:vh++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:Qh,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&re(u.install)?(o.add(u),u.install(c,...d)):re(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const p=c._ceVNode||_e(r,n);return p.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),e(p,u,f),l=!0,c._container=u,u.__vue_app__=c,zn(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(_t(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Ts;Ts=c;try{return u()}finally{Ts=d}}};return c}}let Ts=null;const wh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ht(t)}Modifiers`]||e[`${us(t)}Modifiers`];function Sh(e,t,...s){if(e.isUnmounted)return;const r=e.vnode.props||me;let n=s;const i=t.startsWith("update:"),o=i&&wh(r,t.slice(7));o&&(o.trim&&(n=s.map(u=>Re(u)?u.trim():u)),o.number&&(n=s.map(Ln)));let a,l=r[a=ai(t)]||r[a=ai(ht(t))];!l&&i&&(l=r[a=ai(us(t))]),l&&_t(l,e,6,n);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,_t(c,e,6,n)}}const xh=new WeakMap;function Tc(e,t,s=!1){const r=s?xh:t.emitsCache,n=r.get(e);if(n!==void 0)return n;const i=e.emits;let o={},a=!1;if(!re(e)){const l=c=>{const u=Tc(c,t,!0);u&&(a=!0,Ne(o,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(ge(e)&&r.set(e,null),null):(K(i)?i.forEach(l=>o[l]=null):Ne(o,i),ge(e)&&r.set(e,o),o)}function Wn(e,t){return!e||!jn(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,us(t))||fe(e,t))}function ea(e){const{type:t,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:h,inheritAttrs:y}=e,g=wn(e);let _,E;try{if(s.shapeFlag&4){const k=n||r,N=k;_=jt(c.call(N,k,u,d,p,f,h)),E=a}else{const k=t;_=jt(k.length>1?k(d,{attrs:a,slots:o,emit:l}):k(d,null)),E=t.props?a:Eh(a)}}catch(k){_r.length=0,Fn(k,e,1),_=_e(We)}let S=_;if(E&&y!==!1){const k=Object.keys(E),{shapeFlag:N}=S;k.length&&N&7&&(i&&k.some(fo)&&(E=kh(E,i)),S=ls(S,E,!1,!0))}return s.dirs&&(S=ls(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&Tr(S,s.transition),_=S,wn(g),_}const Eh=e=>{let t;for(const s in e)(s==="class"||s==="style"||jn(s))&&((t||(t={}))[s]=e[s]);return t},kh=(e,t)=>{const s={};for(const r in e)(!fo(r)||!(r.slice(9)in t))&&(s[r]=e[r]);return s};function Ah(e,t,s){const{props:r,children:n,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?ta(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!Wn(c,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ta(r,o,c):!0:!!o;return!1}function ta(e,t,s){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(t[i]!==e[i]&&!Wn(s,i))return!0}return!1}function Rh({vnode:e,parent:t},s){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=s,t=t.parent;else break}}const Oc={},Cc=()=>Object.create(Oc),Pc=e=>Object.getPrototypeOf(e)===Oc;function Th(e,t,s,r=!1){const n={},i=Cc();e.propsDefaults=Object.create(null),Ic(e,t,n,i);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);s?e.props=r?n:ic(n):e.type.props?e.props=n:e.props=i,e.attrs=i}function Oh(e,t,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=e,a=de(n),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Wn(e.emitsOptions,f))continue;const p=t[f];if(l)if(fe(i,f))p!==i[f]&&(i[f]=p,c=!0);else{const h=ht(f);n[h]=qi(l,a,h,p,e,!1)}else p!==i[f]&&(i[f]=p,c=!0)}}}else{Ic(e,t,n,i)&&(c=!0);let u;for(const d in a)(!t||!fe(t,d)&&((u=us(d))===d||!fe(t,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(n[d]=qi(l,a,d,void 0,e,!0)):delete n[d]);if(i!==a)for(const d in i)(!t||!fe(t,d))&&(delete i[d],c=!0)}c&&qt(e.attrs,"set","")}function Ic(e,t,s,r){const[n,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(fr(l))continue;const c=t[l];let u;n&&fe(n,u=ht(l))?!i||!i.includes(u)?s[u]=c:(a||(a={}))[u]=c:Wn(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=de(s),c=a||me;for(let u=0;u<i.length;u++){const d=i[u];s[d]=qi(n,l,d,c[d],e,!fe(c,d))}}return o}function qi(e,t,s,r,n,i){const o=e[s];if(o!=null){const a=fe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&re(l)){const{propsDefaults:c}=n;if(s in c)r=c[s];else{const u=Vr(n);r=c[s]=l.call(null,t),u()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===us(s))&&(r=!0))}return r}const Ch=new WeakMap;function jc(e,t,s=!1){const r=s?Ch:t.propsCache,n=r.get(e);if(n)return n;const i=e.props,o={},a=[];let l=!1;if(!re(e)){const u=d=>{l=!0;const[f,p]=jc(d,t,!0);Ne(o,f),p&&a.push(...p)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return ge(e)&&r.set(e,Ws),Ws;if(K(i))for(let u=0;u<i.length;u++){const d=ht(i[u]);sa(d)&&(o[d]=me)}else if(i)for(const u in i){const d=ht(u);if(sa(d)){const f=i[u],p=o[d]=K(f)||re(f)?{type:f}:Ne({},f),h=p.type;let y=!1,g=!0;if(K(h))for(let _=0;_<h.length;++_){const E=h[_],S=re(E)&&E.name;if(S==="Boolean"){y=!0;break}else S==="String"&&(g=!1)}else y=re(h)&&h.name==="Boolean";p[0]=y,p[1]=g,(y||fe(p,"default"))&&a.push(d)}}const c=[o,a];return ge(e)&&r.set(e,c),c}function sa(e){return e[0]!=="$"&&!fr(e)}const ko=e=>e==="_"||e==="_ctx"||e==="$stable",Ao=e=>K(e)?e.map(jt):[jt(e)],Ph=(e,t,s)=>{if(t._n)return t;const r=gt((...n)=>Ao(t(...n)),s);return r._c=!1,r},Nc=(e,t,s)=>{const r=e._ctx;for(const n in e){if(ko(n))continue;const i=e[n];if(re(i))t[n]=Ph(n,i,r);else if(i!=null){const o=Ao(i);t[n]=()=>o}}},$c=(e,t)=>{const s=Ao(t);e.slots.default=()=>s},Dc=(e,t,s)=>{for(const r in t)(s||!ko(r))&&(e[r]=t[r])},Ih=(e,t,s)=>{const r=e.slots=Cc();if(e.vnode.shapeFlag&32){const n=t._;n?(Dc(r,t,s),s&&Ul(r,"_",n,!0)):Nc(t,r)}else t&&$c(e,t)},jh=(e,t,s)=>{const{vnode:r,slots:n}=e;let i=!0,o=me;if(r.shapeFlag&32){const a=t._;a?s&&a===1?i=!1:Dc(n,t,s):(i=!t.$stable,Nc(t,n)),o=t}else t&&($c(e,t),o={default:1});if(i)for(const a in n)!ko(a)&&o[a]==null&&delete n[a]},Ze=Uh;function Nh(e){return $h(e)}function $h(e,t){const s=Un();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=Nt,insertStaticContent:h}=e,y=(m,b,w,A=null,O=null,R=null,D=void 0,$=null,j=!!b.dynamicChildren)=>{if(m===b)return;m&&!_s(m,b)&&(A=T(m),Ae(m,O,R,!0),m=null),b.patchFlag===-2&&(j=!1,b.dynamicChildren=null);const{type:C,ref:J,shapeFlag:B}=b;switch(C){case Gn:g(m,b,w,A);break;case We:_(m,b,w,A);break;case hn:m==null&&E(b,w,A,D);break;case $e:I(m,b,w,A,O,R,D,$,j);break;default:B&1?N(m,b,w,A,O,R,D,$,j):B&6?ee(m,b,w,A,O,R,D,$,j):(B&64||B&128)&&C.process(m,b,w,A,O,R,D,$,j,W)}J!=null&&O?yr(J,m&&m.ref,R,b||m,!b):J==null&&m&&m.ref!=null&&yr(m.ref,null,R,m,!0)},g=(m,b,w,A)=>{if(m==null)r(b.el=a(b.children),w,A);else{const O=b.el=m.el;b.children!==m.children&&c(O,b.children)}},_=(m,b,w,A)=>{m==null?r(b.el=l(b.children||""),w,A):b.el=m.el},E=(m,b,w,A)=>{[m.el,m.anchor]=h(m.children,b,w,A,m.el,m.anchor)},S=({el:m,anchor:b},w,A)=>{let O;for(;m&&m!==b;)O=f(m),r(m,w,A),m=O;r(b,w,A)},k=({el:m,anchor:b})=>{let w;for(;m&&m!==b;)w=f(m),n(m),m=w;n(b)},N=(m,b,w,A,O,R,D,$,j)=>{if(b.type==="svg"?D="svg":b.type==="math"&&(D="mathml"),m==null)M(b,w,A,O,R,D,$,j);else{const C=m.el&&m.el._isVueCE?m.el:null;try{C&&C._beginPatch(),P(m,b,O,R,D,$,j)}finally{C&&C._endPatch()}}},M=(m,b,w,A,O,R,D,$)=>{let j,C;const{props:J,shapeFlag:B,transition:G,dirs:te}=m;if(j=m.el=o(m.type,R,J&&J.is,J),B&8?u(j,m.children):B&16&&H(m.children,j,null,A,O,gi(m,R),D,$),te&&ds(m,null,A,"created"),U(j,m,m.scopeId,D,A),J){for(const ye in J)ye!=="value"&&!fr(ye)&&i(j,ye,null,J[ye],R,A);"value"in J&&i(j,"value",null,J.value,R),(C=J.onVnodeBeforeMount)&&Ot(C,A,m)}te&&ds(m,null,A,"beforeMount");const ue=Dh(O,G);ue&&G.beforeEnter(j),r(j,b,w),((C=J&&J.onVnodeMounted)||ue||te)&&Ze(()=>{C&&Ot(C,A,m),ue&&G.enter(j),te&&ds(m,null,A,"mounted")},O)},U=(m,b,w,A,O)=>{if(w&&p(m,w),A)for(let R=0;R<A.length;R++)p(m,A[R]);if(O){let R=O.subTree;if(b===R||Mc(R.type)&&(R.ssContent===b||R.ssFallback===b)){const D=O.vnode;U(m,D,D.scopeId,D.slotScopeIds,O.parent)}}},H=(m,b,w,A,O,R,D,$,j=0)=>{for(let C=j;C<m.length;C++){const J=m[C]=$?rs(m[C]):jt(m[C]);y(null,J,b,w,A,O,R,D,$)}},P=(m,b,w,A,O,R,D)=>{const $=b.el=m.el;let{patchFlag:j,dynamicChildren:C,dirs:J}=b;j|=m.patchFlag&16;const B=m.props||me,G=b.props||me;let te;if(w&&hs(w,!1),(te=G.onVnodeBeforeUpdate)&&Ot(te,w,b,m),J&&ds(b,m,w,"beforeUpdate"),w&&hs(w,!0),(B.innerHTML&&G.innerHTML==null||B.textContent&&G.textContent==null)&&u($,""),C?z(m.dynamicChildren,C,$,w,A,gi(b,O),R):D||ae(m,b,$,null,w,A,gi(b,O),R,!1),j>0){if(j&16)q($,B,G,w,O);else if(j&2&&B.class!==G.class&&i($,"class",null,G.class,O),j&4&&i($,"style",B.style,G.style,O),j&8){const ue=b.dynamicProps;for(let ye=0;ye<ue.length;ye++){const pe=ue[ye],Ge=B[pe],ze=G[pe];(ze!==Ge||pe==="value")&&i($,pe,Ge,ze,O,w)}}j&1&&m.children!==b.children&&u($,b.children)}else!D&&C==null&&q($,B,G,w,O);((te=G.onVnodeUpdated)||J)&&Ze(()=>{te&&Ot(te,w,b,m),J&&ds(b,m,w,"updated")},A)},z=(m,b,w,A,O,R,D)=>{for(let $=0;$<b.length;$++){const j=m[$],C=b[$],J=j.el&&(j.type===$e||!_s(j,C)||j.shapeFlag&198)?d(j.el):w;y(j,C,J,null,A,O,R,D,!0)}},q=(m,b,w,A,O)=>{if(b!==w){if(b!==me)for(const R in b)!fr(R)&&!(R in w)&&i(m,R,b[R],null,O,A);for(const R in w){if(fr(R))continue;const D=w[R],$=b[R];D!==$&&R!=="value"&&i(m,R,$,D,O,A)}"value"in w&&i(m,"value",b.value,w.value,O)}},I=(m,b,w,A,O,R,D,$,j)=>{const C=b.el=m?m.el:a(""),J=b.anchor=m?m.anchor:a("");let{patchFlag:B,dynamicChildren:G,slotScopeIds:te}=b;te&&($=$?$.concat(te):te),m==null?(r(C,w,A),r(J,w,A),H(b.children||[],w,J,O,R,D,$,j)):B>0&&B&64&&G&&m.dynamicChildren&&m.dynamicChildren.length===G.length?(z(m.dynamicChildren,G,w,O,R,D,$),(b.key!=null||O&&b===O.subTree)&&Lc(m,b,!0)):ae(m,b,w,J,O,R,D,$,j)},ee=(m,b,w,A,O,R,D,$,j)=>{b.slotScopeIds=$,m==null?b.shapeFlag&512?O.ctx.activate(b,w,A,D,j):ie(b,w,A,O,R,D,j):we(m,b,j)},ie=(m,b,w,A,O,R,D)=>{const $=m.component=Kh(m,A,O);if(Vn(m)&&($.ctx.renderer=W),Wh($,!1,D),$.asyncDep){if(O&&O.registerDep($,oe,D),!m.el){const j=$.subTree=_e(We);_(null,j,b,w),m.placeholder=j.el}}else oe($,m,b,w,O,R,D)},we=(m,b,w)=>{const A=b.component=m.component;if(Ah(m,b,w))if(A.asyncDep&&!A.asyncResolved){se(A,b,w);return}else A.next=b,A.update();else b.el=m.el,A.vnode=b},oe=(m,b,w,A,O,R,D)=>{const $=()=>{if(m.isMounted){let{next:B,bu:G,u:te,parent:ue,vnode:ye}=m;{const Rt=Uc(m);if(Rt){B&&(B.el=ye.el,se(m,B,D)),Rt.asyncDep.then(()=>{m.isUnmounted||$()});return}}let pe=B,Ge;hs(m,!1),B?(B.el=ye.el,se(m,B,D)):B=ye,G&&un(G),(Ge=B.props&&B.props.onVnodeBeforeUpdate)&&Ot(Ge,ue,B,ye),hs(m,!0);const ze=ea(m),At=m.subTree;m.subTree=ze,y(At,ze,d(At.el),T(At),m,O,R),B.el=ze.el,pe===null&&Rh(m,ze.el),te&&Ze(te,O),(Ge=B.props&&B.props.onVnodeUpdated)&&Ze(()=>Ot(Ge,ue,B,ye),O)}else{let B;const{el:G,props:te}=b,{bm:ue,m:ye,parent:pe,root:Ge,type:ze}=m,At=br(b);hs(m,!1),ue&&un(ue),!At&&(B=te&&te.onVnodeBeforeMount)&&Ot(B,pe,b),hs(m,!0);{Ge.ce&&Ge.ce._def.shadowRoot!==!1&&Ge.ce._injectChildStyle(ze);const Rt=m.subTree=ea(m);y(null,Rt,w,A,m,O,R),b.el=Rt.el}if(ye&&Ze(ye,O),!At&&(B=te&&te.onVnodeMounted)){const Rt=b;Ze(()=>Ot(B,pe,Rt),O)}(b.shapeFlag&256||pe&&br(pe.vnode)&&pe.vnode.shapeFlag&256)&&m.a&&Ze(m.a,O),m.isMounted=!0,b=w=A=null}};m.scope.on();const j=m.effect=new Kl($);m.scope.off();const C=m.update=j.run.bind(j),J=m.job=j.runIfDirty.bind(j);J.i=m,J.id=m.uid,j.scheduler=()=>xo(J),hs(m,!0),C()},se=(m,b,w)=>{b.component=m;const A=m.vnode.props;m.vnode=b,m.next=null,Oh(m,b.props,A,w),jh(m,b.children,w),Wt(),Wo(m),Gt()},ae=(m,b,w,A,O,R,D,$,j=!1)=>{const C=m&&m.children,J=m?m.shapeFlag:0,B=b.children,{patchFlag:G,shapeFlag:te}=b;if(G>0){if(G&128){xt(C,B,w,A,O,R,D,$,j);return}else if(G&256){it(C,B,w,A,O,R,D,$,j);return}}te&8?(J&16&&ot(C,O,R),B!==C&&u(w,B)):J&16?te&16?xt(C,B,w,A,O,R,D,$,j):ot(C,O,R,!0):(J&8&&u(w,""),te&16&&H(B,w,A,O,R,D,$,j))},it=(m,b,w,A,O,R,D,$,j)=>{m=m||Ws,b=b||Ws;const C=m.length,J=b.length,B=Math.min(C,J);let G;for(G=0;G<B;G++){const te=b[G]=j?rs(b[G]):jt(b[G]);y(m[G],te,w,null,O,R,D,$,j)}C>J?ot(m,O,R,!0,!1,B):H(b,w,A,O,R,D,$,j,B)},xt=(m,b,w,A,O,R,D,$,j)=>{let C=0;const J=b.length;let B=m.length-1,G=J-1;for(;C<=B&&C<=G;){const te=m[C],ue=b[C]=j?rs(b[C]):jt(b[C]);if(_s(te,ue))y(te,ue,w,null,O,R,D,$,j);else break;C++}for(;C<=B&&C<=G;){const te=m[B],ue=b[G]=j?rs(b[G]):jt(b[G]);if(_s(te,ue))y(te,ue,w,null,O,R,D,$,j);else break;B--,G--}if(C>B){if(C<=G){const te=G+1,ue=te<J?b[te].el:A;for(;C<=G;)y(null,b[C]=j?rs(b[C]):jt(b[C]),w,ue,O,R,D,$,j),C++}}else if(C>G)for(;C<=B;)Ae(m[C],O,R,!0),C++;else{const te=C,ue=C,ye=new Map;for(C=ue;C<=G;C++){const Xe=b[C]=j?rs(b[C]):jt(b[C]);Xe.key!=null&&ye.set(Xe.key,C)}let pe,Ge=0;const ze=G-ue+1;let At=!1,Rt=0;const nr=new Array(ze);for(C=0;C<ze;C++)nr[C]=0;for(C=te;C<=B;C++){const Xe=m[C];if(Ge>=ze){Ae(Xe,O,R,!0);continue}let Tt;if(Xe.key!=null)Tt=ye.get(Xe.key);else for(pe=ue;pe<=G;pe++)if(nr[pe-ue]===0&&_s(Xe,b[pe])){Tt=pe;break}Tt===void 0?Ae(Xe,O,R,!0):(nr[Tt-ue]=C+1,Tt>=Rt?Rt=Tt:At=!0,y(Xe,b[Tt],w,null,O,R,D,$,j),Ge++)}const Bo=At?Lh(nr):Ws;for(pe=Bo.length-1,C=ze-1;C>=0;C--){const Xe=ue+C,Tt=b[Xe],Mo=b[Xe+1],Fo=Xe+1<J?Mo.el||Bc(Mo):A;nr[C]===0?y(null,Tt,w,Fo,O,R,D,$,j):At&&(pe<0||C!==Bo[pe]?Ce(Tt,w,Fo,2):pe--)}}},Ce=(m,b,w,A,O=null)=>{const{el:R,type:D,transition:$,children:j,shapeFlag:C}=m;if(C&6){Ce(m.component.subTree,b,w,A);return}if(C&128){m.suspense.move(b,w,A);return}if(C&64){D.move(m,b,w,W);return}if(D===$e){r(R,b,w);for(let B=0;B<j.length;B++)Ce(j[B],b,w,A);r(m.anchor,b,w);return}if(D===hn){S(m,b,w);return}if(A!==2&&C&1&&$)if(A===0)$.beforeEnter(R),r(R,b,w),Ze(()=>$.enter(R),O);else{const{leave:B,delayLeave:G,afterLeave:te}=$,ue=()=>{m.ctx.isUnmounted?n(R):r(R,b,w)},ye=()=>{R._isLeaving&&R[Ft](!0),B(R,()=>{ue(),te&&te()})};G?G(R,ue,ye):ye()}else r(R,b,w)},Ae=(m,b,w,A=!1,O=!1)=>{const{type:R,props:D,ref:$,children:j,dynamicChildren:C,shapeFlag:J,patchFlag:B,dirs:G,cacheIndex:te}=m;if(B===-2&&(O=!1),$!=null&&(Wt(),yr($,null,w,m,!0),Gt()),te!=null&&(b.renderCache[te]=void 0),J&256){b.ctx.deactivate(m);return}const ue=J&1&&G,ye=!br(m);let pe;if(ye&&(pe=D&&D.onVnodeBeforeUnmount)&&Ot(pe,b,m),J&6)kt(m.component,w,A);else{if(J&128){m.suspense.unmount(w,A);return}ue&&ds(m,null,b,"beforeUnmount"),J&64?m.type.remove(m,b,w,W,A):C&&!C.hasOnce&&(R!==$e||B>0&&B&64)?ot(C,b,w,!1,!0):(R===$e&&B&384||!O&&J&16)&&ot(j,b,w),A&&Et(m)}(ye&&(pe=D&&D.onVnodeUnmounted)||ue)&&Ze(()=>{pe&&Ot(pe,b,m),ue&&ds(m,null,b,"unmounted")},w)},Et=m=>{const{type:b,el:w,anchor:A,transition:O}=m;if(b===$e){ft(w,A);return}if(b===hn){k(m);return}const R=()=>{n(w),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(m.shapeFlag&1&&O&&!O.persisted){const{leave:D,delayLeave:$}=O,j=()=>D(w,R);$?$(m.el,R,j):j()}else R()},ft=(m,b)=>{let w;for(;m!==b;)w=f(m),n(m),m=w;n(b)},kt=(m,b,w)=>{const{bum:A,scope:O,job:R,subTree:D,um:$,m:j,a:C}=m;ra(j),ra(C),A&&un(A),O.stop(),R&&(R.flags|=8,Ae(D,m,b,w)),$&&Ze($,b),Ze(()=>{m.isUnmounted=!0},b)},ot=(m,b,w,A=!1,O=!1,R=0)=>{for(let D=R;D<m.length;D++)Ae(m[D],b,w,A,O)},T=m=>{if(m.shapeFlag&6)return T(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const b=f(m.anchor||m.el),w=b&&b[Yd];return w?f(w):b};let F=!1;const L=(m,b,w)=>{let A;m==null?b._vnode&&(Ae(b._vnode,null,null,!0),A=b._vnode.component):y(b._vnode||null,m,b,null,null,null,w),b._vnode=m,F||(F=!0,Wo(A),uc(),F=!1)},W={p:y,um:Ae,m:Ce,r:Et,mt:ie,mc:H,pc:ae,pbc:z,n:T,o:e};return{render:L,hydrate:void 0,createApp:_h(L)}}function gi({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function hs({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Lc(e,t,s=!1){const r=e.children,n=t.children;if(K(r)&&K(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=rs(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&Lc(o,a)),a.type===Gn&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(e.type===$e?1:0)),a.type===We&&!a.el&&(a.el=o.el)}}function Lh(e){const t=e.slice(),s=[0];let r,n,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(n=s[s.length-1],e[n]<c){t[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,e[s[a]]<c?i=a+1:o=a;c<e[s[i]]&&(i>0&&(t[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=t[o];return s}function Uc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Uc(t)}function ra(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Bc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Bc(t.subTree):null}const Mc=e=>e.__isSuspense;function Uh(e,t){t&&t.pendingBranch?K(e)?t.effects.push(...e):t.effects.push(e):Kd(e)}const $e=Symbol.for("v-fgt"),Gn=Symbol.for("v-txt"),We=Symbol.for("v-cmt"),hn=Symbol.for("v-stc"),_r=[];let rt=null;function ne(e=!1){_r.push(rt=e?null:[])}function Bh(){_r.pop(),rt=_r[_r.length-1]||null}let Or=1;function En(e,t=!1){Or+=e,e<0&&rt&&t&&(rt.hasOnce=!0)}function Fc(e){return e.dynamicChildren=Or>0?rt||Ws:null,Bh(),Or>0&&rt&&rt.push(e),e}function le(e,t,s,r,n,i){return Fc(v(e,t,s,r,n,i,!0))}function kn(e,t,s,r,n){return Fc(_e(e,t,s,r,n,!0))}function An(e){return e?e.__v_isVNode===!0:!1}function _s(e,t){return e.type===t.type&&e.key===t.key}const qc=({key:e})=>e??null,fn=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Re(e)||ke(e)||re(e)?{i:st,r:e,k:t,f:!!s}:e:null);function v(e,t=null,s=null,r=0,n=null,i=e===$e?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qc(t),ref:t&&fn(t),scopeId:hc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:st};return a?(Ro(l,s),i&128&&e.normalize(l)):s&&(l.shapeFlag|=Re(s)?8:16),Or>0&&!o&&rt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&rt.push(l),l}const _e=Mh;function Mh(e,t=null,s=null,r=0,n=null,i=!1){if((!e||e===dh)&&(e=We),An(e)){const a=ls(e,t,!0);return s&&Ro(a,s),Or>0&&!i&&rt&&(a.shapeFlag&6?rt[rt.indexOf(e)]=a:rt.push(a)),a.patchFlag=-2,a}if(Xh(e)&&(e=e.__vccOpts),t){t=Fh(t);let{class:a,style:l}=t;a&&!Re(a)&&(t.class=lt(a)),ge(l)&&(Mn(l)&&!K(l)&&(l=Ne({},l)),t.style=As(l))}const o=Re(e)?1:Mc(e)?128:gc(e)?64:ge(e)?4:re(e)?2:0;return v(e,t,s,r,n,o,i,!0)}function Fh(e){return e?Mn(e)||Pc(e)?Ne({},e):e:null}function ls(e,t,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=e,c=t?qh(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&qc(c),ref:t&&t.ref?s&&i?K(i)?i.concat(fn(t)):[i,fn(t)]:fn(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==$e?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ls(e.ssContent),ssFallback:e.ssFallback&&ls(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Tr(u,l.clone(u)),u}function It(e=" ",t=0){return _e(Gn,null,e,t)}function na(e,t){const s=_e(hn,null,e);return s.staticCount=t,s}function Be(e="",t=!1){return t?(ne(),kn(We,null,e)):_e(We,null,e)}function jt(e){return e==null||typeof e=="boolean"?_e(We):K(e)?_e($e,null,e.slice()):An(e)?rs(e):_e(Gn,null,String(e))}function rs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ls(e)}function Ro(e,t){let s=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(K(t))s=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Ro(e,n()),n._c&&(n._d=!0));return}else{s=32;const n=t._;!n&&!Pc(t)?t._ctx=st:n===3&&st&&(st.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else re(t)?(t={default:t,_ctx:st},s=32):(t=String(t),r&64?(s=16,t=[It(t)]):s=8);e.children=t,e.shapeFlag|=s}function qh(...e){const t={};for(let s=0;s<e.length;s++){const r=e[s];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=lt([t.class,r.class]));else if(n==="style")t.style=As([t.style,r.style]);else if(jn(n)){const i=t[n],o=r[n];o&&i!==o&&!(K(i)&&i.includes(o))&&(t[n]=i?[].concat(i,o):o)}else n!==""&&(t[n]=r[n])}return t}function Ot(e,t,s,r=null){_t(e,t,7,[s,r])}const Vh=Rc();let Hh=0;function Kh(e,t,s){const r=e.type,n=(t?t.appContext:e.appContext)||Vh,i={uid:Hh++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ql(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jc(r,n),emitsOptions:Tc(r,n),emit:null,emitted:null,propsDefaults:me,inheritAttrs:r.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Sh.bind(null,i),e.ce&&e.ce(i),i}let Fe=null;const To=()=>Fe||st;let Rn,Vi;{const e=Un(),t=(s,r)=>{let n;return(n=e[s])||(n=e[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};Rn=t("__VUE_INSTANCE_SETTERS__",s=>Fe=s),Vi=t("__VUE_SSR_SETTERS__",s=>Cr=s)}const Vr=e=>{const t=Fe;return Rn(e),e.scope.on(),()=>{e.scope.off(),Rn(t)}},ia=()=>{Fe&&Fe.scope.off(),Rn(null)};function Vc(e){return e.vnode.shapeFlag&4}let Cr=!1;function Wh(e,t=!1,s=!1){t&&Vi(t);const{props:r,children:n}=e.vnode,i=Vc(e);Th(e,r,i,t),Ih(e,n,s||t);const o=i?Gh(e,t):void 0;return t&&Vi(!1),o}function Gh(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,fh);const{setup:r}=s;if(r){Wt();const n=e.setupContext=r.length>1?Jh(e):null,i=Vr(e),o=Fr(r,e,0,[e.props,n]),a=$l(o);if(Gt(),i(),(a||e.sp)&&!br(e)&&Sc(e),a){if(o.then(ia,ia),t)return o.then(l=>{oa(e,l)}).catch(l=>{Fn(l,e,0)});e.asyncDep=o}else oa(e,o)}else Hc(e)}function oa(e,t,s){re(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ge(t)&&(e.setupState=ac(t)),Hc(e)}function Hc(e,t,s){const r=e.type;e.render||(e.render=r.render||Nt);{const n=Vr(e);Wt();try{ph(e)}finally{Gt(),n()}}}const zh={get(e,t){return Me(e,"get",""),e[t]}};function Jh(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,zh),slots:e.slots,emit:e.emit,expose:t}}function zn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ac(So(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in vr)return vr[s](e)},has(t,s){return s in t||s in vr}})):e.proxy}function Yh(e,t=!0){return re(e)?e.displayName||e.name:e.name||t&&e.__name}function Xh(e){return re(e)&&"__vccOpts"in e}const et=(e,t)=>Md(e,t,Cr);function Oo(e,t,s){try{En(-1);const r=arguments.length;return r===2?ge(t)&&!K(t)?An(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&An(s)&&(s=[s]),_e(e,t,s))}finally{En(1)}}const Qh="3.5.27";let Hi;const aa=typeof window<"u"&&window.trustedTypes;if(aa)try{Hi=aa.createPolicy("vue",{createHTML:e=>e})}catch{}const Kc=Hi?e=>Hi.createHTML(e):e=>e,Zh="http://www.w3.org/2000/svg",ef="http://www.w3.org/1998/Math/MathML",Bt=typeof document<"u"?document:null,la=Bt&&Bt.createElement("template"),tf={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,r)=>{const n=t==="svg"?Bt.createElementNS(Zh,e):t==="mathml"?Bt.createElementNS(ef,e):s?Bt.createElement(e,{is:s}):Bt.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>Bt.createTextNode(e),createComment:e=>Bt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Bt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,r,n,i){const o=s?s.previousSibling:t.lastChild;if(n&&(n===i||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{la.innerHTML=Kc(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=la.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Xt="transition",or="animation",Pr=Symbol("_vtc"),Wc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},sf=Ne({},mc,Wc),rf=e=>(e.displayName="Transition",e.props=sf,e),$_=rf((e,{slots:t})=>Oo(Zd,nf(e),t)),fs=(e,t=[])=>{K(e)?e.forEach(s=>s(...t)):e&&e(...t)},ca=e=>e?K(e)?e.some(t=>t.length>1):e.length>1:!1;function nf(e){const t={};for(const I in e)I in Wc||(t[I]=e[I]);if(e.css===!1)return t;const{name:s="v",type:r,duration:n,enterFromClass:i=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${s}-leave-from`,leaveActiveClass:f=`${s}-leave-active`,leaveToClass:p=`${s}-leave-to`}=e,h=of(n),y=h&&h[0],g=h&&h[1],{onBeforeEnter:_,onEnter:E,onEnterCancelled:S,onLeave:k,onLeaveCancelled:N,onBeforeAppear:M=_,onAppear:U=E,onAppearCancelled:H=S}=t,P=(I,ee,ie,we)=>{I._enterCancelled=we,ps(I,ee?u:a),ps(I,ee?c:o),ie&&ie()},z=(I,ee)=>{I._isLeaving=!1,ps(I,d),ps(I,p),ps(I,f),ee&&ee()},q=I=>(ee,ie)=>{const we=I?U:E,oe=()=>P(ee,I,ie);fs(we,[ee,oe]),ua(()=>{ps(ee,I?l:i),Lt(ee,I?u:a),ca(we)||da(ee,r,y,oe)})};return Ne(t,{onBeforeEnter(I){fs(_,[I]),Lt(I,i),Lt(I,o)},onBeforeAppear(I){fs(M,[I]),Lt(I,l),Lt(I,c)},onEnter:q(!1),onAppear:q(!0),onLeave(I,ee){I._isLeaving=!0;const ie=()=>z(I,ee);Lt(I,d),I._enterCancelled?(Lt(I,f),pa(I)):(pa(I),Lt(I,f)),ua(()=>{I._isLeaving&&(ps(I,d),Lt(I,p),ca(k)||da(I,r,g,ie))}),fs(k,[I,ie])},onEnterCancelled(I){P(I,!1,void 0,!0),fs(S,[I])},onAppearCancelled(I){P(I,!0,void 0,!0),fs(H,[I])},onLeaveCancelled(I){z(I),fs(N,[I])}})}function of(e){if(e==null)return null;if(ge(e))return[mi(e.enter),mi(e.leave)];{const t=mi(e);return[t,t]}}function mi(e){return id(e)}function Lt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[Pr]||(e[Pr]=new Set)).add(t)}function ps(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const s=e[Pr];s&&(s.delete(t),s.size||(e[Pr]=void 0))}function ua(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let af=0;function da(e,t,s,r){const n=e._endId=++af,i=()=>{n===e._endId&&r()};if(s!=null)return setTimeout(i,s);const{type:o,timeout:a,propCount:l}=lf(e,t);if(!o)return r();const c=o+"end";let u=0;const d=()=>{e.removeEventListener(c,f),i()},f=p=>{p.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),e.addEventListener(c,f)}function lf(e,t){const s=window.getComputedStyle(e),r=h=>(s[h]||"").split(", "),n=r(`${Xt}Delay`),i=r(`${Xt}Duration`),o=ha(n,i),a=r(`${or}Delay`),l=r(`${or}Duration`),c=ha(a,l);let u=null,d=0,f=0;t===Xt?o>0&&(u=Xt,d=o,f=i.length):t===or?c>0&&(u=or,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?Xt:or:null,f=u?u===Xt?i.length:l.length:0);const p=u===Xt&&/\b(?:transform|all)(?:,|$)/.test(r(`${Xt}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function ha(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,r)=>fa(s)+fa(e[r])))}function fa(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function pa(e){return(e?e.ownerDocument:document).body.offsetHeight}function cf(e,t,s){const r=e[Pr];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const ga=Symbol("_vod"),uf=Symbol("_vsh"),df=Symbol(""),hf=/(?:^|;)\s*display\s*:/;function ff(e,t,s){const r=e.style,n=Re(s);let i=!1;if(s&&!n){if(t)if(Re(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&pn(r,a,"")}else for(const o in t)s[o]==null&&pn(r,o,"");for(const o in s)o==="display"&&(i=!0),pn(r,o,s[o])}else if(n){if(t!==s){const o=r[df];o&&(s+=";"+o),r.cssText=s,i=hf.test(s)}}else t&&e.removeAttribute("style");ga in e&&(e[ga]=i?r.display:"",e[uf]&&(r.display="none"))}const ma=/\s*!important$/;function pn(e,t,s){if(K(s))s.forEach(r=>pn(e,t,r));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const r=pf(e,t);ma.test(s)?e.setProperty(us(r),s.replace(ma,""),"important"):e[r]=s}}const ya=["Webkit","Moz","ms"],yi={};function pf(e,t){const s=yi[t];if(s)return s;let r=ht(t);if(r!=="filter"&&r in e)return yi[t]=r;r=Dn(r);for(let n=0;n<ya.length;n++){const i=ya[n]+r;if(i in e)return yi[t]=i}return t}const ba="http://www.w3.org/1999/xlink";function va(e,t,s,r,n,i=dd(t)){r&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(ba,t.slice(6,t.length)):e.setAttributeNS(ba,t,s):s==null||i&&!Bl(s)?e.removeAttribute(t):e.setAttribute(t,i?"":$t(s)?String(s):s)}function _a(e,t,s,r,n){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Kc(s):s);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let o=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=Bl(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{e[t]=s}catch{}o&&e.removeAttribute(n||t)}function Ht(e,t,s,r){e.addEventListener(t,s,r)}function gf(e,t,s,r){e.removeEventListener(t,s,r)}const wa=Symbol("_vei");function mf(e,t,s,r,n=null){const i=e[wa]||(e[wa]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=yf(t);if(r){const c=i[t]=_f(r,n);Ht(e,a,c,l)}else o&&(gf(e,a,o,l),i[t]=void 0)}}const Sa=/(?:Once|Passive|Capture)$/;function yf(e){let t;if(Sa.test(e)){t={};let r;for(;r=e.match(Sa);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):us(e.slice(2)),t]}let bi=0;const bf=Promise.resolve(),vf=()=>bi||(bf.then(()=>bi=0),bi=Date.now());function _f(e,t){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;_t(wf(r,s.value),t,5,[r])};return s.value=e,s.attached=vf(),s}function wf(e,t){if(K(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const xa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Sf=(e,t,s,r,n,i)=>{const o=n==="svg";t==="class"?cf(e,r,o):t==="style"?ff(e,s,r):jn(t)?fo(t)||mf(e,t,s,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):xf(e,t,r,o))?(_a(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&va(e,t,r,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Re(r))?_a(e,ht(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),va(e,t,r,o))};function xf(e,t,s,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&xa(t)&&re(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return xa(t)&&Re(s)?!1:t in e}const cs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return K(t)?s=>un(t,s):t};function Ef(e){e.target.composing=!0}function Ea(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const dt=Symbol("_assign");function ka(e,t,s){return t&&(e=e.trim()),s&&(e=Ln(e)),e}const Tn={created(e,{modifiers:{lazy:t,trim:s,number:r}},n){e[dt]=cs(n);const i=r||n.props&&n.props.type==="number";Ht(e,t?"change":"input",o=>{o.target.composing||e[dt](ka(e.value,s,i))}),(s||i)&&Ht(e,"change",()=>{e.value=ka(e.value,s,i)}),t||(Ht(e,"compositionstart",Ef),Ht(e,"compositionend",Ea),Ht(e,"change",Ea))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(e[dt]=cs(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?Ln(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===s||n&&e.value.trim()===l)||(e.value=l))}},kf={deep:!0,created(e,t,s){e[dt]=cs(s),Ht(e,"change",()=>{const r=e._modelValue,n=Xs(e),i=e.checked,o=e[dt];if(K(r)){const a=go(r,n),l=a!==-1;if(i&&!l)o(r.concat(n));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(tr(r)){const a=new Set(r);i?a.add(n):a.delete(n),o(a)}else o(Gc(e,i))})},mounted:Aa,beforeUpdate(e,t,s){e[dt]=cs(s),Aa(e,t,s)}};function Aa(e,{value:t,oldValue:s},r){e._modelValue=t;let n;if(K(t))n=go(t,r.props.value)>-1;else if(tr(t))n=t.has(r.props.value);else{if(t===s)return;n=Cs(t,Gc(e,!0))}e.checked!==n&&(e.checked=n)}const Af={created(e,{value:t},s){e.checked=Cs(t,s.props.value),e[dt]=cs(s),Ht(e,"change",()=>{e[dt](Xs(e))})},beforeUpdate(e,{value:t,oldValue:s},r){e[dt]=cs(r),t!==s&&(e.checked=Cs(t,r.props.value))}},Rf={deep:!0,created(e,{value:t,modifiers:{number:s}},r){const n=tr(t);Ht(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>s?Ln(Xs(o)):Xs(o));e[dt](e.multiple?n?new Set(i):i:i[0]),e._assigning=!0,qn(()=>{e._assigning=!1})}),e[dt]=cs(r)},mounted(e,{value:t}){Ra(e,t)},beforeUpdate(e,t,s){e[dt]=cs(s)},updated(e,{value:t}){e._assigning||Ra(e,t)}};function Ra(e,t){const s=e.multiple,r=K(t);if(!(s&&!r&&!tr(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=Xs(o);if(s)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=go(t,a)>-1}else o.selected=t.has(a);else if(Cs(Xs(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Xs(e){return"_value"in e?e._value:e.value}function Gc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Tf={created(e,t,s){tn(e,t,s,null,"created")},mounted(e,t,s){tn(e,t,s,null,"mounted")},beforeUpdate(e,t,s,r){tn(e,t,s,r,"beforeUpdate")},updated(e,t,s,r){tn(e,t,s,r,"updated")}};function Of(e,t){switch(e){case"SELECT":return Rf;case"TEXTAREA":return Tn;default:switch(t){case"checkbox":return kf;case"radio":return Af;default:return Tn}}}function tn(e,t,s,r,n){const o=Of(e.tagName,s.props&&s.props.type)[n];o&&o(e,t,s,r)}const Cf=["ctrl","shift","alt","meta"],Pf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Cf.some(s=>e[`${s}Key`]&&!t.includes(s))},If=(e,t)=>{const s=e._withMods||(e._withMods={}),r=t.join(".");return s[r]||(s[r]=((n,...i)=>{for(let o=0;o<t.length;o++){const a=Pf[t[o]];if(a&&a(n,t))return}return e(n,...i)}))},jf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},D_=(e,t)=>{const s=e._withKeys||(e._withKeys={}),r=t.join(".");return s[r]||(s[r]=(n=>{if(!("key"in n))return;const i=us(n.key);if(t.some(o=>o===i||jf[o]===i))return e(n)}))},Nf=Ne({patchProp:Sf},tf);let Ta;function $f(){return Ta||(Ta=Nh(Nf))}const Df=((...e)=>{const t=$f().createApp(...e),{mount:s}=t;return t.mount=r=>{const n=Uf(r);if(!n)return;const i=t._component;!re(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Lf(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t});function Lf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Uf(e){return Re(e)?document.querySelector(e):e}let zc;const Jn=e=>zc=e,Jc=Symbol();function Ki(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var wr;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(wr||(wr={}));function Bf(){const e=Vl(!0),t=e.run(()=>Ee({}));let s=[],r=[];const n=So({install(i){Jn(n),n._a=i,i.provide(Jc,n),i.config.globalProperties.$pinia=n,r.forEach(o=>s.push(o)),r=[]},use(i){return this._a?s.push(i):r.push(i),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return n}const Yc=()=>{};function Oa(e,t,s,r=Yc){e.add(t);const n=()=>{e.delete(t)&&r()};return!s&&Hl()&&fd(n),n}function js(e,...t){e.forEach(s=>{s(...t)})}const Mf=e=>e(),Ca=Symbol(),vi=Symbol();function Wi(e,t){e instanceof Map&&t instanceof Map?t.forEach((s,r)=>e.set(r,s)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const s in t){if(!t.hasOwnProperty(s))continue;const r=t[s],n=e[s];Ki(n)&&Ki(r)&&e.hasOwnProperty(s)&&!ke(r)&&!Kt(r)?e[s]=Wi(n,r):e[s]=r}return e}const Ff=Symbol();function qf(e){return!Ki(e)||!Object.prototype.hasOwnProperty.call(e,Ff)}const{assign:Zt}=Object;function Vf(e){return!!(ke(e)&&e.effect)}function Hf(e,t,s,r){const{state:n,actions:i,getters:o}=t,a=s.state.value[e];let l;function c(){a||(s.state.value[e]=n?n():{});const u=Dd(s.state.value[e]);return Zt(u,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=So(et(()=>{Jn(s);const p=s._s.get(e);return o[f].call(p,p)})),d),{}))}return l=Xc(e,c,t,s,r,!0),l}function Xc(e,t,s={},r,n,i){let o;const a=Zt({actions:{}},s),l={deep:!0};let c,u,d=new Set,f=new Set,p;const h=r.state.value[e];!i&&!h&&(r.state.value[e]={});let y;function g(H){let P;c=u=!1,typeof H=="function"?(H(r.state.value[e]),P={type:wr.patchFunction,storeId:e,events:p}):(Wi(r.state.value[e],H),P={type:wr.patchObject,payload:H,storeId:e,events:p});const z=y=Symbol();qn().then(()=>{y===z&&(c=!0)}),u=!0,js(d,P,r.state.value[e])}const _=i?function(){const{state:P}=s,z=P?P():{};this.$patch(q=>{Zt(q,z)})}:Yc;function E(){o.stop(),d.clear(),f.clear(),r._s.delete(e)}const S=(H,P="")=>{if(Ca in H)return H[vi]=P,H;const z=function(){Jn(r);const q=Array.from(arguments),I=new Set,ee=new Set;function ie(se){I.add(se)}function we(se){ee.add(se)}js(f,{args:q,name:z[vi],store:N,after:ie,onError:we});let oe;try{oe=H.apply(this&&this.$id===e?this:N,q)}catch(se){throw js(ee,se),se}return oe instanceof Promise?oe.then(se=>(js(I,se),se)).catch(se=>(js(ee,se),Promise.reject(se))):(js(I,oe),oe)};return z[Ca]=!0,z[vi]=P,z},k={_p:r,$id:e,$onAction:Oa.bind(null,f),$patch:g,$reset:_,$subscribe(H,P={}){const z=Oa(d,H,P.detached,()=>q()),q=o.run(()=>mr(()=>r.state.value[e],I=>{(P.flush==="sync"?u:c)&&H({storeId:e,type:wr.direct,events:p},I)},Zt({},l,P)));return z},$dispose:E},N=Mr(k);r._s.set(e,N);const U=(r._a&&r._a.runWithContext||Mf)(()=>r._e.run(()=>(o=Vl()).run(()=>t({action:S}))));for(const H in U){const P=U[H];if(ke(P)&&!Vf(P)||Kt(P))i||(h&&qf(P)&&(ke(P)?P.value=h[H]:Wi(P,h[H])),r.state.value[e][H]=P);else if(typeof P=="function"){const z=S(P,H);U[H]=z,a.actions[H]=P}}return Zt(N,U),Zt(de(N),U),Object.defineProperty(N,"$state",{get:()=>r.state.value[e],set:H=>{g(P=>{Zt(P,H)})}}),r._p.forEach(H=>{Zt(N,o.run(()=>H({store:N,app:r._a,pinia:r,options:a})))}),h&&i&&s.hydrate&&s.hydrate(N.$state,h),c=!0,u=!0,N}function Kf(e,t,s){let r;const n=typeof t=="function";r=n?s:t;function i(o,a){const l=Wd();return o=o||(l?ut(Jc,null):null),o&&Jn(o),o=zc,o._s.has(e)||(n?Xc(e,t,r,o):Hf(e,r,o)),o._s.get(e)}return i.$id=e,i}function Yn(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]]);return s}function Wf(e,t,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}const Gf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Co extends Error{constructor(t,s="FunctionsError",r){super(t),this.name=s,this.context=r}}class zf extends Co{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Pa extends Co{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ia extends Co{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Gi;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Gi||(Gi={}));class Jf{constructor(t,{headers:s={},customFetch:r,region:n=Gi.Any}={}){this.url=t,this.headers=s,this.region=n,this.fetch=Gf(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Wf(this,arguments,void 0,function*(s,r={}){var n;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=r;let f={},{region:p}=r;p||(p=this.region);const h=new URL(`${this.url}/${s}`);p&&p!=="any"&&(f["x-region"]=p,h.searchParams.set("forceFunctionRegion",p));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?y=JSON.stringify(c):y=c;let g=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(g=o.signal,u.addEventListener("abort",()=>o.abort())):g=o.signal);const _=yield this.fetch(h.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:g}).catch(N=>{throw new zf(N)}),E=_.headers.get("x-relay-error");if(E&&E==="true")throw new Pa(_);if(!_.ok)throw new Ia(_);let S=((n=_.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),k;return S==="application/json"?k=yield _.json():S==="application/octet-stream"||S==="application/pdf"?k=yield _.blob():S==="text/event-stream"?k=_:S==="multipart/form-data"?k=yield _.formData():k=yield _.text(),{data:k,error:null,response:_}}catch(a){return{data:null,error:a,response:a instanceof Ia||a instanceof Pa?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var Yf=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Xf=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,c=i.status,u=i.statusText;if(i.ok){var d,f;if(s.method!=="HEAD"){var p;const _=await i.text();_===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((p=s.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=_:a=JSON.parse(_))}const y=(d=s.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),g=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&g&&g.length>1&&(l=parseInt(g[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var h;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(a=[],o=null,c=200,u="OK")}catch{i.status===404&&y===""?(c=204,u="No Content"):o={message:y}}if(o&&s.isMaybeSingle&&(!(o==null||(h=o.details)===null||h===void 0)&&h.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&s.shouldThrowOnError)throw new Yf(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(i=>{var o;let a="";const l=i?.cause;if(l){var c,u,d,f;const h=(c=l?.message)!==null&&c!==void 0?c:"",y=(u=l?.code)!==null&&u!==void 0?u:"";a=`${(d=i?.name)!==null&&d!==void 0?d:"FetchError"}: ${i?.message}`,a+=`

Caused by: ${(f=l?.name)!==null&&f!==void 0?f:"Error"}: ${h}`,y&&(a+=` (${y})`),l?.stack&&(a+=`
${l.stack}`)}else{var p;a=(p=i?.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},Qf=class extends Xf{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const ja=new RegExp("[,()]");var Fs=class extends Qf{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&ja.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}notIn(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&ja.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let n="";r==="plain"?n="pl":r==="phrase"?n="ph":r==="websearch"&&(n="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}},Zf=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:s=!1,count:r}=t??{},n=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new Fs({method:n,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;const n="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),s||o.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);i.searchParams.set("columns",l.join(","))}}return new Fs({method:n,url:i,headers:o,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&l.append("Prefer",`count=${r}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new Fs({method:o,url:a,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var s;const r="PATCH",{url:n,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Fs({method:r,url:n,headers:i,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var t;const s="DELETE",{url:r,headers:n}=this.cloneRequestState();return e&&n.append("Prefer",`count=${e}`),new Fs({method:s,url:r,headers:n,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},ep=class Qc{constructor(t,{headers:s={},schema:r,fetch:n}={}){this.url=t,this.headers=new Headers(s),this.schemaName=r,this.fetch=n}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Zf(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Qc(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:r=!1,get:n=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;const u=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(u)),d=r&&Object.values(s).some(u);d?(a="POST",c=s):r||n?(a=r?"HEAD":"GET",Object.entries(s).filter(([p,h])=>h!==void 0).map(([p,h])=>[p,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([p,h])=>{l.searchParams.append(p,h)})):(a="POST",c=s);const f=new Headers(this.headers);return d?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Fs({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class tp{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const r=s.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const r=this.getWebSocketConstructor();return new r(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const sp="2.93.3",rp=`realtime-js/${sp}`,np="1.0.0",Zc="2.0.0",Na=Zc,zi=1e4,ip=1e3,op=100;var ns;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ns||(ns={}));var Ie;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ie||(Ie={}));var yt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(yt||(yt={}));var Ji;(function(e){e.websocket="websocket"})(Ji||(Ji={}));var ws;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ws||(ws={}));class ap{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,r;const n=(r=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(t){var s,r;const n=(r=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,s,r){var n,i;const o=t.topic,a=(n=t.ref)!==null&&n!==void 0?n:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let h=new DataView(p),y=0;h.setUint8(y++,this.KINDS.userBroadcastPush),h.setUint8(y++,l.length),h.setUint8(y++,a.length),h.setUint8(y++,o.length),h.setUint8(y++,c.length),h.setUint8(y++,d.length),h.setUint8(y++,s),Array.from(l,_=>h.setUint8(y++,_.charCodeAt(0))),Array.from(a,_=>h.setUint8(y++,_.charCodeAt(0))),Array.from(o,_=>h.setUint8(y++,_.charCodeAt(0))),Array.from(c,_=>h.setUint8(y++,_.charCodeAt(0))),Array.from(d,_=>h.setUint8(y++,_.charCodeAt(0)));var g=new Uint8Array(p.byteLength+r.byteLength);return g.set(new Uint8Array(p),0),g.set(new Uint8Array(r),p.byteLength),g.buffer}decode(t,s){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return s(r)}if(typeof t=="string"){const r=JSON.parse(t),[n,i,o,a,l]=r;return s({join_ref:n,ref:i,topic:o,event:a,payload:l})}return s({})}_binaryDecode(t){const s=new DataView(t),r=s.getUint8(0),n=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,s,n)}_decodeUserBroadcast(t,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(t.slice(l,l+n));l=l+n;const u=r.decode(t.slice(l,l+i));l=l+i;const d=r.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,h={type:this.BROADCAST_EVENT,event:u,payload:p};return o>0&&(h.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:h}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>s.includes(r)))}}class eu{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(be||(be={}));const $a=(e,t,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=lp(o,e,t,n),i),{}):{}},lp=(e,t,s,r)=>{const n=t.find(a=>a.name===e),i=n?.type,o=s[e];return i&&!r.includes(i)?tu(i,o):Yi(o)},tu=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return hp(t,s)}switch(e){case be.bool:return cp(t);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return up(t);case be.json:case be.jsonb:return dp(t);case be.timestamp:return fp(t);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return Yi(t);default:return Yi(t)}},Yi=e=>e,cp=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},up=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dp=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},hp=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,r=e[s];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>tu(t,a))}return e},fp=e=>typeof e=="string"?e.replace(" ","T"):e,su=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class _i{constructor(t,s,r={},n=zi){this.channel=t,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var r;return this._hasReceived(t)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Da;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Da||(Da={}));class Sr{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sr.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Sr.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Sr.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,r,n){const i=this.cloneDeep(t),o=this.transformState(s),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(g=>g.presence_ref),p=d.map(g=>g.presence_ref),h=u.filter(g=>p.indexOf(g.presence_ref)<0),y=d.filter(g=>f.indexOf(g.presence_ref)<0);h.length>0&&(a[c]=h),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(t,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);t[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,n(a,c,l),c.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(r=>s(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,r)=>{const n=t[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var La;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(La||(La={}));var xr;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(xr||(xr={}));var Mt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Mt||(Mt={}));class Ks{constructor(t,s={config:{}},r){var n,i;if(this.topic=t,this.params=s,this.socket=r,this.bindings={},this.state=Ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new _i(this,yt.join,this.params,this.timeout),this.rejoinTimer=new eu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ie.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Sr(this),this.broadcastEndpointURL=su(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ie.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[xr.PRESENCE]&&this.bindings[xr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t?.(Mt.CHANNEL_ERROR,p)),this._onClose(()=>t?.(Mt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var h;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t?.(Mt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,g=(h=y?.length)!==null&&h!==void 0?h:0,_=[];for(let E=0;E<g;E++){const S=y[E],{filter:{event:k,schema:N,table:M,filter:U}}=S,H=p&&p[E];if(H&&H.event===k&&Ks.isFilterValueEqual(H.schema,N)&&Ks.isFilterValueEqual(H.table,M)&&Ks.isFilterValueEqual(H.filter,U))_.push(Object.assign(Object.assign({},S),{id:H.id}));else{this.unsubscribe(),this.state=Ie.errored,t?.(Mt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Mt.SUBSCRIBED);return}}).receive("error",p=>{this.state=Ie.errored,t?.(Mt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t?.(Mt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,r){return this.state===Ie.joined&&t===xr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,r)}async httpSend(t,s,r={}){var n;if(s==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,s={}){var r,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ie.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new _i(this,yt.leave,{},t),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ie.closed,this.bindings={}}async _fetchWithTimeout(t,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(t,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new _i(this,t,s,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>op){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,r){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,r){var n,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=yt;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,s,r);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var h,y,g;return((h=p.filter)===null||h===void 0?void 0:h.event)==="*"||((g=(y=p.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var h,y,g,_,E,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,N=(h=p.filter)===null||h===void 0?void 0:h.event;return k&&((y=s.ids)===null||y===void 0?void 0:y.includes(k))&&(N==="*"||N?.toLocaleLowerCase()===((g=s.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const k=(E=(_=p?.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return k==="*"||k===((S=s?.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const h=f.data,{schema:y,table:g,commit_timestamp:_,type:E,errors:S}=h;f=Object.assign(Object.assign({},{schema:y,table:g,commit_timestamp:_,eventType:E,new:{},old:{},errors:S}),this._getPayloadRecords(h))}p.callback(f,r)})}_isClosed(){return this.state===Ie.closed}_isJoined(){return this.state===Ie.joined}_isJoining(){return this.state===Ie.joining}_isLeaving(){return this.state===Ie.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,r){const n=t.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,s){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ks.isEqual(n.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(yt.close,{},t)}_onError(t){this._on(yt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ie.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=$a(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=$a(t.columns,t.old_record)),s}}const wi=()=>{},sn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pp=[1e3,2e3,5e3,1e4],gp=1e4,mp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yp{constructor(t,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zi,this.transport=null,this.heartbeatIntervalMs=sn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wi,this.ref=0,this.reconnectTimer=null,this.vsn=Na,this.logger=wi,this.conn=null,this.sendBuffer=[],this.serializer=new ap,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((r=s?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${Ji.websocket}`,this.httpEndpoint=su(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tp.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,r){this.logger(t,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ns.connecting:return ws.Connecting;case ns.open:return ws.Open;case ns.closing:return ws.Closing;default:return ws.Closed}}isConnected(){return this.connectionState()===ws.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const r=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new Ks(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:r,payload:n,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(ip,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},sn.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:n,payload:i,ref:o}=s,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${n} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(n,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ns.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ns.open||this.conn.readyState===ns.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(yt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const r=t.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${t}${r}${n}`}_workerObjectUrl(t){let s;if(t)s=t;else{const r=new Blob([mp],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,r=!1;if(t)s=t,r=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),s=this.accessTokenValue}else s=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:rp};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(yt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(s)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new eu(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,r,n,i,o,a,l,c,u,d,f,p;switch(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:zi,this.heartbeatIntervalMs=(n=t?.heartbeatIntervalMs)!==null&&n!==void 0?n:sn.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:wi,this.vsn=(l=t?.vsn)!==null&&l!==void 0?l:Na,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t?.reconnectAfterMs)!==null&&c!==void 0?c:(h=>pp[h-1]||gp),this.vsn){case np:this.encode=(u=t?.encode)!==null&&u!==void 0?u:((h,y)=>y(JSON.stringify(h))),this.decode=(d=t?.decode)!==null&&d!==void 0?d:((h,y)=>y(JSON.parse(h)));break;case Zc:this.encode=(f=t?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Ir=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function bp(e,t,s){const r=new URL(t,e);if(s)for(const[n,i]of Object.entries(s))i!==void 0&&r.searchParams.set(n,i);return r.toString()}async function vp(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function _p(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:s,path:r,query:n,body:i,headers:o}){const a=bp(e.baseUrl,r,n),l=await vp(e.auth),c=await t(a,{method:s,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&u?JSON.parse(u):u;if(!c.ok){const p=d?f:void 0,h=p?.error;throw new Ir(h?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:h?.type,icebergCode:h?.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function rn(e){return e.join("")}var wp=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:rn(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const s={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rn(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rn(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rn(e.namespace)}`}),!0}catch(t){if(t instanceof Ir&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(s){if(s instanceof Ir&&s.status===409)return;throw s}}};function Ns(e){return e.join("")}var Sp=class{constructor(e,t="",s){this.client=e,this.prefix=t,this.accessDelegation=s}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ns(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ns(e.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(e,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ns(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ns(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ns(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ns(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(s){if(s instanceof Ir&&s.status===404)return!1;throw s}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(s){if(s instanceof Ir&&s.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw s}}},xp=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const s=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=_p({baseUrl:s,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new wp(this.client,t),this.tableOps=new Sp(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Xn=class extends Error{constructor(e,t="storage",s,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=r}};function Qn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var nn=class extends Xn{constructor(e,t,s,r="storage"){super(e,r,t,s),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ru=class extends Xn{constructor(e,t,s="storage"){super(e,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const Ep=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kp=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Xi=e=>{if(Array.isArray(e))return e.map(s=>Xi(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=Xi(r)}),t},Ap=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function jr(e){"@babel/helpers - typeof";return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(e)}function Rp(e,t){if(jr(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var r=s.call(e,t);if(jr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tp(e){var t=Rp(e,"string");return jr(t)=="symbol"?t:t+""}function Op(e,t,s){return(t=Tp(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ua(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,r)}return s}function Q(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Ua(Object(s),!0).forEach(function(r){Op(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ua(Object(s)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))})}return e}const Ba=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Cp=async(e,t,s,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!s?.noResolveJson){const n=e,i=n.status||500;if(typeof n.json=="function")n.json().then(o=>{const a=o?.statusCode||o?.code||i+"";t(new nn(Ba(o),i,a,r))}).catch(()=>{if(r==="vectors"){const o=i+"";t(new nn(n.statusText||`HTTP ${i} error`,i,o,r))}else{const o=i+"";t(new nn(n.statusText||`HTTP ${i} error`,i,o,r))}});else{const o=i+"";t(new nn(n.statusText||`HTTP ${i} error`,i,o,r))}}else t(new ru(Ba(e),e,r))},Pp=(e,t,s,r)=>{const n={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!r?Q(Q({},n),s):(kp(r)?(n.headers=Q({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(r)):n.body=r,t?.duplex&&(n.duplex=t.duplex),Q(Q({},n),s))};async function ar(e,t,s,r,n,i,o){return new Promise((a,l)=>{e(s,Pp(t,r,n,i)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;if(o==="vectors"){const u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>Cp(c,l,r,o))})}function nu(e="storage"){return{get:async(t,s,r,n)=>ar(t,"GET",s,r,n,void 0,e),post:async(t,s,r,n,i)=>ar(t,"POST",s,n,i,r,e),put:async(t,s,r,n,i)=>ar(t,"PUT",s,n,i,r,e),head:async(t,s,r,n)=>ar(t,"HEAD",s,Q(Q({},r),{},{noResolveJson:!0}),n,void 0,e),remove:async(t,s,r,n,i)=>ar(t,"DELETE",s,n,i,r,e)}}const Ip=nu("storage"),{get:Nr,post:mt,put:Qi,head:jp,remove:Po}=Ip,tt=nu("vectors");var sr=class{constructor(e,t={},s,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=Ep(s),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Qn(s))return{data:null,error:s};throw s}}},Np=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Qn(t))return{data:null,error:t};throw t}}};let iu;iu=Symbol.toStringTag;var $p=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[iu]="BlobDownloadBuilder",this.promise=null}asStream(){return new Np(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Qn(t))return{data:null,error:t};throw t}}};const Dp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ma={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Lp=class extends sr{constructor(e,t={},s,r){super(e,t,r,"storage"),this.bucketId=s}async uploadOrUpdate(e,t,s,r){var n=this;return n.handleOperation(async()=>{let i;const o=Q(Q({},Ma),r);let a=Q(Q({},n.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",n.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",n.encodeMetadata(l))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=n.toBase64(n.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r?.headers&&(a=Q(Q({},a),r.headers));const c=n._removeEmptyFolders(t),u=n._getFinalPath(c),d=await(e=="PUT"?Qi:mt)(n.fetch,`${n.url}/object/${u}`,i,Q({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{path:c,id:d.Id,fullPath:d.Key}})}async upload(e,t,s){return this.uploadOrUpdate("POST",e,t,s)}async uploadToSignedUrl(e,t,s,r){var n=this;const i=n._removeEmptyFolders(e),o=n._getFinalPath(i),a=new URL(n.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",t),n.handleOperation(async()=>{let l;const c=Q({upsert:Ma.upsert},r),u=Q(Q({},n.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:i,fullPath:(await Qi(n.fetch,a.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(e,t){var s=this;return s.handleOperation(async()=>{let r=s._getFinalPath(e);const n=Q({},s.headers);t?.upsert&&(n["x-upsert"]="true");const i=await mt(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(s.url+i.url),a=o.searchParams.get("token");if(!a)throw new Xn("No token returned by API");return{signedUrl:o.toString(),path:e,token:a}})}async update(e,t,s){return this.uploadOrUpdate("PUT",e,t,s)}async move(e,t,s){var r=this;return r.handleOperation(async()=>await mt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:r.headers}))}async copy(e,t,s){var r=this;return r.handleOperation(async()=>({path:(await mt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,s){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e),i=await mt(r.fetch,`${r.url}/object/sign/${n}`,Q({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:r.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,s){var r=this;return r.handleOperation(async()=>{const n=await mt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return n.map(o=>Q(Q({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null}))})}download(e,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),n=r?`?${r}`:"",i=this._getFinalPath(e),o=()=>Nr(this.fetch,`${this.url}/${s}/${i}${n}`,{headers:this.headers,noResolveJson:!0});return new $p(o,this.shouldThrowOnError)}async info(e){var t=this;const s=t._getFinalPath(e);return t.handleOperation(async()=>Xi(await Nr(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})))}async exists(e){var t=this;const s=t._getFinalPath(e);try{return await jp(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Qn(r)&&r instanceof ru){const n=r.originalError;if([400,404].includes(n?.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],n=t?.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&r.push(n);const i=typeof t?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(t?.transform||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${s}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Po(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,s){var r=this;return r.handleOperation(async()=>{const n=Q(Q(Q({},Dp),t),{},{prefix:e||""});return await mt(r.fetch,`${r.url}/object/list/${r.bucketId}`,n,{headers:r.headers},s)})}async listV2(e,t){var s=this;return s.handleOperation(async()=>{const r=Q({},e);return await mt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Up="2.93.3",Hr={"X-Client-Info":`storage-js/${Up}`};var Bp=class extends sr{constructor(e,t={},s,r){const n=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."));const i=n.href.replace(/\/$/,""),o=Q(Q({},Hr),t);super(i,o,s,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const s=t.listBucketOptionsToQueryString(e);return await Nr(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var s=this;return s.handleOperation(async()=>await mt(s.fetch,`${s.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async updateBucket(e,t){var s=this;return s.handleOperation(async()=>await Qi(s.fetch,`${s.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await mt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Po(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Mp=class extends sr{constructor(e,t={},s){const r=e.replace(/\/$/,""),n=Q(Q({},Hr),t);super(r,n,s,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await mt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const s=new URLSearchParams;e?.limit!==void 0&&s.set("limit",e.limit.toString()),e?.offset!==void 0&&s.set("offset",e.offset.toString()),e?.sortColumn&&s.set("sortColumn",e.sortColumn),e?.sortOrder&&s.set("sortOrder",e.sortOrder),e?.search&&s.set("search",e.search);const r=s.toString(),n=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await Nr(t.fetch,n,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Po(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!Ap(e))throw new Xn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new xp({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(n,i){const o=n[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(n,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},Fp=class extends sr{constructor(e,t={},s){const r=e.replace(/\/$/,""),n=Q(Q({},Hr),{},{"Content-Type":"application/json"},t);super(r,n,s,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var s=this;return s.handleOperation(async()=>await tt.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:s.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var s=this;return s.handleOperation(async()=>await tt.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:s.headers})||{})}},qp=class extends sr{constructor(e,t={},s){const r=e.replace(/\/$/,""),n=Q(Q({},Hr),{},{"Content-Type":"application/json"},t);super(r,n,s,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},Vp=class extends sr{constructor(e,t={},s){const r=e.replace(/\/$/,""),n=Q(Q({},Hr),{},{"Content-Type":"application/json"},t);super(r,n,s,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await tt.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},Hp=class extends Vp{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Kp(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,s=this;return t().call(s,e)}async getBucket(e){var t=()=>super.getBucket,s=this;return t().call(s,e)}async listBuckets(e={}){var t=()=>super.listBuckets,s=this;return t().call(s,e)}async deleteBucket(e){var t=()=>super.deleteBucket,s=this;return t().call(s,e)}},Kp=class extends Fp{constructor(e,t,s,r){super(e,t,r),this.vectorBucketName=s}async createIndex(e){var t=()=>super.createIndex,s=this;return t().call(s,Q(Q({},e),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,s=this;return t().call(s,Q(Q({},e),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,e)}index(e){return new Wp(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Wp=class extends qp{constructor(e,t,s,r,n){super(e,t,n),this.vectorBucketName=s,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,s=this;return t().call(s,Q(Q({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(e){var t=()=>super.getVectors,s=this;return t().call(s,Q(Q({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,s=this;return t().call(s,Q(Q({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,s=this;return t().call(s,Q(Q({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,s=this;return t().call(s,Q(Q({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Gp=class extends Bp{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Lp(this.url,this.headers,e,this.fetch)}get vectors(){return new Hp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Mp(this.url+"/iceberg",this.headers,this.fetch)}};const ou="2.93.3",qs=30*1e3,Zi=3,Si=Zi*qs,zp="http://localhost:9999",Jp="supabase.auth.token",Yp={"X-Client-Info":`gotrue-js/${ou}`},eo="X-Supabase-Api-Version",au={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qp=600*1e3;class $r extends Error{constructor(t,s,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function V(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Zp extends $r{constructor(t,s,r){super(t,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function eg(e){return V(e)&&e.name==="AuthApiError"}class Ss extends $r{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Yt extends $r{constructor(t,s,r,n){super(t,r,n),this.name=s,this.status=r}}class Qe extends Yt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xi(e){return V(e)&&e.name==="AuthSessionMissingError"}class $s extends Yt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class on extends Yt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class an extends Yt{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tg(e){return V(e)&&e.name==="AuthImplicitGrantRedirectError"}class Fa extends Yt{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sg extends Yt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class to extends Yt{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Ei(e){return V(e)&&e.name==="AuthRetryableFetchError"}class qa extends Yt{constructor(t,s,r){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class so extends Yt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const On="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Va=` 	
\r=`.split(""),rg=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Va.length;t+=1)e[Va[t].charCodeAt(0)]=-2;for(let t=0;t<On.length;t+=1)e[On[t].charCodeAt(0)]=t;return e})();function Ha(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s(On[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s(On[r]),t.queuedBits-=6}}function lu(e,t,s){const r=rg[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ka(e){const t=[],s=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{og(o,r,s)};for(let o=0;o<e.length;o+=1)lu(e.charCodeAt(o),n,i);return t.join("")}function ng(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ig(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(e.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}ng(r,t)}}function og(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Js(e){const t=[],s={queue:0,queuedBits:0},r=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)lu(e.charCodeAt(n),s,r);return new Uint8Array(t)}function ag(e){const t=[];return ig(e,s=>t.push(s)),new Uint8Array(t)}function xs(e){const t=[],s={queue:0,queuedBits:0},r=n=>{t.push(n)};return e.forEach(n=>Ha(n,s,r)),Ha(null,s,r),t.join("")}function lg(e){return Math.round(Date.now()/1e3)+e}function cg(){return Symbol("auth-callback")}const Le=()=>typeof window<"u"&&typeof document<"u",gs={tested:!1,writable:!1},cu=()=>{if(!Le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gs.tested)return gs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gs.tested=!0,gs.writable=!0}catch{gs.tested=!0,gs.writable=!1}return gs.writable};function ug(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{t[n]=r}),t}const uu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),dg=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vs=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},ms=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},De=async(e,t)=>{await e.removeItem(t)};class Zn{constructor(){this.promise=new Zn.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Zn.promiseConstructor=Promise;function ln(e){const t=e.split(".");if(t.length!==3)throw new so("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Xp.test(t[r]))throw new so("JWT not in base64url format");return{header:JSON.parse(Ka(t[0])),payload:JSON.parse(Ka(t[1])),signature:Js(t[2]),raw:{header:t[0],payload:t[1]}}}async function hg(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function fg(e,t){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function pg(e){return("0"+e.toString(16)).substr(-2)}function gg(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(t),Array.from(t,pg).join("")}async function mg(e){const s=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function yg(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await mg(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ds(e,t,s=!1){const r=gg();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await Vs(e,`${t}-code-verifier`,n);const i=await yg(r);return[i,r===i?"plain":"s256"]}const bg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vg(e){const t=e.headers.get(eo);if(!t||!t.match(bg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _g(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function wg(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ls(e){if(!Sg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ki(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xg(e,t){return new Proxy(e,{get:(s,r,n)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,n)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,r,n)}})}function Wa(e){return JSON.parse(JSON.stringify(e))}const bs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Eg=[502,503,504];async function Ga(e){var t;if(!dg(e))throw new to(bs(e),0);if(Eg.includes(e.status))throw new to(bs(e),e.status);let s;try{s=await e.json()}catch(i){throw new Ss(bs(i),i)}let r;const n=vg(e);if(n&&n.getTime()>=au["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new qa(bs(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Qe}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new qa(bs(s),e.status,s.weak_password.reasons);throw new Zp(bs(s),e.status||500,r)}const kg=(e,t,s,r)=>{const n={method:e,headers:t?.headers||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function Y(e,t,s,r){var n;const i=Object.assign({},r?.headers);i[eo]||(i[eo]=au["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Ag(e,t,s+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function Ag(e,t,s,r,n,i){const o=kg(t,r,n,i);let a;try{a=await e(s,Object.assign({},o))}catch(l){throw console.error(l),new to(bs(l),0)}if(a.ok||await Ga(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await Ga(l)}}function pt(e){var t;let s=null;Og(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=lg(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:r},error:null}}function za(e){const t=pt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function os(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Rg(e){return{data:e,error:null}}function Tg(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=e,o=Yn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Ja(e){return e}function Og(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ai=["global","local","others"];class Cg{constructor({url:t="",headers:s={},fetch:r}){this.url=t,this.headers=s,this.fetch=uu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=Ai[0]){if(Ai.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ai.join(", ")}`);try{return await Y(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,s={}){try{return await Y(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:os})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:s}=t,r=Yn(t,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),await Y(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Tg,redirectTo:s?.redirectTo})}catch(s){if(V(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await Y(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:os})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Y(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Ja});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(h=>{const y=parseInt(h.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(h.split(";")[1].split("=")[1]);c[`${g}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(V(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Ls(t);try{return await Y(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:os})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Ls(t);try{return await Y(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:os})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,s=!1){Ls(t);try{return await Y(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:os})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ls(t.userId);try{const{data:s,error:r}=await Y(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(V(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Ls(t.userId),Ls(t.id);try{return{data:await Y(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Y(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Ja});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(h=>{const y=parseInt(h.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(h.split(";")[1].split("=")[1]);c[`${g}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(V(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await Y(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(V(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await Y(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(V(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await Y(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Y(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await Y(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(V(s))return{data:null,error:s};throw s}}}function Ya(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const Us={debug:!!(globalThis&&cu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class du extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Pg extends du{}async function Ig(e,t,s){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Pg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Us.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function jg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hu(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Ng(e){return parseInt(e,16)}function $g(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Dg(e){var t;const{chainId:s,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=e;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=hu(e.address),h=u?`${u}://${r}`:r,y=e.statement?`${e.statement}
`:"",g=`${h} wants you to sign in with your Ethereum account:
${p}

${y}`;let _=`URI: ${d}
Version: ${f}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(_+=`
Expiration Time: ${n.toISOString()}`),a&&(_+=`
Not Before: ${a.toISOString()}`),l&&(_+=`
Request ID: ${l}`),c){let E=`
Resources:`;for(const S of c){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);E+=`
- ${S}`}_+=E}return`${g}
${_}`}class Oe extends Error{constructor({message:t,code:s,cause:r,name:n}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=n??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class Cn extends Oe{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function Lg({error:e,options:t}){var s,r,n;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Oe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Oe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Oe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Oe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Oe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Oe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Oe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Oe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(fu(o)){if(i.rp.id!==o)return new Oe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Oe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Oe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ug({error:e,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Oe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Oe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(fu(r)){if(s.rpId!==r)return new Oe({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Oe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Bg{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Mg=new Bg;function Fg(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:s,excludeCredentials:r}=e,n=Yn(e,["challenge","user","excludeCredentials"]),i=Js(t).buffer,o=Object.assign(Object.assign({},s),{id:Js(s.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Js(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function qg(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:s}=e,r=Yn(e,["challenge","allowCredentials"]),n=Js(t).buffer,i=Object.assign(Object.assign({},r),{challenge:n});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const a=s[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Js(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Vg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const s=e;return{id:e.id,rawId:e.id,response:{attestationObject:xs(new Uint8Array(e.response.attestationObject)),clientDataJSON:xs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Hg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const s=e,r=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:xs(new Uint8Array(n.authenticatorData)),clientDataJSON:xs(new Uint8Array(n.clientDataJSON)),signature:xs(new Uint8Array(n.signature)),userHandle:n.userHandle?xs(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fu(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Xa(){var e,t;return!!(Le()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Kg(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cn("Browser returned unexpected credential type",t)}:{data:null,error:new Cn("Empty credential response",t)}}catch(t){return{data:null,error:Lg({error:t,options:e})}}}async function Wg(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cn("Browser returned unexpected credential type",t)}:{data:null,error:new Cn("Empty credential response",t)}}catch(t){return{data:null,error:Ug({error:t,options:e})}}}const Gg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},zg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Pn(...e){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),s=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of e)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(s(o))r[i]=o;else if(t(o)){const a=r[i];t(a)?r[i]=Pn(a,o):r[i]=Pn(o)}else r[i]=o}return r}function Jg(e,t){return Pn(Gg,e,t||{})}function Yg(e,t){return Pn(zg,e,t||{})}class Xg{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:r,signal:n},i){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!a)return{data:null,error:l};const c=n??Mg.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){const d=r;if(d)u.name=`${u.id}:${d}`;else{const p=(await this.client.getUser()).data.user,h=((o=p?.user_metadata)===null||o===void 0?void 0:o.name)||p?.email||p?.id||"User";u.name=`${u.id}:${h}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=Jg(a.webauthn.credential_options.publicKey,i?.create),{data:d,error:f}=await Kg({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=Yg(a.webauthn.credential_options.publicKey,i?.request),{data:d,error:f}=await Wg(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(a){return V(a)?{data:null,error:a}:{data:null,error:new Ss("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new $r("rpId is required for WebAuthn authentication")};try{if(!Xa())return{data:null,error:new Ss("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:r},signal:n},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:s,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return V(o)?{data:null,error:o}:{data:null,error:new Ss("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new $r("rpId is required for WebAuthn registration")};try{if(!Xa())return{data:null,error:new Ss("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:n},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:s,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return V(o)?{data:null,error:o}:{data:null,error:new Ss("Unexpected error in register",o)}}}}jg();const Qg={url:zp,storageKey:Jp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Qa(e,t,s){return await s()}const Bs={};class Dr{get jwks(){var t,s;return(s=(t=Bs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Bs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{cachedAt:t})}constructor(t){var s,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Qg),t);if(this.storageKey=i.storageKey,this.instanceID=(s=Dr.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Dr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Le()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Cg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=uu(i.fetch),this.lock=i.lock||Qa,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Le()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Ig:this.lock=Qa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Xg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:cu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ya(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ya(this.memoryStorage)),Le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ou}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},r="none";if(Le()&&(s=ug(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),Le()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),tg(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return V(s)?this._returnResult({error:s}):this._returnResult({error:new Ss("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,r,n;try{const i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=t?.options)===null||n===void 0?void 0:n.captchaToken}},xform:pt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(V(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var s,r,n;try{let i;if("email"in t){const{email:u,password:d,options:f}=t;let p=null,h=null;this.flowType==="pkce"&&([p,h]=await Ds(this.storage,this.storageKey)),i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:d,data:(s=f?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:h},xform:pt})}else if("phone"in t){const{phone:u,password:d,options:f}=t;i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f?.data)!==null&&r!==void 0?r:{},channel:(n=f?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:pt})}else throw new on("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await De(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await De(this.storage,`${this.storageKey}-code-verifier`),V(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:o,options:a}=t;s=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:za})}else if("phone"in t){const{phone:i,password:o,options:a}=t;s=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:za})}else throw new on("You must provide either an email or phone number and a password");const{data:r,error:n}=s;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const i=new $s;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,r,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,r,n,i,o,a,l,c,u,d,f;let p,h;if("message"in t)p=t.message,h=t.signature;else{const{chain:y,wallet:g,statement:_,options:E}=t;let S;if(Le())if(typeof g=="object")S=g;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")S=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=g}const k=new URL((s=E?.url)!==null&&s!==void 0?s:window.location.href),N=await S.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=hu(N[0]);let U=(r=E?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const P=await S.request({method:"eth_chainId"});U=Ng(P)}const H={domain:k.host,address:M,statement:_,uri:k.href,version:"1",chainId:U,nonce:(n=E?.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=E?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=E?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=E?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=E?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=E?.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=Dg(H),h=await S.request({method:"personal_sign",params:[$g(p),M]})}try{const{data:y,error:g}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:h},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:pt});if(g)throw g;if(!y||!y.session||!y.user){const _=new $s;return this._returnResult({data:{user:null,session:null},error:_})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:g})}catch(y){if(V(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var s,r,n,i,o,a,l,c,u,d,f,p;let h,y;if("message"in t)h=t.message,y=t.signature;else{const{chain:g,wallet:_,statement:E,options:S}=t;let k;if(Le())if(typeof _=="object")k=_;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))k=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=_}const N=new URL((s=S?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in k&&k.signIn){const M=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),E?{statement:E}:null));let U;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")U=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)U=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)h=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),y=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${N.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(n=(r=S?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=S?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((c=S?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((d=(u=S?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...S.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const M=await k.signMessage(new TextEncoder().encode(h),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=M}}try{const{data:g,error:_}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:xs(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:pt});if(_)throw _;if(!g||!g.session||!g.user){const E=new $s;return this._returnResult({data:{user:null,session:null},error:E})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:_})}catch(g){if(V(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(t){const s=await ms(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{if(!r&&this.flowType==="pkce")throw new sg;const{data:i,error:o}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:pt});if(await De(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new $s;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(await De(this.storage,`${this.storageKey}-code-verifier`),V(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=t,a=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:pt}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new $s;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,r,n,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ds(this.storage,this.storageKey));const{error:d}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new on("You must provide either an email or phone number.")}catch(a){if(await De(this.storage,`${this.storageKey}-code-verifier`),V(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var s,r;try{let n,i;"options"in t&&(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Y(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:pt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if(V(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(t){var s,r,n,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ds(this.storage,this.storageKey));const c=await Y(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=t?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Rg});return!((i=c.data)===null||i===void 0)&&i.url&&Le()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await De(this.storage,`${this.storageKey}-code-verifier`),V(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;if(r)throw r;if(!s)throw new Qe;const{error:n}=await Y(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(t){if(V(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:r,type:n,options:i}=t,{error:o}=await Y(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:n,options:i}=t,{data:o,error:a}=await Y(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:a})}throw new on("You must provide either an email or phone number and a type")}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Si:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await ms(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=ki()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=xg(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:os}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qe}:await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:os})})}catch(s){if(V(s))return xi(s)&&(await this._removeSession(),await De(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Qe;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Ds(this.storage,this.storageKey));const{data:c,error:u}=await Y(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:os});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await De(this.storage,`${this.storageKey}-code-verifier`),V(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Qe;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=ln(t.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(V(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var r;if(!t){const{data:o,error:a}=s;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new Qe;const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!Le())throw new an("No browser detected.");if(t.error||t.error_description||t.error_code)throw new an(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Fa("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new an("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Fa("No code detected.");const{data:E,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new an("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const h=f-d;u-h>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",h,f,u):u-h<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",h,f,u);const{data:y,error:g}=await this._getUser(i);if(g)throw g;const _={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:t.type},error:null})}catch(r){if(V(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await ms(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i&&!xi(i))return this._returnResult({error:i});const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(eg(a)&&(a.status===404||a.status===401||a.status===403)||xi(a)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await De(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=cg(),r={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Ds(this.storage,this.storageKey,!0));try{return await Y(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(await De(this.storage,`${this.storageKey}-code-verifier`),V(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Y(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Le()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:t.provider,url:r?.url},error:null})}catch(r){if(V(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var r;try{const{error:n,data:{session:i}}=s;if(n)throw n;const{options:o,provider:a,token:l,access_token:c,nonce:u}=t,d=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:pt}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new $s}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(n){if(await De(this.storage,`${this.storageKey}-code-verifier`),V(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await Y(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await fg(async n=>(n>0&&await hg(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await Y(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:pt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Ei(i)&&Date.now()+o-r<qs})}catch(r){if(this._debug(s,"error",r),V(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",r),Le()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await ms(this.storage,this.storageKey);if(n&&this.userStorage){let o=await ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await Vs(this.userStorage,this.storageKey+"-user",o)),n.user=(t=o?.user)!==null&&t!==void 0?t:ki()}else if(n&&!n.user&&!n.user){const o=await ms(this.storage,this.storageKey+"-user");o&&o?.user?(n.user=o.user,await De(this.storage,this.storageKey+"-user"),await Vs(this.storage,this.storageKey,n)):n.user=ki()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Si;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Si}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Ei(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&o?.user?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var s,r;if(!t)throw new Qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Zn;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Qe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),V(i)){const o={data:null,error:i};return Ei(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,s,r=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await De(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Vs(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=Wa(n);await Vs(this.storage,this.storageKey,i)}else{const n=Wa(s);await Vs(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await De(this.storage,this.storageKey),await De(this.storage,this.storageKey+"-code-verifier"),await De(this.storage,this.storageKey+"-user"),this.userStorage&&await De(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Le()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-t)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${qs}ms, refresh threshold is ${Zi} ticks`),n<=Zi&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof du)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Le()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ds(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r?.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r?.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?this._returnResult({data:null,error:i}):await Y(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await Y(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((n=l?.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Vg(t.webauthn.credential_response):Hg(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await Y(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=await Y(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Fg(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:qg(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=s?.factors)!==null&&t!==void 0?t:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(t){var s,r,n,i;if(t)try{const{payload:p}=ln(t);let h=null;p.aal&&(h=p.aal);let y=h;const{data:{user:g},error:_}=await this.getUser(t);if(_)return this._returnResult({data:null,error:_});((r=(s=g?.factors)===null||s===void 0?void 0:s.filter(k=>k.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(y="aal2");const S=p.amr||[];return{data:{currentLevel:h,nextLevel:y,currentAuthenticationMethods:S},error:null}}catch(p){if(V(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ln(o.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(u="aal2");const f=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?await Y(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Qe})})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Qe});const o=await Y(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Le()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Qe});const o=await Y(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Le()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;return r?this._returnResult({data:null,error:r}):s?await Y(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new Qe})})}catch(t){if(V(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?(await Y(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Qe})})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let r=s.keys.find(a=>a.kid===t);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+Qp>n)return r;const{data:i,error:o}=await Y(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,s={}){try{let r=t;if(!r){const{data:p,error:h}=await this.getSession();if(h||!p.session)return this._returnResult({data:null,error:h});r=p.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=ln(r);s?.allowExpired||_g(i.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:n,signature:o},error:null}}const u=wg(n.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,ag(`${a}.${l}`)))throw new so("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}}}Dr.nextInstanceID={};const Zg=Dr,em="2.93.3";let dr="";typeof Deno<"u"?dr="deno":typeof document<"u"?dr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dr="react-native":dr="node";const tm={"X-Client-Info":`supabase-js-${dr}/${em}`},sm={headers:tm},rm={schema:"public"},nm={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},im={};function Lr(e){"@babel/helpers - typeof";return Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lr(e)}function om(e,t){if(Lr(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var r=s.call(e,t);if(Lr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function am(e){var t=om(e,"string");return Lr(t)=="symbol"?t:t+""}function lm(e,t,s){return(t=am(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Za(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,r)}return s}function xe(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Za(Object(s),!0).forEach(function(r){lm(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Za(Object(s)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))})}return e}const cm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),um=()=>Headers,dm=(e,t,s)=>{const r=cm(s),n=um();return async(i,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let c=new n(o?.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,xe(xe({},o),{},{headers:c}))}};function hm(e){return e.endsWith("/")?e:e+"/"}function fm(e,t){var s,r;const{db:n,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,f={db:xe(xe({},l),n),auth:xe(xe({},c),i),realtime:xe(xe({},u),o),storage:{},global:xe(xe(xe({},d),a),{},{headers:xe(xe({},(s=d?.headers)!==null&&s!==void 0?s:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function pm(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hm(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var gm=class extends Zg{constructor(e){super(e)}},mm=class{constructor(e,t,s){var r,n;this.supabaseUrl=e,this.supabaseKey=t;const i=pm(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:rm,realtime:im,auth:xe(xe({},nm),{},{storageKey:o}),global:sm},l=fm(s??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(n=l.global.headers)!==null&&n!==void 0?n:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=dm(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(xe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new ep(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Gp(this.storageUrl.href,this.headers,this.fetch,s?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Jf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,s;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:n,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gm({url:this.authUrl.href,headers:xe(xe({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:n,flowType:o,lock:a,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new yp(this.realtimeUrl.href,xe(xe({},e),{},{params:xe(xe({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const pu=(e,t,s)=>new mm(e,t,s);function ym(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}ym()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gu="https://wfosdlvxdlhpcyzevjjc.supabase.co",bm="sb_publishable_oMqXUrfmb1J-QgBe9m8Vkw_tzmlzxc4",je=pu(gu,bm),vm=pu(gu,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indmb3NkbHZ4ZGxocGN5emV2ampjIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDU3MzY2NSwiZXhwIjoyMDg2MTQ5NjY1fQ.5_nVki3vfaGvtk8kHixX6FR3c47AOceLhbxW0I0Kwnk",{auth:{autoRefreshToken:!1,persistSession:!1}}),_m=Object.freeze(Object.defineProperty({__proto__:null,supabase:je,supabaseAdmin:vm},Symbol.toStringTag,{value:"Module"})),Kr=Kf("auth",{state:()=>({user:null,session:null,loading:!0}),actions:{async initialize(){this.loading=!0;try{const{data:{session:e}}=await je.auth.getSession();if(this.session=e,e?.user){let{data:t,error:s}=await je.from("profiles").select("role, project_id").eq("id",e.user.id).single();if(s&&s.code==="PGRST116"){await new Promise(i=>setTimeout(i,1500));let{data:n}=await je.from("profiles").select("role, project_id, description").eq("id",e.user.id).single();if(n)t=n;else{console.log("Profile not found after wait, creating default profile for user:",e.user.email);const{data:i,error:o}=await je.from("profiles").insert([{id:e.user.id,full_name:e.user.email.split("@")[0],email:e.user.email,role:"Viewer"}]).select().single();o?console.error("Failed to create default profile:",o):(t=i,console.log("Default profile created successfully."))}}let r=t?.role||"Viewer";if(["admin@digitek.com","ganjarpranowo@pdi.com"].includes(e.user.email)&&(r="Super Admin",t?.role!=="Super Admin")){console.log("Syncing Super Admin role to DB for:",e.user.email);const{error:n}=await je.from("profiles").update({role:"Super Admin"}).eq("id",e.user.id);n?console.error("Failed to sync Super Admin role to DB:",n):console.log("Successfully synced Super Admin role to DB.")}this.user={...e.user,role:r,project_id:t?.project_id||1,description:t?.description}}else this.user=null;je.auth.onAuthStateChange(async(t,s)=>{if(this.session=s,s?.user){const{data:r}=await je.from("profiles").select("role, project_id, description").eq("id",s.user.id).single();let n=r?.role||"Viewer";["admin@digitek.com","ganjarpranowo@pdi.com"].includes(s.user.email)&&(n="Super Admin"),this.user={...s.user,role:n,project_id:r?.project_id||1,description:r?.description}}else this.user=null})}catch(e){console.error("Auth initialization error:",e)}finally{this.loading=!1}},async signIn(e,t){console.log("Attempting Supabase sign in for:",e);const{data:s,error:r}=await je.auth.signInWithPassword({email:e,password:t});if(r)throw console.error("Supabase sign in error:",r),r;if(console.log("Supabase sign in successful. Data:",s),s.user){console.log("Fetching profile for user ID:",s.user.id);const{data:n,error:i}=await je.from("profiles").select("role").eq("id",s.user.id).single();i&&console.error("Error fetching profile:",i),console.log("Fetched profile:",n);let o=n?.role||"Viewer";console.log("Initial role:",o),["admin@digitek.com","ganjarpranowo@pdi.com"].includes(s.user.email)&&(o="Super Admin",console.log("User is Super Admin. Role set to:",o),n?.role!=="Super Admin"&&(console.log("Syncing Super Admin role to DB..."),await je.from("profiles").update({role:"Super Admin"}).eq("id",s.user.id))),this.user={...s.user,role:o},console.log("Final user object set in store:",this.user)}return s},async signUp(e,t,s={}){const{data:r,error:n}=await je.auth.signUp({email:e,password:t,options:{data:s}});if(n)throw n;if(r.user){const{error:i}=await je.from("profiles").insert({id:r.user.id,email:e,full_name:s.full_name||e.split("@")[0],role:"Viewer"}).select().single();i&&console.warn("Profile creation failed (might already exist):",i)}return r},async signOut(){const{error:e}=await je.auth.signOut();if(e)throw e;this.user=null,this.session=null}}}),wm={key:1,class:"h-screen w-screen flex items-center justify-center bg-background-light dark:bg-background-dark"},Sm={__name:"App",setup(e){const t=Kr();return qr(async()=>{console.log("App Mounted, checking environment variables..."),console.log("API URL:","https://wfosdlvxdlhpcyzevjjc.supabase.co"),console.log("Anon Key Present:",!0);try{await t.initialize(),console.log("Auth initialized. User:",t.user?.email||"Not logged in")}catch(s){console.error("Auth Init Error:",s)}(localStorage.getItem("darkMode")==="true"||!localStorage.getItem("darkMode")&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.classList.add("dark")}),(s,r)=>{const n=Kn("router-view");return ct(t).loading?(ne(),le("div",wm,[...r[0]||(r[0]=[v("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"},null,-1)])])):(ne(),kn(n,{key:0}))}}},xm="modulepreload",Em=function(e){return"/Monitoring-Digital-Teknologi-Perkasa/"+e},el={},es=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");n=l(s.map(c=>{if(c=Em(c),c in el)return;el[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":xm,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};const Hs=typeof document<"u";function mu(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function km(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&mu(e.default)}const he=Object.assign;function Ri(e,t){const s={};for(const r in t){const n=t[r];s[r]=wt(n)?n.map(e):e(n)}return s}const Er=()=>{},wt=Array.isArray;function tl(e,t){const s={};for(const r in e)s[r]=r in t?t[r]:e[r];return s}const yu=/#/g,Am=/&/g,Rm=/\//g,Tm=/=/g,Om=/\?/g,bu=/\+/g,Cm=/%5B/g,Pm=/%5D/g,vu=/%5E/g,Im=/%60/g,_u=/%7B/g,jm=/%7C/g,wu=/%7D/g,Nm=/%20/g;function Io(e){return e==null?"":encodeURI(""+e).replace(jm,"|").replace(Cm,"[").replace(Pm,"]")}function $m(e){return Io(e).replace(_u,"{").replace(wu,"}").replace(vu,"^")}function ro(e){return Io(e).replace(bu,"%2B").replace(Nm,"+").replace(yu,"%23").replace(Am,"%26").replace(Im,"`").replace(_u,"{").replace(wu,"}").replace(vu,"^")}function Dm(e){return ro(e).replace(Tm,"%3D")}function Lm(e){return Io(e).replace(yu,"%23").replace(Om,"%3F")}function Um(e){return Lm(e).replace(Rm,"%2F")}function Ur(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Bm=/\/$/,Mm=e=>e.replace(Bm,"");function Ti(e,t,s="/"){let r,n={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=t.slice(0,l),i=t.slice(l,a>0?a:t.length),n=e(i.slice(1))),a>=0&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=Hm(r??t,s),{fullPath:r+i+o,path:r,query:n,hash:Ur(o)}}function Fm(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function sl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function qm(e,t,s){const r=t.matched.length-1,n=s.matched.length-1;return r>-1&&r===n&&Qs(t.matched[r],s.matched[n])&&Su(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Qs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Su(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Vm(e[s],t[s]))return!1;return!0}function Vm(e,t){return wt(e)?rl(e,t):wt(t)?rl(t,e):e?.valueOf()===t?.valueOf()}function rl(e,t){return wt(t)?e.length===t.length&&e.every((s,r)=>s===t[r]):e.length===1&&e[0]===t}function Hm(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),r=e.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=s.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Qt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let no=(function(e){return e.pop="pop",e.push="push",e})({}),Oi=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Km(e){if(!e)if(Hs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Mm(e)}const Wm=/^[^#]+#/;function Gm(e,t){return e.replace(Wm,"#")+t}function zm(e,t){const s=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-s.left-(t.left||0),top:r.top-s.top-(t.top||0)}}const ei=()=>({left:window.scrollX,top:window.scrollY});function Jm(e){let t;if("el"in e){const s=e.el,r=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?r?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;t=zm(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function nl(e,t){return(history.state?history.state.position-t:-1)+e}const io=new Map;function Ym(e,t){io.set(e,t)}function Xm(e){const t=io.get(e);return io.delete(e),t}function Qm(e){return typeof e=="string"||e&&typeof e=="object"}function xu(e){return typeof e=="string"||typeof e=="symbol"}let Se=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Eu=Symbol("");Se.MATCHER_NOT_FOUND+"",Se.NAVIGATION_GUARD_REDIRECT+"",Se.NAVIGATION_ABORTED+"",Se.NAVIGATION_CANCELLED+"",Se.NAVIGATION_DUPLICATED+"";function Zs(e,t){return he(new Error,{type:e,[Eu]:!0},t)}function Ut(e,t){return e instanceof Error&&Eu in e&&(t==null||!!(e.type&t))}const Zm=["params","query","hash"];function ey(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of Zm)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function ty(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<s.length;++r){const n=s[r].replace(bu," "),i=n.indexOf("="),o=Ur(i<0?n:n.slice(0,i)),a=i<0?null:Ur(n.slice(i+1));if(o in t){let l=t[o];wt(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function il(e){let t="";for(let s in e){const r=e[s];if(s=Dm(s),r==null){r!==void 0&&(t+=(t.length?"&":"")+s);continue}(wt(r)?r.map(n=>n&&ro(n)):[r&&ro(r)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+s,n!=null&&(t+="="+n))})}return t}function sy(e){const t={};for(const s in e){const r=e[s];r!==void 0&&(t[s]=wt(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const ry=Symbol(""),ol=Symbol(""),ti=Symbol(""),jo=Symbol(""),oo=Symbol("");function lr(){let e=[];function t(r){return e.push(r),()=>{const n=e.indexOf(r);n>-1&&e.splice(n,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function is(e,t,s,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Zs(Se.NAVIGATION_ABORTED,{from:s,to:t})):f instanceof Error?l(f):Qm(f)?l(Zs(Se.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(o&&r.enterCallbacks[n]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>e.call(r&&r.instances[n],t,s,c));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function Ci(e,t,s,r,n=i=>i()){const i=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(mu(l)){const c=(l.__vccOpts||l)[t];c&&i.push(is(c,s,r,o,a,n))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=km(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[t];return f&&is(f,s,r,o,a,n)()}))}}return i}function ny(e,t){const s=[],r=[],n=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(c=>Qs(c,a))?r.push(a):s.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Qs(c,l))||n.push(l))}return[s,r,n]}let iy=()=>location.protocol+"//"+location.host;function ku(e,t){const{pathname:s,search:r,hash:n}=t,i=e.indexOf("#");if(i>-1){let o=n.includes(e.slice(i))?e.slice(i).length:1,a=n.slice(o);return a[0]!=="/"&&(a="/"+a),sl(a,"")}return sl(s,e)+r+n}function oy(e,t,s,r){let n=[],i=[],o=null;const a=({state:f})=>{const p=ku(e,location),h=s.value,y=t.value;let g=0;if(f){if(s.value=p,t.value=f,o&&o===h){o=null;return}g=y?f.position-y.position:0}else r(p);n.forEach(_=>{_(s.value,h,{delta:g,type:no.pop,direction:g?g>0?Oi.forward:Oi.back:Oi.unknown})})};function l(){o=s.value}function c(f){n.push(f);const p=()=>{const h=n.indexOf(f);h>-1&&n.splice(h,1)};return i.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(he({},f.state,{scroll:ei()}),"")}}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:d}}function al(e,t,s,r=!1,n=!1){return{back:e,current:t,forward:s,replaced:r,position:window.history.length,scroll:n?ei():null}}function ay(e){const{history:t,location:s}=window,r={value:ku(e,s)},n={value:t.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=e.indexOf("#"),f=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+l:iy()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),n.value=c}catch(p){console.error(p),s[u?"replace":"assign"](f)}}function o(l,c){i(l,he({},t.state,al(n.value.back,l,n.value.forward,!0),c,{position:n.value.position}),!0),r.value=l}function a(l,c){const u=he({},n.value,t.state,{forward:l,scroll:ei()});i(u.current,u,!0),i(l,he({},al(r.value,l,null),{position:u.position+1},c),!1),r.value=l}return{location:r,state:n,push:a,replace:o}}function ly(e){e=Km(e);const t=ay(e),s=oy(e,t.state,t.location,t.replace);function r(i,o=!0){o||s.pauseListeners(),history.go(i)}const n=he({location:"",base:e,go:r,createHref:Gm.bind(null,e)},t,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}let Es=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Pe=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Pe||{});const cy={type:Es.Static,value:""},uy=/[a-zA-Z0-9_]/;function dy(e){if(!e)return[[]];if(e==="/")return[[cy]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${s})/"${c}": ${p}`)}let s=Pe.Static,r=s;const n=[];let i;function o(){i&&n.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(s===Pe.Static?i.push({type:Es.Static,value:c}):s===Pe.Param||s===Pe.ParamRegExp||s===Pe.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Es.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&s!==Pe.ParamRegExp){r=s,s=Pe.EscapeNext;continue}switch(s){case Pe.Static:l==="/"?(c&&d(),o()):l===":"?(d(),s=Pe.Param):f();break;case Pe.EscapeNext:f(),s=r;break;case Pe.Param:l==="("?s=Pe.ParamRegExp:uy.test(l)?f():(d(),s=Pe.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Pe.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=Pe.ParamRegExpEnd:u+=l;break;case Pe.ParamRegExpEnd:d(),s=Pe.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return s===Pe.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),n}const ll="[^/]+?",hy={sensitive:!1,strict:!1,start:!0,end:!0};var He=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(He||{});const fy=/[.+*?^${}()[\]/\\]/g;function py(e,t){const s=he({},hy,t),r=[];let n=s.start?"^":"";const i=[];for(const c of e){const u=c.length?[]:[He.Root];s.strict&&!c.length&&(n+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=He.Segment+(s.sensitive?He.BonusCaseSensitive:0);if(f.type===Es.Static)d||(n+="/"),n+=f.value.replace(fy,"\\$&"),p+=He.Static;else if(f.type===Es.Param){const{value:h,repeatable:y,optional:g,regexp:_}=f;i.push({name:h,repeatable:y,optional:g});const E=_||ll;if(E!==ll){p+=He.BonusCustomRegExp;try{`${E}`}catch(k){throw new Error(`Invalid custom RegExp for param "${h}" (${E}): `+k.message)}}let S=y?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(S=g&&c.length<2?`(?:/${S})`:"/"+S),g&&(S+="?"),n+=S,p+=He.Dynamic,g&&(p+=He.BonusOptional),y&&(p+=He.BonusRepeatable),E===".*"&&(p+=He.BonusWildcard)}u.push(p)}r.push(u)}if(s.strict&&s.end){const c=r.length-1;r[c][r[c].length-1]+=He.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",h=i[f-1];d[h.name]=p&&h.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===Es.Static)u+=p.value;else if(p.type===Es.Param){const{value:h,repeatable:y,optional:g}=p,_=h in c?c[h]:"";if(wt(_)&&!y)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const E=wt(_)?_.join("/"):_;if(!E)if(g)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${h}"`);u+=E}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function gy(e,t){let s=0;for(;s<e.length&&s<t.length;){const r=t[s]-e[s];if(r)return r;s++}return e.length<t.length?e.length===1&&e[0]===He.Static+He.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===He.Static+He.Segment?1:-1:0}function Au(e,t){let s=0;const r=e.score,n=t.score;for(;s<r.length&&s<n.length;){const i=gy(r[s],n[s]);if(i)return i;s++}if(Math.abs(n.length-r.length)===1){if(cl(r))return 1;if(cl(n))return-1}return n.length-r.length}function cl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const my={strict:!1,end:!0,sensitive:!1};function yy(e,t,s){const r=py(dy(e.path),s),n=he(r,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function by(e,t){const s=[],r=new Map;t=tl(my,t);function n(d){return r.get(d)}function i(d,f,p){const h=!p,y=dl(d);y.aliasOf=p&&p.record;const g=tl(t,d),_=[y];if("alias"in d){const k=typeof d.alias=="string"?[d.alias]:d.alias;for(const N of k)_.push(dl(he({},y,{components:p?p.record.components:y.components,path:N,aliasOf:p?p.record:y})))}let E,S;for(const k of _){const{path:N}=k;if(f&&N[0]!=="/"){const M=f.record.path,U=M[M.length-1]==="/"?"":"/";k.path=f.record.path+(N&&U+N)}if(E=yy(k,f,g),p?p.alias.push(E):(S=S||E,S!==E&&S.alias.push(E),h&&d.name&&!hl(E)&&o(d.name)),Ru(E)&&l(E),y.children){const M=y.children;for(let U=0;U<M.length;U++)i(M[U],E,p&&p.children[U])}p=p||E}return S?()=>{o(S)}:Er}function o(d){if(xu(d)){const f=r.get(d);f&&(r.delete(d),s.splice(s.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=s.indexOf(d);f>-1&&(s.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return s}function l(d){const f=wy(d,s);s.splice(f,0,d),d.record.name&&!hl(d)&&r.set(d.record.name,d)}function c(d,f){let p,h={},y,g;if("name"in d&&d.name){if(p=r.get(d.name),!p)throw Zs(Se.MATCHER_NOT_FOUND,{location:d});g=p.record.name,h=he(ul(f.params,p.keys.filter(S=>!S.optional).concat(p.parent?p.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),d.params&&ul(d.params,p.keys.map(S=>S.name))),y=p.stringify(h)}else if(d.path!=null)y=d.path,p=s.find(S=>S.re.test(y)),p&&(h=p.parse(y),g=p.record.name);else{if(p=f.name?r.get(f.name):s.find(S=>S.re.test(f.path)),!p)throw Zs(Se.MATCHER_NOT_FOUND,{location:d,currentLocation:f});g=p.record.name,h=he({},f.params,d.params),y=p.stringify(h)}const _=[];let E=p;for(;E;)_.unshift(E.record),E=E.parent;return{name:g,path:y,params:h,matched:_,meta:_y(_)}}e.forEach(d=>i(d));function u(){s.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function ul(e,t){const s={};for(const r of t)r in e&&(s[r]=e[r]);return s}function dl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:vy(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function vy(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const r in e.components)t[r]=typeof s=="object"?s[r]:s;return t}function hl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function _y(e){return e.reduce((t,s)=>he(t,s.meta),{})}function wy(e,t){let s=0,r=t.length;for(;s!==r;){const i=s+r>>1;Au(e,t[i])<0?r=i:s=i+1}const n=Sy(e);return n&&(r=t.lastIndexOf(n,r-1)),r}function Sy(e){let t=e;for(;t=t.parent;)if(Ru(t)&&Au(e,t)===0)return t}function Ru({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function fl(e){const t=ut(ti),s=ut(jo),r=et(()=>{const l=ct(e.to);return t.resolve(l)}),n=et(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=s.matched;if(!u||!d.length)return-1;const f=d.findIndex(Qs.bind(null,u));if(f>-1)return f;const p=pl(l[c-2]);return c>1&&pl(u)===p&&d[d.length-1].path!==p?d.findIndex(Qs.bind(null,l[c-2])):f}),i=et(()=>n.value>-1&&Ry(s.params,r.value.params)),o=et(()=>n.value>-1&&n.value===s.matched.length-1&&Su(s.params,r.value.params));function a(l={}){if(Ay(l)){const c=t[ct(e.replace)?"replace":"push"](ct(e.to)).catch(Er);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:et(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function xy(e){return e.length===1?e[0]:e}const Ey=wc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fl,setup(e,{slots:t}){const s=Mr(fl(e)),{options:r}=ut(ti),n=et(()=>({[gl(e.activeClass,r.linkActiveClass,"router-link-active")]:s.isActive,[gl(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=t.default&&xy(t.default(s));return e.custom?i:Oo("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},i)}}}),ky=Ey;function Ay(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ry(e,t){for(const s in t){const r=t[s],n=e[s];if(typeof r=="string"){if(r!==n)return!1}else if(!wt(n)||n.length!==r.length||r.some((i,o)=>i.valueOf()!==n[o].valueOf()))return!1}return!0}function pl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const gl=(e,t,s)=>e??t??s,Ty=wc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const r=ut(oo),n=et(()=>e.route||r.value),i=ut(ol,0),o=et(()=>{let c=ct(i);const{matched:u}=n.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=et(()=>n.value.matched[o.value]);dn(ol,et(()=>o.value+1)),dn(ry,a),dn(oo,n);const l=Ee();return mr(()=>[l.value,a.value,e.name],([c,u,d],[f,p,h])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Qs(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=n.value,u=e.name,d=a.value,f=d&&d.components[u];if(!f)return ml(s.default,{Component:f,route:c});const p=d.props[u],h=p?p===!0?c.params:typeof p=="function"?p(c):p:null,g=Oo(f,he({},h,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return ml(s.default,{Component:g,route:c})||g}}});function ml(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Oy=Ty;function Cy(e){const t=by(e.routes,e),s=e.parseQuery||ty,r=e.stringifyQuery||il,n=e.history,i=lr(),o=lr(),a=lr(),l=jd(Qt);let c=Qt;Hs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ri.bind(null,T=>""+T),d=Ri.bind(null,Um),f=Ri.bind(null,Ur);function p(T,F){let L,W;return xu(T)?(L=t.getRecordMatcher(T),W=F):W=T,t.addRoute(W,L)}function h(T){const F=t.getRecordMatcher(T);F&&t.removeRoute(F)}function y(){return t.getRoutes().map(T=>T.record)}function g(T){return!!t.getRecordMatcher(T)}function _(T,F){if(F=he({},F||l.value),typeof T=="string"){const w=Ti(s,T,F.path),A=t.resolve({path:w.path},F),O=n.createHref(w.fullPath);return he(w,A,{params:f(A.params),hash:Ur(w.hash),redirectedFrom:void 0,href:O})}let L;if(T.path!=null)L=he({},T,{path:Ti(s,T.path,F.path).path});else{const w=he({},T.params);for(const A in w)w[A]==null&&delete w[A];L=he({},T,{params:d(w)}),F.params=d(F.params)}const W=t.resolve(L,F),ce=T.hash||"";W.params=u(f(W.params));const m=Fm(r,he({},T,{hash:$m(ce),path:W.path})),b=n.createHref(m);return he({fullPath:m,hash:ce,query:r===il?sy(T.query):T.query||{}},W,{redirectedFrom:void 0,href:b})}function E(T){return typeof T=="string"?Ti(s,T,l.value.path):he({},T)}function S(T,F){if(c!==T)return Zs(Se.NAVIGATION_CANCELLED,{from:F,to:T})}function k(T){return U(T)}function N(T){return k(he(E(T),{replace:!0}))}function M(T,F){const L=T.matched[T.matched.length-1];if(L&&L.redirect){const{redirect:W}=L;let ce=typeof W=="function"?W(T,F):W;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=E(ce):{path:ce},ce.params={}),he({query:T.query,hash:T.hash,params:ce.path!=null?{}:T.params},ce)}}function U(T,F){const L=c=_(T),W=l.value,ce=T.state,m=T.force,b=T.replace===!0,w=M(L,W);if(w)return U(he(E(w),{state:typeof w=="object"?he({},ce,w.state):ce,force:m,replace:b}),F||L);const A=L;A.redirectedFrom=F;let O;return!m&&qm(r,W,L)&&(O=Zs(Se.NAVIGATION_DUPLICATED,{to:A,from:W}),Ce(W,W,!0,!1)),(O?Promise.resolve(O):z(A,W)).catch(R=>Ut(R)?Ut(R,Se.NAVIGATION_GUARD_REDIRECT)?R:xt(R):ae(R,A,W)).then(R=>{if(R){if(Ut(R,Se.NAVIGATION_GUARD_REDIRECT))return U(he({replace:b},E(R.to),{state:typeof R.to=="object"?he({},ce,R.to.state):ce,force:m}),F||A)}else R=I(A,W,!0,b,ce);return q(A,W,R),R})}function H(T,F){const L=S(T,F);return L?Promise.reject(L):Promise.resolve()}function P(T){const F=ft.values().next().value;return F&&typeof F.runWithContext=="function"?F.runWithContext(T):T()}function z(T,F){let L;const[W,ce,m]=ny(T,F);L=Ci(W.reverse(),"beforeRouteLeave",T,F);for(const w of W)w.leaveGuards.forEach(A=>{L.push(is(A,T,F))});const b=H.bind(null,T,F);return L.push(b),ot(L).then(()=>{L=[];for(const w of i.list())L.push(is(w,T,F));return L.push(b),ot(L)}).then(()=>{L=Ci(ce,"beforeRouteUpdate",T,F);for(const w of ce)w.updateGuards.forEach(A=>{L.push(is(A,T,F))});return L.push(b),ot(L)}).then(()=>{L=[];for(const w of m)if(w.beforeEnter)if(wt(w.beforeEnter))for(const A of w.beforeEnter)L.push(is(A,T,F));else L.push(is(w.beforeEnter,T,F));return L.push(b),ot(L)}).then(()=>(T.matched.forEach(w=>w.enterCallbacks={}),L=Ci(m,"beforeRouteEnter",T,F,P),L.push(b),ot(L))).then(()=>{L=[];for(const w of o.list())L.push(is(w,T,F));return L.push(b),ot(L)}).catch(w=>Ut(w,Se.NAVIGATION_CANCELLED)?w:Promise.reject(w))}function q(T,F,L){a.list().forEach(W=>P(()=>W(T,F,L)))}function I(T,F,L,W,ce){const m=S(T,F);if(m)return m;const b=F===Qt,w=Hs?history.state:{};L&&(W||b?n.replace(T.fullPath,he({scroll:b&&w&&w.scroll},ce)):n.push(T.fullPath,ce)),l.value=T,Ce(T,F,L,b),xt()}let ee;function ie(){ee||(ee=n.listen((T,F,L)=>{if(!kt.listening)return;const W=_(T),ce=M(W,kt.currentRoute.value);if(ce){U(he(ce,{replace:!0,force:!0}),W).catch(Er);return}c=W;const m=l.value;Hs&&Ym(nl(m.fullPath,L.delta),ei()),z(W,m).catch(b=>Ut(b,Se.NAVIGATION_ABORTED|Se.NAVIGATION_CANCELLED)?b:Ut(b,Se.NAVIGATION_GUARD_REDIRECT)?(U(he(E(b.to),{force:!0}),W).then(w=>{Ut(w,Se.NAVIGATION_ABORTED|Se.NAVIGATION_DUPLICATED)&&!L.delta&&L.type===no.pop&&n.go(-1,!1)}).catch(Er),Promise.reject()):(L.delta&&n.go(-L.delta,!1),ae(b,W,m))).then(b=>{b=b||I(W,m,!1),b&&(L.delta&&!Ut(b,Se.NAVIGATION_CANCELLED)?n.go(-L.delta,!1):L.type===no.pop&&Ut(b,Se.NAVIGATION_ABORTED|Se.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),q(W,m,b)}).catch(Er)}))}let we=lr(),oe=lr(),se;function ae(T,F,L){xt(T);const W=oe.list();return W.length?W.forEach(ce=>ce(T,F,L)):console.error(T),Promise.reject(T)}function it(){return se&&l.value!==Qt?Promise.resolve():new Promise((T,F)=>{we.add([T,F])})}function xt(T){return se||(se=!T,ie(),we.list().forEach(([F,L])=>T?L(T):F()),we.reset()),T}function Ce(T,F,L,W){const{scrollBehavior:ce}=e;if(!Hs||!ce)return Promise.resolve();const m=!L&&Xm(nl(T.fullPath,0))||(W||!L)&&history.state&&history.state.scroll||null;return qn().then(()=>ce(T,F,m)).then(b=>b&&Jm(b)).catch(b=>ae(b,T,F))}const Ae=T=>n.go(T);let Et;const ft=new Set,kt={currentRoute:l,listening:!0,addRoute:p,removeRoute:h,clearRoutes:t.clearRoutes,hasRoute:g,getRoutes:y,resolve:_,options:e,push:k,replace:N,go:Ae,back:()=>Ae(-1),forward:()=>Ae(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:oe.add,isReady:it,install(T){T.component("RouterLink",ky),T.component("RouterView",Oy),T.config.globalProperties.$router=kt,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>ct(l)}),Hs&&!Et&&l.value===Qt&&(Et=!0,k(n.location).catch(W=>{}));const F={};for(const W in Qt)Object.defineProperty(F,W,{get:()=>l.value[W],enumerable:!0});T.provide(ti,kt),T.provide(jo,ic(F)),T.provide(oo,l);const L=T.unmount;ft.add(T),T.unmount=function(){ft.delete(T),ft.size<1&&(c=Qt,ee&&ee(),ee=null,l.value=Qt,Et=!1,se=!1),L()}}};function ot(T){return T.reduce((F,L)=>F.then(()=>P(L)),Promise.resolve())}return kt}function Tu(){return ut(ti)}function Ou(e){return ut(jo)}const Py="/Monitoring-Digital-Teknologi-Perkasa/digitek%20putih.webp",Iy={class:"h-16 flex items-center justify-between px-6 border-b border-slate-100 dark:border-white/10 flex-shrink-0"},jy={class:"flex items-center gap-3 overflow-hidden"},Ny={key:0,class:"flex flex-col overflow-hidden"},$y={class:"text-sm font-bold leading-tight text-slate-900 dark:text-white truncate"},Dy={class:"material-symbols-outlined text-xl"},Ly={class:"flex-1 py-6 px-4 flex flex-col gap-1 overflow-y-auto custom-scrollbar"},Uy={key:0,class:"px-3 mb-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest"},By={class:"material-symbols-outlined text-xl group-hover:text-emerald-500 transition-colors"},My={key:0,class:"text-sm font-medium"},Fy={key:1,class:"px-3 mb-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest"},qy={class:"material-symbols-outlined text-xl group-hover:text-emerald-500 transition-colors"},Vy={key:0,class:"text-sm font-medium"},Hy={class:"p-4 border-t border-slate-100 dark:border-white/10 flex-shrink-0"},Ky={class:"flex items-center gap-3 px-2"},Wy={key:0},Gy={key:0,class:"flex-1 min-w-0 overflow-hidden"},zy={class:"text-xs font-bold truncate text-slate-900 dark:text-white"},Jy={key:0,class:"text-[9px] text-slate-400 dark:text-slate-500 italic truncate mb-0.5"},Yy={class:"text-[10px] text-slate-500 dark:text-emerald-400"},Xy={__name:"Sidebar",props:{isSidebarOpen:Boolean,isMobileSidebarOpen:Boolean,userProfile:Object,projectName:String,menuItems:Array,adminItems:Array},emits:["logout","toggleSidebar","toggleMobileSidebar"],setup(e,{emit:t}){const s=t,r=Ou(),n=()=>{window.innerWidth<1024&&s("toggleMobileSidebar")},i=()=>{s("logout")};return(o,a)=>{const l=Kn("router-link");return ne(),le("aside",{class:lt(["bg-white dark:bg-[#0d1f1f] flex flex-col flex-shrink-0 transition-all duration-300 z-50 border-r border-slate-200 dark:border-white/5","fixed inset-y-0 left-0 lg:relative lg:translate-x-0 shadow-[4px_0_24px_-12px_rgba(0,0,0,0.1)]",e.isMobileSidebarOpen?"translate-x-0":"-translate-x-full lg:translate-x-0",e.isSidebarOpen?"w-64":"w-20"])},[v("div",Iy,[v("div",jy,[a[3]||(a[3]=v("div",{class:"flex-shrink-0"},[v("img",{src:Py,alt:"Logo",class:"size-10 object-contain"})],-1)),e.isSidebarOpen?(ne(),le("div",Ny,[v("span",$y,X(e.projectName),1),a[2]||(a[2]=v("span",{class:"text-[10px] text-emerald-600 dark:text-emerald-400 font-medium tracking-wide"},"DIGITAL PLATFORM",-1))])):Be("",!0)]),v("button",{onClick:a[0]||(a[0]=c=>s("toggleMobileSidebar")),class:"lg:hidden text-slate-400 hover:text-slate-600 dark:hover:text-white transition-colors"},[...a[4]||(a[4]=[v("span",{class:"material-symbols-outlined text-xl"},"close",-1)])]),v("button",{onClick:a[1]||(a[1]=c=>s("toggleSidebar")),class:"hidden lg:block text-slate-400 hover:text-slate-600 dark:hover:text-white transition-colors"},[v("span",Dy,X(e.isSidebarOpen?"menu_open":"menu"),1)])]),v("nav",Ly,[e.isSidebarOpen?(ne(),le("div",Uy,"Main Menu")):Be("",!0),(ne(!0),le($e,null,vs(e.menuItems,c=>(ne(),kn(l,{key:c.path,to:c.path,onClick:n,class:lt(["flex items-center gap-3 px-3 py-3 rounded-r-lg transition-all group border-l-[3px] border-transparent",[ct(r).path===c.path?"bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-600 dark:border-emerald-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white"]])},{default:gt(()=>[v("span",By,X(c.icon),1),e.isSidebarOpen?(ne(),le("span",My,X(c.name),1)):Be("",!0)]),_:2},1032,["to","class"]))),128)),a[5]||(a[5]=v("div",{class:"my-3 mx-3 border-t border-slate-100 dark:border-white/10"},null,-1)),e.isSidebarOpen?(ne(),le("div",Fy,"Administrasi")):Be("",!0),(ne(!0),le($e,null,vs(e.adminItems,c=>(ne(),kn(l,{key:c.path,to:c.path,onClick:n,class:lt(["flex items-center gap-3 px-3 py-3 rounded-r-lg transition-all group border-l-[3px] border-transparent",[ct(r).path===c.path?"bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-600 dark:border-emerald-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white"]])},{default:gt(()=>[v("span",qy,X(c.icon),1),e.isSidebarOpen?(ne(),le("span",Vy,X(c.name),1)):Be("",!0)]),_:2},1032,["to","class"]))),128))]),v("div",Hy,[v("div",Ky,[v("div",{class:"size-10 rounded-full bg-slate-100 dark:bg-slate-800 bg-cover border border-slate-200 dark:border-white/10 shadow-sm flex-shrink-0 flex items-center justify-center font-bold text-slate-600 dark:text-slate-400 text-sm",style:As(e.userProfile?.avatar?{backgroundImage:`url(${e.userProfile.avatar})`}:{})},[e.userProfile?.avatar?Be("",!0):(ne(),le("span",Wy,X(e.userProfile?.name?.charAt(0).toUpperCase()||"U"),1))],4),e.isSidebarOpen?(ne(),le("div",Gy,[v("p",zy,X(e.userProfile?.name||"User"),1),e.userProfile?.description?(ne(),le("p",Jy,X(e.userProfile.description),1)):Be("",!0),v("p",Yy,X(e.userProfile?.role||"Viewer"),1)])):Be("",!0),e.isSidebarOpen?(ne(),le("button",{key:1,onClick:i,class:"text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors p-1 hover:bg-red-50 dark:hover:bg-red-500/10 rounded",title:"Keluar Sistem"},[...a[6]||(a[6]=[v("span",{class:"material-symbols-outlined text-xl"},"logout",-1)])])):Be("",!0)]),e.isSidebarOpen?Be("",!0):(ne(),le("button",{key:0,onClick:i,class:"mt-4 w-full flex items-center justify-center text-slate-400 hover:text-red-600 transition-colors"},[...a[7]||(a[7]=[v("span",{class:"material-symbols-outlined"},"logout",-1)])]))])],2)}}},Qy={class:"h-16 bg-white dark:bg-[#141414] border-b border-slate-200 dark:border-gray-800 flex items-center justify-between px-4 md:px-6 sticky top-0 z-40 flex-shrink-0 transition-colors"},Zy={class:"flex items-center gap-2 md:gap-4 flex-1"},eb={class:"flex flex-col lg:flex-row lg:items-center lg:gap-4 flex-1 text-center lg:text-left"},tb={class:"lg:flex-1"},sb={class:"text-base md:text-lg font-bold text-slate-800 dark:text-white leading-tight truncate px-2 lg:px-0"},rb={class:"text-[10px] md:text-xs text-slate-500 dark:text-gray-400 truncate px-2 lg:px-0"},nb={class:"flex items-center gap-2 md:gap-4"},ib={__name:"Header",props:{isDarkMode:Boolean,isSidebarOpen:Boolean,userProfile:Object},emits:["toggleSidebar","toggleDarkMode","toggleMobileSidebar","logout"],setup(e,{emit:t}){const s=t,r=Ou();return(n,i)=>(ne(),le("header",Qy,[v("div",Zy,[v("button",{onClick:i[0]||(i[0]=o=>s("toggleMobileSidebar")),class:"lg:hidden p-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-gray-800 rounded-lg transition-colors"},[...i[2]||(i[2]=[v("span",{class:"material-symbols-outlined"},"menu",-1)])]),v("div",eb,[v("div",tb,[v("h1",sb,X(ct(r).meta.title||"Dashboard Overview"),1),v("p",rb,X(ct(r).meta.subtitle||"Overview sistem dan status pembaruan"),1)])])]),v("div",nb,[i[4]||(i[4]=v("div",{class:"hidden lg:block h-6 w-px bg-slate-200 dark:bg-gray-700 mx-2"},null,-1)),v("button",{onClick:i[1]||(i[1]=o=>s("toggleDarkMode")),class:"relative flex items-center h-8 w-14 rounded-full p-1 transition-all duration-300 focus:outline-none shadow-inner border border-slate-200 dark:border-gray-700 bg-slate-100 dark:bg-[#1a1a1a]","aria-label":"Toggle Dark Mode"},[v("div",{class:lt(["absolute h-6 w-6 rounded-full flex items-center justify-center shadow-md transform transition-all duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)]",[e.isDarkMode?"translate-x-6 bg-slate-800":"translate-x-0 bg-white"]])},[v("span",{class:lt(["material-symbols-outlined text-[18px] transition-all duration-300",[e.isDarkMode?"text-emerald-400 rotate-0":"text-amber-500 rotate-12"]])},X(e.isDarkMode?"dark_mode":"light_mode"),3)],2),i[3]||(i[3]=v("div",{class:"flex justify-between w-full px-1 opacity-20 dark:opacity-40"},[v("span",{class:"material-symbols-outlined text-[14px]"},"light_mode"),v("span",{class:"material-symbols-outlined text-[14px]"},"dark_mode")],-1))]),i[5]||(i[5]=v("button",{class:"relative p-2 text-slate-500 dark:text-gray-400 hover:bg-slate-50 dark:hover:bg-gray-800 rounded-full transition-colors"},[v("span",{class:"material-symbols-outlined"},"notifications"),v("span",{class:"absolute top-2 right-2 size-2 bg-rose-500 rounded-full border border-white dark:border-[#141414]"})],-1))])]))}},ob={class:"flex h-screen bg-background-light dark:bg-background-dark font-sans overflow-hidden transition-colors duration-300"},ab={class:"flex-1 flex flex-col min-w-0 h-screen"},lb={class:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar bg-slate-50 dark:bg-background-dark p-6 transition-colors"},cb={__name:"MainLayout",setup(e){const t=Tu(),s=Kr(),r=Ee(localStorage.getItem("darkMode")==="true"),n=Ee(!0),i=Ee(!1),o=Ee(localStorage.getItem("app_name")||"Monitoring Digitek"),a=Ee({name:"Memuat...",role:"Viewer",avatar:"https://ui-avatars.com/api/?name=User&background=random"}),l=()=>{r.value=!r.value,r.value?(document.documentElement.classList.add("dark"),document.documentElement.style.backgroundColor=""):(document.documentElement.classList.remove("dark"),document.documentElement.style.backgroundColor="#f8fafc"),localStorage.setItem("darkMode",r.value)},c=()=>{n.value=!n.value},u=()=>{i.value=!i.value},d=()=>{i.value=!1},f=async()=>{await s.signOut(),t.push("/login")},p=g=>{o.value=g.detail};qr(async()=>{if(window.addEventListener("app-name-updated",p),r.value?document.documentElement.classList.add("dark"):(document.documentElement.classList.remove("dark"),document.documentElement.style.backgroundColor="#f8fafc"),s.user){const{data:g}=await je.from("profiles").select("*, project_id").eq("id",s.user.id).single();if(g){a.value={name:g.full_name||s.user.email.split("@")[0],role:g.role||"Viewer",description:g.description||"",avatar:g.avatar_url||`https://ui-avatars.com/api/?name=${g.full_name||"User"}&background=random`};const{data:_}=await je.from("projects").select("name").eq("id",g.project_id||1).single();_&&(o.value=_.name,localStorage.setItem("app_name",_.name),localStorage.setItem("project_id",g.project_id||1))}}}),Eo(()=>{window.removeEventListener("app-name-updated",p)});const h=[{name:"Dashboard",icon:"dashboard",path:"/"},{name:"Manajemen Semua Log",icon:"bug_report",path:"/logs"},{name:"Manajemen Fitur",icon:"featured_play_list",path:"/features"},{name:"Manajemen Version Control",icon:"history",path:"/version-control"},{name:"Manajemen Access Control",icon:"admin_panel_settings",path:"/access-control"},{name:"Laporan & Statistik",icon:"analytics",path:"/reports"}],y=et(()=>[{name:"Manajemen Akses Tim",icon:"groups",path:"/team",roles:["Super Admin","Editor"]},{name:"Pengaturan",icon:"settings",path:"/settings",roles:["Super Admin","Editor","Viewer"]}].filter(_=>!_.roles||_.roles.includes(a.value.role)));return(g,_)=>{const E=Kn("router-view");return ne(),le("div",ob,[i.value?(ne(),le("div",{key:0,class:"fixed inset-0 bg-black/50 z-40 lg:hidden backdrop-blur-sm transition-opacity",onClick:d})):Be("",!0),_e(Xy,{"is-sidebar-open":n.value,"is-mobile-sidebar-open":i.value,"user-profile":a.value,"project-name":o.value,"menu-items":h,"admin-items":y.value,onLogout:f,onToggleSidebar:c,onToggleMobileSidebar:u},null,8,["is-sidebar-open","is-mobile-sidebar-open","user-profile","project-name","admin-items"]),v("div",ab,[_e(ib,{"is-dark-mode":r.value,"is-sidebar-open":n.value,"user-profile":a.value,onToggleSidebar:c,onToggleDarkMode:l,onToggleMobileSidebar:u,onLogout:f},null,8,["is-dark-mode","is-sidebar-open","user-profile"]),v("main",lb,[_e(E,{onToggleDarkMode:l})])])])}}};function Cu(e,t){return function(){return e.apply(t,arguments)}}const{toString:ub}=Object.prototype,{getPrototypeOf:No}=Object,{iterator:si,toStringTag:Pu}=Symbol,ri=(e=>t=>{const s=ub.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),St=e=>(e=e.toLowerCase(),t=>ri(t)===e),ni=e=>t=>typeof t===e,{isArray:rr}=Array,er=ni("undefined");function Wr(e){return e!==null&&!er(e)&&e.constructor!==null&&!er(e.constructor)&&Je(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Iu=St("ArrayBuffer");function db(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Iu(e.buffer),t}const hb=ni("string"),Je=ni("function"),ju=ni("number"),Gr=e=>e!==null&&typeof e=="object",fb=e=>e===!0||e===!1,gn=e=>{if(ri(e)!=="object")return!1;const t=No(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Pu in e)&&!(si in e)},pb=e=>{if(!Gr(e)||Wr(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},gb=St("Date"),mb=St("File"),yb=St("Blob"),bb=St("FileList"),vb=e=>Gr(e)&&Je(e.pipe),_b=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Je(e.append)&&((t=ri(e))==="formdata"||t==="object"&&Je(e.toString)&&e.toString()==="[object FormData]"))},wb=St("URLSearchParams"),[Sb,xb,Eb,kb]=["ReadableStream","Request","Response","Headers"].map(St),Ab=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zr(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let r,n;if(typeof e!="object"&&(e=[e]),rr(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(Wr(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(r=0;r<o;r++)a=i[r],t.call(null,e[a],a,e)}}function Nu(e,t){if(Wr(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r=s.length,n;for(;r-- >0;)if(n=s[r],t===n.toLowerCase())return n;return null}const ks=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$u=e=>!er(e)&&e!==ks;function ao(){const{caseless:e,skipUndefined:t}=$u(this)&&this||{},s={},r=(n,i)=>{const o=e&&Nu(s,i)||i;gn(s[o])&&gn(n)?s[o]=ao(s[o],n):gn(n)?s[o]=ao({},n):rr(n)?s[o]=n.slice():(!t||!er(n))&&(s[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&zr(arguments[n],r);return s}const Rb=(e,t,s,{allOwnKeys:r}={})=>(zr(t,(n,i)=>{s&&Je(n)?Object.defineProperty(e,i,{value:Cu(n,s),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,i,{value:n,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),Tb=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ob=(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Cb=(e,t,s,r)=>{let n,i,o;const a={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)o=n[i],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=s!==!1&&No(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Pb=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return r!==-1&&r===s},Ib=e=>{if(!e)return null;if(rr(e))return e;let t=e.length;if(!ju(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},jb=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&No(Uint8Array)),Nb=(e,t)=>{const r=(e&&e[si]).call(e);let n;for(;(n=r.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},$b=(e,t)=>{let s;const r=[];for(;(s=e.exec(t))!==null;)r.push(s);return r},Db=St("HTMLFormElement"),Lb=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,n){return r.toUpperCase()+n}),yl=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Ub=St("RegExp"),Du=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};zr(s,(n,i)=>{let o;(o=t(n,i,e))!==!1&&(r[i]=o||n)}),Object.defineProperties(e,r)},Bb=e=>{Du(e,(t,s)=>{if(Je(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=e[s];if(Je(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Mb=(e,t)=>{const s={},r=n=>{n.forEach(i=>{s[i]=!0})};return rr(e)?r(e):r(String(e).split(t)),s},Fb=()=>{},qb=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Vb(e){return!!(e&&Je(e.append)&&e[Pu]==="FormData"&&e[si])}const Hb=e=>{const t=new Array(10),s=(r,n)=>{if(Gr(r)){if(t.indexOf(r)>=0)return;if(Wr(r))return r;if(!("toJSON"in r)){t[n]=r;const i=rr(r)?[]:{};return zr(r,(o,a)=>{const l=s(o,n+1);!er(l)&&(i[a]=l)}),t[n]=void 0,i}}return r};return s(e,0)},Kb=St("AsyncFunction"),Wb=e=>e&&(Gr(e)||Je(e))&&Je(e.then)&&Je(e.catch),Lu=((e,t)=>e?setImmediate:t?((s,r)=>(ks.addEventListener("message",({source:n,data:i})=>{n===ks&&i===s&&r.length&&r.shift()()},!1),n=>{r.push(n),ks.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Je(ks.postMessage)),Gb=typeof queueMicrotask<"u"?queueMicrotask.bind(ks):typeof process<"u"&&process.nextTick||Lu,zb=e=>e!=null&&Je(e[si]),x={isArray:rr,isArrayBuffer:Iu,isBuffer:Wr,isFormData:_b,isArrayBufferView:db,isString:hb,isNumber:ju,isBoolean:fb,isObject:Gr,isPlainObject:gn,isEmptyObject:pb,isReadableStream:Sb,isRequest:xb,isResponse:Eb,isHeaders:kb,isUndefined:er,isDate:gb,isFile:mb,isBlob:yb,isRegExp:Ub,isFunction:Je,isStream:vb,isURLSearchParams:wb,isTypedArray:jb,isFileList:bb,forEach:zr,merge:ao,extend:Rb,trim:Ab,stripBOM:Tb,inherits:Ob,toFlatObject:Cb,kindOf:ri,kindOfTest:St,endsWith:Pb,toArray:Ib,forEachEntry:Nb,matchAll:$b,isHTMLForm:Db,hasOwnProperty:yl,hasOwnProp:yl,reduceDescriptors:Du,freezeMethods:Bb,toObjectSet:Mb,toCamelCase:Lb,noop:Fb,toFiniteNumber:qb,findKey:Nu,global:ks,isContextDefined:$u,isSpecCompliantForm:Vb,toJSONObject:Hb,isAsyncFn:Kb,isThenable:Wb,setImmediate:Lu,asap:Gb,isIterable:zb};let Z=class Uu extends Error{static from(t,s,r,n,i,o){const a=new Uu(t.message,s||t.code,r,n,i);return a.cause=t,a.name=t.name,o&&Object.assign(a,o),a}constructor(t,s,r,n,i){super(t),this.name="AxiosError",this.isAxiosError=!0,s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.status}}};Z.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Z.ERR_BAD_OPTION="ERR_BAD_OPTION";Z.ECONNABORTED="ECONNABORTED";Z.ETIMEDOUT="ETIMEDOUT";Z.ERR_NETWORK="ERR_NETWORK";Z.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Z.ERR_DEPRECATED="ERR_DEPRECATED";Z.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Z.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Z.ERR_CANCELED="ERR_CANCELED";Z.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Z.ERR_INVALID_URL="ERR_INVALID_URL";const Jb=null;function lo(e){return x.isPlainObject(e)||x.isArray(e)}function Bu(e){return x.endsWith(e,"[]")?e.slice(0,-2):e}function bl(e,t,s){return e?e.concat(t).map(function(n,i){return n=Bu(n),!s&&i?"["+n+"]":n}).join(s?".":""):t}function Yb(e){return x.isArray(e)&&!e.some(lo)}const Xb=x.toFlatObject(x,{},null,function(t){return/^is[A-Z]/.test(t)});function ii(e,t,s){if(!x.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=x.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!x.isUndefined(g[y])});const r=s.metaTokens,n=s.visitor||u,i=s.dots,o=s.indexes,l=(s.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(t);if(!x.isFunction(n))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(x.isDate(h))return h.toISOString();if(x.isBoolean(h))return h.toString();if(!l&&x.isBlob(h))throw new Z("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(h)||x.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,y,g){let _=h;if(h&&!g&&typeof h=="object"){if(x.endsWith(y,"{}"))y=r?y:y.slice(0,-2),h=JSON.stringify(h);else if(x.isArray(h)&&Yb(h)||(x.isFileList(h)||x.endsWith(y,"[]"))&&(_=x.toArray(h)))return y=Bu(y),_.forEach(function(S,k){!(x.isUndefined(S)||S===null)&&t.append(o===!0?bl([y],k,i):o===null?y:y+"[]",c(S))}),!1}return lo(h)?!0:(t.append(bl(g,y,i),c(h)),!1)}const d=[],f=Object.assign(Xb,{defaultVisitor:u,convertValue:c,isVisitable:lo});function p(h,y){if(!x.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(h),x.forEach(h,function(_,E){(!(x.isUndefined(_)||_===null)&&n.call(t,_,x.isString(E)?E.trim():E,y,f))===!0&&p(_,y?y.concat(E):[E])}),d.pop()}}if(!x.isObject(e))throw new TypeError("data must be an object");return p(e),t}function vl(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function $o(e,t){this._pairs=[],e&&ii(e,this,t)}const Mu=$o.prototype;Mu.append=function(t,s){this._pairs.push([t,s])};Mu.toString=function(t){const s=t?function(r){return t.call(this,r,vl)}:vl;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function Qb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Fu(e,t,s){if(!t)return e;const r=s&&s.encode||Qb,n=x.isFunction(s)?{serialize:s}:s,i=n&&n.serialize;let o;if(i?o=i(t,n):o=x.isURLSearchParams(t)?t.toString():new $o(t,n).toString(r),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class _l{constructor(){this.handlers=[]}use(t,s,r){return this.handlers.push({fulfilled:t,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){x.forEach(this.handlers,function(r){r!==null&&t(r)})}}const qu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zb=typeof URLSearchParams<"u"?URLSearchParams:$o,e0=typeof FormData<"u"?FormData:null,t0=typeof Blob<"u"?Blob:null,s0={isBrowser:!0,classes:{URLSearchParams:Zb,FormData:e0,Blob:t0},protocols:["http","https","file","blob","url","data"]},Do=typeof window<"u"&&typeof document<"u",co=typeof navigator=="object"&&navigator||void 0,r0=Do&&(!co||["ReactNative","NativeScript","NS"].indexOf(co.product)<0),n0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",i0=Do&&window.location.href||"http://localhost",o0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Do,hasStandardBrowserEnv:r0,hasStandardBrowserWebWorkerEnv:n0,navigator:co,origin:i0},Symbol.toStringTag,{value:"Module"})),qe={...o0,...s0};function a0(e,t){return ii(e,new qe.classes.URLSearchParams,{visitor:function(s,r,n,i){return qe.isNode&&x.isBuffer(s)?(this.append(r,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function l0(e){return x.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function c0(e){const t={},s=Object.keys(e);let r;const n=s.length;let i;for(r=0;r<n;r++)i=s[r],t[i]=e[i];return t}function Vu(e){function t(s,r,n,i){let o=s[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=s.length;return o=!o&&x.isArray(n)?n.length:o,l?(x.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!a):((!n[o]||!x.isObject(n[o]))&&(n[o]=[]),t(s,r,n[o],i)&&x.isArray(n[o])&&(n[o]=c0(n[o])),!a)}if(x.isFormData(e)&&x.isFunction(e.entries)){const s={};return x.forEachEntry(e,(r,n)=>{t(l0(r),n,s,0)}),s}return null}function u0(e,t,s){if(x.isString(e))try{return(t||JSON.parse)(e),x.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(e)}const Jr={transitional:qu,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const r=s.getContentType()||"",n=r.indexOf("application/json")>-1,i=x.isObject(t);if(i&&x.isHTMLForm(t)&&(t=new FormData(t)),x.isFormData(t))return n?JSON.stringify(Vu(t)):t;if(x.isArrayBuffer(t)||x.isBuffer(t)||x.isStream(t)||x.isFile(t)||x.isBlob(t)||x.isReadableStream(t))return t;if(x.isArrayBufferView(t))return t.buffer;if(x.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return a0(t,this.formSerializer).toString();if((a=x.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ii(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||n?(s.setContentType("application/json",!1),u0(t)):t}],transformResponse:[function(t){const s=this.transitional||Jr.transitional,r=s&&s.forcedJSONParsing,n=this.responseType==="json";if(x.isResponse(t)||x.isReadableStream(t))return t;if(t&&x.isString(t)&&(r&&!this.responseType||n)){const o=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Z.from(a,Z.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};x.forEach(["delete","get","head","post","put","patch"],e=>{Jr.headers[e]={}});const d0=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h0=e=>{const t={};let s,r,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),s=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!s||t[s]&&d0[s])&&(s==="set-cookie"?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t},wl=Symbol("internals");function cr(e){return e&&String(e).trim().toLowerCase()}function mn(e){return e===!1||e==null?e:x.isArray(e)?e.map(mn):String(e)}function f0(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}const p0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Pi(e,t,s,r,n){if(x.isFunction(r))return r.call(this,t,s);if(n&&(t=s),!!x.isString(t)){if(x.isString(r))return t.indexOf(r)!==-1;if(x.isRegExp(r))return r.test(t)}}function g0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,r)=>s.toUpperCase()+r)}function m0(e,t){const s=x.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(n,i,o){return this[r].call(this,t,n,i,o)},configurable:!0})})}let Ye=class{constructor(t){t&&this.set(t)}set(t,s,r){const n=this;function i(a,l,c){const u=cr(l);if(!u)throw new Error("header name must be a non-empty string");const d=x.findKey(n,u);(!d||n[d]===void 0||c===!0||c===void 0&&n[d]!==!1)&&(n[d||l]=mn(a))}const o=(a,l)=>x.forEach(a,(c,u)=>i(c,u,l));if(x.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(x.isString(t)&&(t=t.trim())&&!p0(t))o(h0(t),s);else if(x.isObject(t)&&x.isIterable(t)){let a={},l,c;for(const u of t){if(!x.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?x.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,s)}else t!=null&&i(s,t,r);return this}get(t,s){if(t=cr(t),t){const r=x.findKey(this,t);if(r){const n=this[r];if(!s)return n;if(s===!0)return f0(n);if(x.isFunction(s))return s.call(this,n,r);if(x.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=cr(t),t){const r=x.findKey(this,t);return!!(r&&this[r]!==void 0&&(!s||Pi(this,this[r],r,s)))}return!1}delete(t,s){const r=this;let n=!1;function i(o){if(o=cr(o),o){const a=x.findKey(r,o);a&&(!s||Pi(r,r[a],a,s))&&(delete r[a],n=!0)}}return x.isArray(t)?t.forEach(i):i(t),n}clear(t){const s=Object.keys(this);let r=s.length,n=!1;for(;r--;){const i=s[r];(!t||Pi(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const s=this,r={};return x.forEach(this,(n,i)=>{const o=x.findKey(r,i);if(o){s[o]=mn(n),delete s[i];return}const a=t?g0(i):String(i).trim();a!==i&&delete s[i],s[a]=mn(n),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return x.forEach(this,(r,n)=>{r!=null&&r!==!1&&(s[n]=t&&x.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const r=new this(t);return s.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[wl]=this[wl]={accessors:{}}).accessors,n=this.prototype;function i(o){const a=cr(o);r[a]||(m0(n,o),r[a]=!0)}return x.isArray(t)?t.forEach(i):i(t),this}};Ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.reduceDescriptors(Ye.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[s]=r}}});x.freezeMethods(Ye);function Ii(e,t){const s=this||Jr,r=t||s,n=Ye.from(r.headers);let i=r.data;return x.forEach(e,function(a){i=a.call(s,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function Hu(e){return!!(e&&e.__CANCEL__)}let Yr=class extends Z{constructor(t,s,r){super(t??"canceled",Z.ERR_CANCELED,s,r),this.name="CanceledError",this.__CANCEL__=!0}};function Ku(e,t,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?e(s):t(new Z("Request failed with status code "+s.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function y0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function b0(e,t){e=e||10;const s=new Array(e),r=new Array(e);let n=0,i=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),s[n]=l,r[n]=c;let d=i,f=0;for(;d!==n;)f+=s[d++],d=d%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),c-o<t)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function v0(e,t){let s=0,r=1e3/t,n,i;const o=(c,u=Date.now())=>{s=u,n=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const u=Date.now(),d=u-s;d>=r?o(c,u):(n=c,i||(i=setTimeout(()=>{i=null,o(n)},r-d)))},()=>n&&o(n)]}const In=(e,t,s=3)=>{let r=0;const n=b0(50,250);return v0(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=n(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},s)},Sl=(e,t)=>{const s=e!=null;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},xl=e=>(...t)=>x.asap(()=>e(...t)),_0=qe.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,qe.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(qe.origin),qe.navigator&&/(msie|trident)/i.test(qe.navigator.userAgent)):()=>!0,w0=qe.hasStandardBrowserEnv?{write(e,t,s,r,n,i,o){if(typeof document>"u")return;const a=[`${e}=${encodeURIComponent(t)}`];x.isNumber(s)&&a.push(`expires=${new Date(s).toUTCString()}`),x.isString(r)&&a.push(`path=${r}`),x.isString(n)&&a.push(`domain=${n}`),i===!0&&a.push("secure"),x.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function S0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function x0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Wu(e,t,s){let r=!S0(t);return e&&(r||s==!1)?x0(e,t):t}const El=e=>e instanceof Ye?{...e}:e;function Ps(e,t){t=t||{};const s={};function r(c,u,d,f){return x.isPlainObject(c)&&x.isPlainObject(u)?x.merge.call({caseless:f},c,u):x.isPlainObject(u)?x.merge({},u):x.isArray(u)?u.slice():u}function n(c,u,d,f){if(x.isUndefined(u)){if(!x.isUndefined(c))return r(void 0,c,d,f)}else return r(c,u,d,f)}function i(c,u){if(!x.isUndefined(u))return r(void 0,u)}function o(c,u){if(x.isUndefined(u)){if(!x.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in t)return r(c,u);if(d in e)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>n(El(c),El(u),d,!0)};return x.forEach(Object.keys({...e,...t}),function(u){const d=l[u]||n,f=d(e[u],t[u],u);x.isUndefined(f)&&d!==a||(s[u]=f)}),s}const Gu=e=>{const t=Ps({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:a}=t;if(t.headers=o=Ye.from(o),t.url=Fu(Wu(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),x.isFormData(s)){if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(x.isFunction(s.getHeaders)){const l=s.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(qe.hasStandardBrowserEnv&&(r&&x.isFunction(r)&&(r=r(t)),r||r!==!1&&_0(t.url))){const l=n&&i&&w0.read(i);l&&o.set(n,l)}return t},E0=typeof XMLHttpRequest<"u",k0=E0&&function(e){return new Promise(function(s,r){const n=Gu(e);let i=n.data;const o=Ye.from(n.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=n,u,d,f,p,h;function y(){p&&p(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function _(){if(!g)return;const S=Ye.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),N={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:S,config:e,request:g};Ku(function(U){s(U),y()},function(U){r(U),y()},N),g=null}"onloadend"in g?g.onloadend=_:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(_)},g.onabort=function(){g&&(r(new Z("Request aborted",Z.ECONNABORTED,e,g)),g=null)},g.onerror=function(k){const N=k&&k.message?k.message:"Network Error",M=new Z(N,Z.ERR_NETWORK,e,g);M.event=k||null,r(M),g=null},g.ontimeout=function(){let k=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const N=n.transitional||qu;n.timeoutErrorMessage&&(k=n.timeoutErrorMessage),r(new Z(k,N.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,e,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&x.forEach(o.toJSON(),function(k,N){g.setRequestHeader(N,k)}),x.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),a&&a!=="json"&&(g.responseType=n.responseType),c&&([f,h]=In(c,!0),g.addEventListener("progress",f)),l&&g.upload&&([d,p]=In(l),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",p)),(n.cancelToken||n.signal)&&(u=S=>{g&&(r(!S||S.type?new Yr(null,e,g):S),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const E=y0(n.url);if(E&&qe.protocols.indexOf(E)===-1){r(new Z("Unsupported protocol "+E+":",Z.ERR_BAD_REQUEST,e));return}g.send(i||null)})},A0=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let r=new AbortController,n;const i=function(c){if(!n){n=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof Z?u:new Yr(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new Z(`timeout of ${t}ms exceeded`,Z.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>x.asap(a),l}},R0=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let r=0,n;for(;r<s;)n=r+t,yield e.slice(r,n),r=n},T0=async function*(e,t){for await(const s of O0(e))yield*R0(s,t)},O0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:r}=await t.read();if(s)break;yield r}}finally{await t.cancel()}},kl=(e,t,s,r)=>{const n=T0(e,t);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await n.next();if(c){a(),l.close();return}let d=u.byteLength;if(s){let f=i+=d;s(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),n.return()}},{highWaterMark:2})},Al=64*1024,{isFunction:cn}=x,C0=(({Request:e,Response:t})=>({Request:e,Response:t}))(x.global),{ReadableStream:Rl,TextEncoder:Tl}=x.global,Ol=(e,...t)=>{try{return!!e(...t)}catch{return!1}},P0=e=>{e=x.merge.call({skipUndefined:!0},C0,e);const{fetch:t,Request:s,Response:r}=e,n=t?cn(t):typeof fetch=="function",i=cn(s),o=cn(r);if(!n)return!1;const a=n&&cn(Rl),l=n&&(typeof Tl=="function"?(h=>y=>h.encode(y))(new Tl):async h=>new Uint8Array(await new s(h).arrayBuffer())),c=i&&a&&Ol(()=>{let h=!1;const y=new s(qe.origin,{body:new Rl,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!y}),u=o&&a&&Ol(()=>x.isReadableStream(new r("").body)),d={stream:u&&(h=>h.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!d[h]&&(d[h]=(y,g)=>{let _=y&&y[h];if(_)return _.call(y);throw new Z(`Response type '${h}' is not supported`,Z.ERR_NOT_SUPPORT,g)})});const f=async h=>{if(h==null)return 0;if(x.isBlob(h))return h.size;if(x.isSpecCompliantForm(h))return(await new s(qe.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(x.isArrayBufferView(h)||x.isArrayBuffer(h))return h.byteLength;if(x.isURLSearchParams(h)&&(h=h+""),x.isString(h))return(await l(h)).byteLength},p=async(h,y)=>{const g=x.toFiniteNumber(h.getContentLength());return g??f(y)};return async h=>{let{url:y,method:g,data:_,signal:E,cancelToken:S,timeout:k,onDownloadProgress:N,onUploadProgress:M,responseType:U,headers:H,withCredentials:P="same-origin",fetchOptions:z}=Gu(h),q=t||fetch;U=U?(U+"").toLowerCase():"text";let I=A0([E,S&&S.toAbortSignal()],k),ee=null;const ie=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let we;try{if(M&&c&&g!=="get"&&g!=="head"&&(we=await p(H,_))!==0){let Ce=new s(y,{method:"POST",body:_,duplex:"half"}),Ae;if(x.isFormData(_)&&(Ae=Ce.headers.get("content-type"))&&H.setContentType(Ae),Ce.body){const[Et,ft]=Sl(we,In(xl(M)));_=kl(Ce.body,Al,Et,ft)}}x.isString(P)||(P=P?"include":"omit");const oe=i&&"credentials"in s.prototype,se={...z,signal:I,method:g.toUpperCase(),headers:H.normalize().toJSON(),body:_,duplex:"half",credentials:oe?P:void 0};ee=i&&new s(y,se);let ae=await(i?q(ee,z):q(y,se));const it=u&&(U==="stream"||U==="response");if(u&&(N||it&&ie)){const Ce={};["status","statusText","headers"].forEach(kt=>{Ce[kt]=ae[kt]});const Ae=x.toFiniteNumber(ae.headers.get("content-length")),[Et,ft]=N&&Sl(Ae,In(xl(N),!0))||[];ae=new r(kl(ae.body,Al,Et,()=>{ft&&ft(),ie&&ie()}),Ce)}U=U||"text";let xt=await d[x.findKey(d,U)||"text"](ae,h);return!it&&ie&&ie(),await new Promise((Ce,Ae)=>{Ku(Ce,Ae,{data:xt,headers:Ye.from(ae.headers),status:ae.status,statusText:ae.statusText,config:h,request:ee})})}catch(oe){throw ie&&ie(),oe&&oe.name==="TypeError"&&/Load failed|fetch/i.test(oe.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,h,ee),{cause:oe.cause||oe}):Z.from(oe,oe&&oe.code,h,ee)}}},I0=new Map,zu=e=>{let t=e&&e.env||{};const{fetch:s,Request:r,Response:n}=t,i=[r,n,s];let o=i.length,a=o,l,c,u=I0;for(;a--;)l=i[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:P0(t)),u=c;return c};zu();const Lo={http:Jb,xhr:k0,fetch:{get:zu}};x.forEach(Lo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Cl=e=>`- ${e}`,j0=e=>x.isFunction(e)||e===null||e===!1;function N0(e,t){e=x.isArray(e)?e:[e];const{length:s}=e;let r,n;const i={};for(let o=0;o<s;o++){r=e[o];let a;if(n=r,!j0(r)&&(n=Lo[(a=String(r)).toLowerCase()],n===void 0))throw new Z(`Unknown adapter '${a}'`);if(n&&(x.isFunction(n)||(n=n.get(t))))break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=s?o.length>1?`since :
`+o.map(Cl).join(`
`):" "+Cl(o[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n}const Ju={getAdapter:N0,adapters:Lo};function ji(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yr(null,e)}function Pl(e){return ji(e),e.headers=Ye.from(e.headers),e.data=Ii.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ju.getAdapter(e.adapter||Jr.adapter,e)(e).then(function(r){return ji(e),r.data=Ii.call(e,e.transformResponse,r),r.headers=Ye.from(r.headers),r},function(r){return Hu(r)||(ji(e),r&&r.response&&(r.response.data=Ii.call(e,e.transformResponse,r.response),r.response.headers=Ye.from(r.response.headers))),Promise.reject(r)})}const Yu="1.13.4",oi={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{oi[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Il={};oi.transitional=function(t,s,r){function n(i,o){return"[Axios v"+Yu+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(t===!1)throw new Z(n(o," has been removed"+(s?" in "+s:"")),Z.ERR_DEPRECATED);return s&&!Il[o]&&(Il[o]=!0,console.warn(n(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,o,a):!0}};oi.spelling=function(t){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function $0(e,t,s){if(typeof e!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const i=r[n],o=t[i];if(o){const a=e[i],l=a===void 0||o(a,i,e);if(l!==!0)throw new Z("option "+i+" must be "+l,Z.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Z("Unknown option "+i,Z.ERR_BAD_OPTION)}}const yn={assertOptions:$0,validators:oi},Ct=yn.validators;let Os=class{constructor(t){this.defaults=t||{},this.interceptors={request:new _l,response:new _l}}async request(t,s){try{return await this._request(t,s)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Ps(this.defaults,s);const{transitional:r,paramsSerializer:n,headers:i}=s;r!==void 0&&yn.assertOptions(r,{silentJSONParsing:Ct.transitional(Ct.boolean),forcedJSONParsing:Ct.transitional(Ct.boolean),clarifyTimeoutError:Ct.transitional(Ct.boolean)},!1),n!=null&&(x.isFunction(n)?s.paramsSerializer={serialize:n}:yn.assertOptions(n,{encode:Ct.function,serialize:Ct.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),yn.assertOptions(s,{baseUrl:Ct.spelling("baseURL"),withXsrfToken:Ct.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&x.merge(i.common,i[s.method]);i&&x.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),s.headers=Ye.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(s)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,d=0,f;if(!l){const h=[Pl.bind(this),void 0];for(h.unshift(...a),h.push(...c),f=h.length,u=Promise.resolve(s);d<f;)u=u.then(h[d++],h[d++]);return u}f=a.length;let p=s;for(;d<f;){const h=a[d++],y=a[d++];try{p=h(p)}catch(g){y.call(this,g);break}}try{u=Pl.call(this,p)}catch(h){return Promise.reject(h)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=Ps(this.defaults,t);const s=Wu(t.baseURL,t.url,t.allowAbsoluteUrls);return Fu(s,t.params,t.paramsSerializer)}};x.forEach(["delete","get","head","options"],function(t){Os.prototype[t]=function(s,r){return this.request(Ps(r||{},{method:t,url:s,data:(r||{}).data}))}});x.forEach(["post","put","patch"],function(t){function s(r){return function(i,o,a){return this.request(Ps(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Os.prototype[t]=s(),Os.prototype[t+"Form"]=s(!0)});let D0=class Xu{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,a){r.reason||(r.reason=new Yr(i,o,a),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=r=>{t.abort(r)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Xu(function(n){t=n}),cancel:t}}};function L0(e){return function(s){return e.apply(null,s)}}function U0(e){return x.isObject(e)&&e.isAxiosError===!0}const uo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(uo).forEach(([e,t])=>{uo[t]=e});function Qu(e){const t=new Os(e),s=Cu(Os.prototype.request,t);return x.extend(s,Os.prototype,t,{allOwnKeys:!0}),x.extend(s,t,null,{allOwnKeys:!0}),s.create=function(n){return Qu(Ps(e,n))},s}const Te=Qu(Jr);Te.Axios=Os;Te.CanceledError=Yr;Te.CancelToken=D0;Te.isCancel=Hu;Te.VERSION=Yu;Te.toFormData=ii;Te.AxiosError=Z;Te.Cancel=Te.CanceledError;Te.all=function(t){return Promise.all(t)};Te.spread=L0;Te.isAxiosError=U0;Te.mergeConfig=Ps;Te.AxiosHeaders=Ye;Te.formToJSON=e=>Vu(x.isHTMLForm(e)?new FormData(e):e);Te.getAdapter=Ju.getAdapter;Te.HttpStatusCode=uo;Te.default=Te;const{Axios:M_,AxiosError:F_,CanceledError:q_,isCancel:V_,CancelToken:H_,VERSION:K_,all:W_,Cancel:G_,isAxiosError:z_,spread:J_,toFormData:Y_,AxiosHeaders:X_,HttpStatusCode:Q_,formToJSON:Z_,getAdapter:ew,mergeConfig:tw}=Te,B0="https://wfosdlvxdlhpcyzevjjc.supabase.co",jl="sb_publishable_oMqXUrfmb1J-QgBe9m8Vkw_tzmlzxc4",hr=Te.create({baseURL:`${B0}/rest/v1`,headers:{apikey:jl,Authorization:`Bearer ${jl}`,"Content-Type":"application/json",Prefer:"return=representation"}});hr.interceptors.request.use(async e=>{try{const{supabase:t}=await es(async()=>{const{supabase:r}=await Promise.resolve().then(()=>_m);return{supabase:r}},void 0),{data:{session:s}}=await t.auth.getSession();s?.access_token&&(e.headers.Authorization=`Bearer ${s.access_token}`)}catch(t){console.error("Error getting session for axios:",t)}return e});const Zu=(e,t)=>{const s=e.__vccOpts||e;for(const[r,n]of t)s[r]=n;return s},M0={class:"max-w-[1600px] mx-auto space-y-6"},F0={class:"flex flex-col lg:flex-row gap-6"},q0={class:"flex-1 flex flex-col gap-6 min-w-0"},V0={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},H0={class:"text-3xl font-black text-slate-800 dark:text-white"},K0={class:"flex items-center gap-1 mt-2 text-rose-500 text-xs font-medium"},W0={class:"text-3xl font-black text-slate-800 dark:text-white"},G0={class:"flex items-center gap-1 mt-2 text-emerald-600 text-xs font-medium"},z0={class:"text-3xl font-black text-slate-800 dark:text-white"},J0={class:"flex items-center gap-1 mt-2 text-blue-500 text-xs font-medium"},Y0={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},X0={class:"flex-1 h-[150px] w-full relative group/chart"},Q0={class:"w-full h-full overflow-visible",viewBox:"0 0 700 150",preserveAspectRatio:"none"},Z0=["d"],ev=["d"],tv={class:"absolute -bottom-6 left-0 w-full flex justify-between text-[10px] font-bold text-slate-400 uppercase tracking-widest"},sv={class:"flex items-center justify-between mb-6"},rv={class:"text-[10px] font-black bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full uppercase tracking-tighter"},nv={class:"space-y-4"},iv={class:"flex items-center gap-4"},ov={class:"flex-1 bg-slate-100 dark:bg-gray-800 h-2 rounded-full overflow-hidden flex"},av={class:"grid grid-cols-2 gap-4"},lv={class:"flex flex-col"},cv={class:"text-lg font-black text-emerald-600"},uv={class:"flex flex-col"},dv={class:"text-lg font-black text-amber-600"},hv={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},fv={class:"flex-1 flex items-center gap-10"},pv={class:"relative size-32 flex-shrink-0"},gv={class:"size-full -rotate-90",viewBox:"0 0 36 36"},mv=["stroke-dasharray"],yv=["stroke-dasharray","stroke-dashoffset"],bv={class:"absolute inset-0 flex items-center justify-center flex-col"},vv={class:"text-lg font-black text-slate-800 dark:text-white"},_v={class:"flex flex-col gap-3 justify-center flex-1"},wv={class:"flex items-center gap-3"},Sv={class:"text-slate-500 uppercase tracking-tighter"},xv={class:"text-slate-700 dark:text-slate-300 font-black"},Ev={class:"bg-white dark:bg-[#141414] p-6 rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm flex flex-col"},kv={class:"flex items-center justify-between mb-6"},Av={class:"space-y-4"},Rv={class:"flex items-center justify-between text-[10px] font-bold mb-1"},Tv={class:"text-slate-500 uppercase"},Ov={class:"text-slate-700 dark:text-slate-300"},Cv={class:"w-full bg-slate-100 dark:bg-gray-800 h-1.5 rounded-full overflow-hidden"},Pv={class:"bg-white dark:bg-[#141414] rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm overflow-hidden"},Iv={class:"px-6 py-4 border-b border-slate-100 dark:border-gray-800 flex items-center justify-between"},jv={class:"overflow-x-auto"},Nv={class:"w-full text-left text-sm"},$v={class:"divide-y divide-slate-100 dark:divide-gray-800"},Dv={class:"px-6 py-4"},Lv={class:"flex flex-col"},Uv={class:"font-bold text-slate-800 dark:text-white line-clamp-1"},Bv={class:"text-[10px] text-slate-400 line-clamp-1"},Mv={class:"px-6 py-4 text-xs font-medium text-slate-500"},Fv={class:"px-6 py-4"},qv={class:"px-2 py-1 bg-slate-100 dark:bg-gray-800 text-[10px] font-bold rounded uppercase"},Vv={class:"px-6 py-4"},Hv={class:"px-6 py-4 text-right"},Kv={key:0},Wv={class:"w-full lg:w-[380px] flex flex-col gap-6"},Gv={class:"bg-white dark:bg-[#141414] p-6 rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm flex-1"},zv={class:"space-y-6"},Jv=["onClick"],Yv={class:"relative"},Xv=["src"],Qv={key:0,class:"absolute -bottom-1 -right-1 size-5 bg-rose-500 text-white rounded-full flex items-center justify-center border-2 border-white dark:border-[#141414]"},Zv={class:"material-symbols-outlined text-[10px]"},e_={class:"flex-1 min-w-0"},t_={class:"flex items-center justify-between mb-0.5"},s_={class:"text-xs font-black text-slate-800 dark:text-white truncate"},r_={class:"text-[9px] font-bold text-slate-400 whitespace-nowrap uppercase tracking-tighter"},n_={class:"text-[11px] text-slate-500 dark:text-slate-400 mb-1 leading-tight"},i_={class:"p-2 bg-slate-50 dark:bg-gray-800/50 rounded-lg border border-slate-100 dark:border-gray-800 group-hover:border-blue-500/30 transition-all"},o_={class:"text-[10px] text-slate-600 dark:text-slate-300 italic line-clamp-2"},a_={key:0,class:"text-center py-10 text-slate-400 font-bold italic text-sm"},l_={__name:"Dashboard",setup(e){const t=Kr(),s=Ee(!0),r=Ee({totalLogs:0,criticalLogs:0,currentVersion:"v0.0.0",totalCommits:0,totalRoles:0,activeModules:0,featureReview:0,featureDev:0}),n=Ee([{day:"Mon",logs:0},{day:"Tue",logs:0},{day:"Wed",logs:0},{day:"Thu",logs:0},{day:"Fri",logs:0},{day:"Sat",logs:0},{day:"Sun",logs:0}]),i=Ee([]),o=Ee([]),a=Ee({critical:0,high:0,medium:0,low:0,total:0}),l=Ee([]),c=p=>{const h=p?.toLowerCase();return h==="on progres"||h==="on progress"?"bg-orange-100 text-orange-700":h==="report"||h==="to do"?"bg-slate-100 text-slate-600":h==="critikal"||h==="critical"?"bg-rose-100 text-rose-700":h==="done"?"bg-emerald-100 text-emerald-700":"bg-blue-100 text-blue-700"},u=p=>{const h=p?.toLowerCase();return h==="critikal"||h==="critical"?"text-rose-600":h==="hight"||h==="high"?"text-rose-500":h==="medium"?"text-orange-500":"text-emerald-600"},d=p=>{if(!p)return"";const h=new Date(p),g=Math.floor((new Date-h)/1e3);return g<60?"Baru saja":g<3600?`${Math.floor(g/60)} menit yang lalu`:g<86400?`${Math.floor(g/3600)} jam yang lalu`:h.toLocaleDateString("id-ID")},f=async()=>{s.value=!0;try{const p=["Super Admin","Admin"].includes(t.user?.role),h=t.user?.project_id||1,y=t.user?.id;let g="/logs?select=id,priority,status,created_at,reporter_id";p||(g+=`&project_id=eq.${h}`);const{data:_}=await hr.get(g);if(_){r.value.totalLogs=_.length,r.value.criticalLogs=_.filter(ie=>["critikal","critical"].includes(ie.priority?.toLowerCase())).length,i.value=_.filter(ie=>ie.reporter_id===y).sort((ie,we)=>new Date(we.created_at)-new Date(ie.created_at)).slice(0,5);const q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I={};q.forEach(ie=>I[ie]=0);const ee=new Date;ee.setDate(ee.getDate()-7),_.forEach(ie=>{const we=new Date(ie.created_at);if(we>=ee){const oe=q[we.getDay()];I[oe]++}}),n.value=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(ie=>({day:ie,logs:I[ie]}))}let E="/feature_requests?select=id,status_lifecycle,urgensi";p||(E+=`&project_id=eq.${h}`);const{data:S}=await hr.get(E);S&&(r.value.featureReview=S.filter(q=>q.status_lifecycle==="Sedang Ditinjau").length,r.value.featureDev=S.filter(q=>q.status_lifecycle==="Sedang Dikembangkan").length);let k="/version_logs?select=version_number,release_date&order=release_date.desc";p||(k+=`&project_id=eq.${h}`);const{data:N}=await hr.get(k);N&&N.length>0&&(r.value.currentVersion=N[0].version_number,r.value.totalCommits=N.length);const[M,U]=await Promise.all([je.from("access_roles").select("id,role_name,role_code",{count:"exact"}),je.from("app_components").select("id,name",{count:"exact"}).eq("project_id",h)]);if(r.value.totalRoles=M.count||0,r.value.activeModules=U.count||0,M.data){const q=["blue","emerald","slate","indigo","amber"];l.value=M.data.slice(0,5).map((I,ee)=>({name:I.role_name,status:I.role_code,count:Math.floor(Math.random()*10)+1,percentage:Math.floor(Math.random()*40)+20,color:q[ee%q.length]}))}const H=[...(_||[]).map(q=>({priority:q.priority?.toLowerCase()})),...(S||[]).map(q=>({priority:q.urgensi?.toLowerCase()}))],P={critical:0,high:0,medium:0,low:0,total:H.length};H.forEach(q=>{["critikal","critical"].includes(q.priority)?P.critical++:["hight","high"].includes(q.priority)?P.high++:q.priority==="medium"?P.medium++:P.low++}),a.value=P;const{data:z}=await hr.get("/discussion_forum?select=*,user:profiles(full_name,avatar_url)&order=created_at.desc&limit=10");z&&(o.value=z.map(q=>({user:q.user?.full_name||"User",action:`mengomentari di forum ${q.parent_type}`,time:d(q.created_at),avatar:q.user?.avatar_url||`https://i.pravatar.cc/150?u=${q.user_id}`,preview:q.comment_text})))}catch(p){console.error("Error fetching dashboard data:",p)}finally{s.value=!1}};return qr(()=>{f()}),(p,h)=>{const y=Kn("router-link");return ne(),le("div",M0,[v("div",F0,[v("div",q0,[v("div",V0,[_e(y,{to:"/logs",class:"bg-white dark:bg-[#141414] p-5 rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm flex items-start justify-between hover:border-rose-500/50 transition-all group"},{default:gt(()=>[v("div",null,[h[2]||(h[2]=v("p",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-1"},"Total Log & Bug",-1)),v("h3",H0,X(r.value.totalLogs),1),v("div",K0,[h[1]||(h[1]=v("span",{class:"material-symbols-outlined text-sm"},"warning",-1)),v("span",null,X(r.value.criticalLogs)+" Critical Logs",1)])]),h[3]||(h[3]=v("div",{class:"p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg text-rose-500 group-hover:scale-110 transition-transform"},[v("span",{class:"material-symbols-outlined text-2xl"},"bug_report")],-1))]),_:1}),_e(y,{to:"/version-control",class:"bg-white dark:bg-[#141414] p-5 rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm flex items-start justify-between hover:border-emerald-500/50 transition-all group"},{default:gt(()=>[v("div",null,[h[5]||(h[5]=v("p",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-1"},"Total Version Control",-1)),v("h3",W0,X(r.value.currentVersion),1),v("div",G0,[h[4]||(h[4]=v("span",{class:"material-symbols-outlined text-sm"},"commit",-1)),v("span",null,X(r.value.totalCommits)+" Versions",1)])]),h[6]||(h[6]=v("div",{class:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg text-emerald-600 group-hover:scale-110 transition-transform"},[v("span",{class:"material-symbols-outlined text-2xl"},"history")],-1))]),_:1}),_e(y,{to:"/access-control",class:"bg-white dark:bg-[#141414] p-5 rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm flex items-start justify-between hover:border-blue-500/50 transition-all group"},{default:gt(()=>[v("div",null,[h[8]||(h[8]=v("p",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-1"},"Total Access Control",-1)),v("h3",z0,X(r.value.totalRoles)+" Roles",1),v("div",J0,[h[7]||(h[7]=v("span",{class:"material-symbols-outlined text-sm"},"view_module",-1)),v("span",null,X(r.value.activeModules)+" Real Modules",1)])]),h[9]||(h[9]=v("div",{class:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-blue-500 group-hover:scale-110 transition-transform"},[v("span",{class:"material-symbols-outlined text-2xl"},"admin_panel_settings")],-1))]),_:1})]),v("div",Y0,[_e(y,{to:"/logs",class:"bg-white dark:bg-[#141414] p-6 rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm flex flex-col hover:border-rose-500/30 transition-all"},{default:gt(()=>[h[11]||(h[11]=v("div",{class:"flex items-center justify-between mb-6"},[v("h3",{class:"font-bold text-slate-800 dark:text-white flex items-center gap-2"},[v("span",{class:"material-symbols-outlined text-rose-500"},"trending_up"),It(" Tren Log Error Mingguan ")]),v("div",{class:"flex items-center gap-2"},[v("span",{class:"size-2 rounded-full bg-rose-500"}),v("span",{class:"text-[10px] font-bold text-slate-400 uppercase"},"Total Logs")])],-1)),v("div",X0,[(ne(),le("svg",Q0,[h[10]||(h[10]=v("defs",null,[v("linearGradient",{id:"logGradient",x1:"0",x2:"0",y1:"0",y2:"1"},[v("stop",{offset:"0%","stop-color":"#f43f5e","stop-opacity":"0.2"}),v("stop",{offset:"100%","stop-color":"#f43f5e","stop-opacity":"0"})])],-1)),v("path",{d:`M0,${150-n.value[0].logs*5} L100,${150-n.value[1].logs*5} L200,${150-n.value[2].logs*5} L300,${150-n.value[3].logs*5} L400,${150-n.value[4].logs*5} L500,${150-n.value[5].logs*5} L600,${150-n.value[6].logs*5} L600,150 L0,150 Z`,fill:"url(#logGradient)"},null,8,Z0),v("path",{d:`M0,${150-n.value[0].logs*5} L100,${150-n.value[1].logs*5} L200,${150-n.value[2].logs*5} L300,${150-n.value[3].logs*5} L400,${150-n.value[4].logs*5} L500,${150-n.value[5].logs*5} L600,${150-n.value[6].logs*5}`,fill:"none",stroke:"#f43f5e","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,8,ev)])),v("div",tv,[(ne(!0),le($e,null,vs(n.value,g=>(ne(),le("span",{key:g.day},X(g.day),1))),128))])])]),_:1}),_e(y,{to:"/features",class:"bg-white dark:bg-[#141414] p-6 rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm hover:border-amber-500/50 transition-all group"},{default:gt(()=>[v("div",sv,[h[12]||(h[12]=v("h3",{class:"font-bold text-slate-800 dark:text-white flex items-center gap-2"},[v("span",{class:"material-symbols-outlined text-amber-500"},"rocket_launch"),It(" Feature Requests Summary ")],-1)),v("span",rv,X(r.value.featureReview)+" DITINJAU",1)]),v("div",nv,[v("div",iv,[v("div",ov,[v("div",{class:"bg-emerald-500 h-full",style:As({width:r.value.featureDev/(r.value.featureReview+r.value.featureDev||1)*100+"%"})},null,4),v("div",{class:"bg-amber-500 h-full",style:As({width:r.value.featureReview/(r.value.featureReview+r.value.featureDev||1)*100+"%"})},null,4)])]),v("div",av,[v("div",lv,[h[13]||(h[13]=v("span",{class:"text-[10px] font-bold text-slate-400 uppercase"},"Dikembangkan",-1)),v("span",cv,X(r.value.featureDev),1)]),v("div",uv,[h[14]||(h[14]=v("span",{class:"text-[10px] font-bold text-slate-400 uppercase"},"Ditinjau",-1)),v("span",dv,X(r.value.featureReview),1)])])])]),_:1})]),v("div",hv,[_e(y,{to:"/logs",class:"bg-white dark:bg-[#141414] p-6 rounded-xl border border-slate-200 dark:border-gray-800 shadow-sm flex flex-col hover:border-rose-500/30 transition-all"},{default:gt(()=>[h[17]||(h[17]=v("h3",{class:"font-bold text-slate-800 dark:text-white flex items-center gap-2 mb-6"},[v("span",{class:"material-symbols-outlined text-rose-500"},"pie_chart"),It(" Severitas Total (Log, Bug, Feature) ")],-1)),v("div",fv,[v("div",pv,[(ne(),le("svg",gv,[h[15]||(h[15]=v("circle",{cx:"18",cy:"18",r:"16",fill:"none",stroke:"currentColor","stroke-width":"4",class:"text-slate-100 dark:text-gray-800"},null,-1)),v("circle",{cx:"18",cy:"18",r:"16",fill:"none",stroke:"#f43f5e","stroke-width":"4","stroke-dasharray":`${a.value.critical/(a.value.total||1)*100}, 100`,"stroke-dashoffset":"0"},null,8,mv),v("circle",{cx:"18",cy:"18",r:"16",fill:"none",stroke:"#fb923c","stroke-width":"4","stroke-dasharray":`${a.value.high/(a.value.total||1)*100}, 100`,"stroke-dashoffset":`-${a.value.critical/(a.value.total||1)*100}`},null,8,yv)])),v("div",bv,[v("span",vv,X(a.value.total),1),h[16]||(h[16]=v("span",{class:"text-[8px] font-bold text-slate-400 uppercase"},"Items",-1))])]),v("div",_v,[(ne(!0),le($e,null,vs([{label:"Critical",color:"bg-rose-500",count:a.value.critical},{label:"High",color:"bg-orange-400",count:a.value.high},{label:"Medium",color:"bg-amber-400",count:a.value.medium},{label:"Low",color:"bg-emerald-500",count:a.value.low}],g=>(ne(),le("div",{key:g.label,class:"flex items-center justify-between text-xs font-bold"},[v("div",wv,[v("span",{class:lt([g.color,"size-2.5 rounded-full"])},null,2),v("span",Sv,X(g.label),1)]),v("span",xv,X(g.count),1)]))),128))])])]),_:1}),v("div",Ev,[v("div",kv,[h[19]||(h[19]=v("h3",{class:"font-bold text-slate-800 dark:text-white flex items-center gap-2"},[v("span",{class:"material-symbols-outlined text-blue-500"},"security"),It(" Team Access Control Summary ")],-1)),_e(y,{to:"/team-management",class:"text-[10px] font-black bg-blue-100 text-blue-700 px-3 py-1 rounded-lg hover:bg-blue-200 transition-colors"},{default:gt(()=>[...h[18]||(h[18]=[It("ADD NEW ROLE",-1)])]),_:1})]),v("div",Av,[(ne(!0),le($e,null,vs(l.value,g=>(ne(),le("div",{key:g.name},[v("div",Rv,[v("span",Tv,X(g.name),1),v("span",Ov,X(g.count)+" Users ("+X(g.percentage)+"%)",1)]),v("div",Cv,[v("div",{class:lt([`bg-${g.color}-500`,"h-full rounded-full transition-all"]),style:As({width:g.percentage+"%"})},null,6)])]))),128))])])]),v("div",Pv,[v("div",Iv,[h[21]||(h[21]=v("h3",{class:"font-bold text-slate-800 dark:text-white flex items-center gap-2"},[v("span",{class:"material-symbols-outlined text-emerald-600"},"person_search"),It(" Daftar Log Saya (Terbaru) ")],-1)),_e(y,{to:"/logs",class:"text-xs font-bold text-emerald-600 hover:text-emerald-700 hover:underline"},{default:gt(()=>[...h[20]||(h[20]=[It("Lihat Semua",-1)])]),_:1})]),v("div",jv,[v("table",Nv,[h[23]||(h[23]=v("thead",{class:"bg-slate-50 dark:bg-[#1a1a1a]/50 text-slate-500 dark:text-slate-400 text-xs uppercase font-bold"},[v("tr",null,[v("th",{class:"px-6 py-3"},"Issue / Log"),v("th",{class:"px-6 py-3"},"Tanggal"),v("th",{class:"px-6 py-3"},"Modul"),v("th",{class:"px-6 py-3"},"Status"),v("th",{class:"px-6 py-3 text-right"},"Severity")])],-1)),v("tbody",$v,[(ne(!0),le($e,null,vs(i.value,g=>(ne(),le("tr",{key:g.id,class:"hover:bg-slate-50 dark:hover:bg-[#1a1a1a]/50 transition-colors cursor-pointer",onClick:h[0]||(h[0]=_=>p.$router.push("/logs"))},[v("td",Dv,[v("div",Lv,[v("span",Uv,"#LOG-"+X(g.no_lap||g.id),1),v("span",Bv,X(g.actual_behavior||"No description"),1)])]),v("td",Mv,X(new Date(g.created_at).toLocaleDateString("id-ID")),1),v("td",Fv,[v("span",qv,X(g.module||"General"),1)]),v("td",Vv,[v("span",{class:lt([c(g.status),"px-2 py-0.5 rounded-full text-[10px] font-black uppercase tracking-tighter"])},X(g.status),3)]),v("td",Hv,[v("span",{class:lt([u(g.priority),"text-xs font-black uppercase italic"])},X(g.priority),3)])]))),128)),i.value.length===0?(ne(),le("tr",Kv,[...h[22]||(h[22]=[v("td",{colspan:"5",class:"px-6 py-10 text-center text-slate-400 font-bold italic"},"Belum ada log yang Anda laporkan",-1)])])):Be("",!0)])])])])]),v("div",Wv,[v("div",Gv,[h[24]||(h[24]=v("h3",{class:"font-bold text-slate-800 dark:text-white flex items-center gap-2 mb-6"},[v("span",{class:"material-symbols-outlined text-blue-500"},"forum"),It(" Aktivitas Diskusi Terkini ")],-1)),v("div",zv,[(ne(!0),le($e,null,vs(o.value,(g,_)=>(ne(),le("div",{key:_,class:"flex gap-4 group cursor-pointer",onClick:E=>p.$router.push(g.action.includes("LOG")?"/logs":"/features")},[v("div",Yv,[v("img",{src:g.avatar,class:"size-10 rounded-full border-2 border-white dark:border-gray-800 shadow-sm"},null,8,Xv),g.icon?(ne(),le("div",Qv,[v("span",Zv,X(g.icon),1)])):Be("",!0)]),v("div",e_,[v("div",t_,[v("p",s_,X(g.user),1),v("span",r_,X(g.time),1)]),v("p",n_,X(g.action),1),v("div",i_,[v("p",o_,'"'+X(g.preview)+'"',1)])])],8,Jv))),128)),o.value.length===0?(ne(),le("div",a_,"Belum ada aktivitas diskusi")):Be("",!0)])])])])])}}},c_=Zu(l_,[["__scopeId","data-v-c09494d2"]]),u_={class:"bg-slate-50 dark:bg-[#0a0a0a] font-display text-gray-900 dark:text-white min-h-screen transition-colors duration-300"},d_={class:"absolute top-6 right-6 z-50"},h_={class:"material-symbols-outlined"},f_={class:"flex min-h-screen"},p_={class:"flex-1 flex flex-col justify-center items-center p-6 sm:p-12 md:p-20"},g_={class:"w-full max-w-[440px]"},m_={class:"mb-10 text-center lg:text-left"},y_={class:"text-3xl font-extrabold text-gray-900 dark:text-white mb-2"},b_={class:"text-gray-600 dark:text-gray-400"},v_={class:"bg-white dark:bg-[#141414] p-8 rounded-lg shadow-sm border border-gray-100 dark:border-gray-800"},__={key:0,class:"mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 flex items-start gap-3 animate-shake"},w_={class:"text-sm font-medium text-red-600 dark:text-red-400 leading-snug"},S_={key:0},x_={class:"relative"},E_={class:"relative"},k_={class:"relative"},A_=["type"],R_={class:"material-symbols-outlined text-xl"},T_=["disabled"],O_={key:0},C_={key:1},P_={class:"text-center mt-6"},I_={class:"text-sm text-gray-600 dark:text-gray-400"},j_={__name:"Login",setup(e){const t=Tu(),s=Kr(),r=Ee(""),n=Ee(""),i=Ee(!1),o=Ee(""),a=Ee(!1),l=Ee(document.documentElement.classList.contains("dark")),c=()=>{l.value=!l.value,document.documentElement.classList.toggle("dark"),localStorage.setItem("darkMode",l.value)},u=()=>{a.value=!a.value},d=Ee(!1),f=Ee(""),p=()=>{d.value=!d.value,o.value=""},h=async()=>{i.value=!0,o.value="";try{const y=r.value.trim(),g=n.value.trim();d.value?(await s.signUp(y,g,{full_name:f.value}),o.value="Registrasi berhasil! Silakan cek email untuk verifikasi (jika perlu) atau login.",d.value=!1):(console.log("Attempting login for:",y),await s.signIn(y,g),t.push("/"))}catch(y){console.error("Login error:",y),o.value=y.message||"Gagal Login. Silakan coba lagi.",y.message.includes("Invalid login credentials")&&(o.value="Email atau password salah. Pastikan tidak ada spasi tambahan.")}finally{i.value=!1}};return(y,g)=>(ne(),le("div",u_,[v("div",d_,[v("button",{onClick:c,class:"p-2.5 rounded-full bg-white dark:bg-[#141414] shadow-sm border border-gray-200 dark:border-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-colors"},[v("span",h_,X(l.value?"light_mode":"dark_mode"),1)])]),v("div",f_,[g[13]||(g[13]=na('<div class="hidden lg:flex lg:w-1/2 relative bg-gradient-to-br from-[#003d38] to-[#001D1A] overflow-hidden items-center justify-center" data-v-45f9dfc6><div class="absolute inset-0 overflow-hidden opacity-30 pointer-events-none" data-v-45f9dfc6><div class="absolute -top-[10%] -left-[10%] w-[50%] h-[50%] rounded-full bg-emerald-400 blur-[120px]" data-v-45f9dfc6></div><div class="absolute -bottom-[10%] -right-[10%] w-[40%] h-[40%] rounded-full bg-emerald-600 blur-[100px]" data-v-45f9dfc6></div></div><div class="relative z-10 px-12 text-center max-w-lg" data-v-45f9dfc6><div class="mb-10 flex justify-center" data-v-45f9dfc6><div class="bg-center bg-no-repeat aspect-square bg-contain rounded-lg size-24 bg-[#121417] p-4 shadow-2xl border border-white/10" style="background-image:url(&#39;https://raw.githubusercontent.com/thealfin/Monitoring-Log-Error-Bug-Digital-Teknologi-Perkasa/main/media/digitek%20putih.webp&#39;);" data-v-45f9dfc6></div></div><h1 class="text-4xl font-extrabold text-white mb-6 leading-tight tracking-tight" data-v-45f9dfc6>Monitoring<br data-v-45f9dfc6>Log Error &amp; Bug</h1><p class="text-xl text-emerald-50 font-light leading-relaxed" data-v-45f9dfc6> By PT. Digital Teknologi Perkasa<br data-v-45f9dfc6>Manage and Track Your Systems Effectively </p><div class="mt-12 flex items-center justify-center gap-4 text-emerald-200/60" data-v-45f9dfc6><span class="material-symbols-outlined" data-v-45f9dfc6>security</span><span class="text-sm font-medium tracking-widest uppercase" data-v-45f9dfc6>High Performance Bug Tracking</span></div></div></div>',1)),v("div",p_,[v("div",g_,[g[11]||(g[11]=v("div",{class:"lg:hidden flex flex-col items-center mb-8"},[v("div",{class:"bg-center bg-no-repeat aspect-square bg-contain rounded-lg size-14 mb-4 bg-[#121417] p-2 border border-gray-100 dark:border-gray-800 shadow-md",style:{"background-image":"url('https://raw.githubusercontent.com/thealfin/Monitoring-Log-Error-Bug-Digital-Teknologi-Perkasa/main/media/digitek%20putih.webp')"}}),v("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Digital Teknologi Perkasa"),v("p",{class:"text-emerald-700 dark:text-emerald-400 text-sm font-medium"},"Log Monitoring")],-1)),v("div",m_,[v("h2",y_,X(d.value?"Create Account":"Welcome"),1),v("p",b_,X(d.value?"Sign up to get started.":"Please enter your details to sign in."),1)]),v("div",v_,[o.value?(ne(),le("div",__,[g[3]||(g[3]=v("span",{class:"material-symbols-outlined text-red-500 text-xl mt-0.5"},"error",-1)),v("p",w_,X(o.value),1)])):Be("",!0),v("form",{onSubmit:If(h,["prevent"]),class:"space-y-6"},[d.value?(ne(),le("div",S_,[g[5]||(g[5]=v("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",for:"fullname"},"Full Name",-1)),v("div",x_,[g[4]||(g[4]=v("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[v("span",{class:"material-symbols-outlined text-gray-400 dark:text-gray-500 text-lg"},"person")],-1)),hi(v("input",{"onUpdate:modelValue":g[0]||(g[0]=_=>f.value=_),class:"w-full bg-gray-50 dark:bg-[#1a1a1a] border border-gray-200 dark:border-gray-800 rounded-lg px-4 py-3.5 pl-11 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-600 transition-all",id:"fullname",placeholder:"John Doe",type:"text",required:""},null,512),[[Tn,f.value]])])])):Be("",!0),v("div",null,[g[7]||(g[7]=v("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",for:"email"},"Email Address",-1)),v("div",E_,[g[6]||(g[6]=v("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[v("span",{class:"material-symbols-outlined text-gray-400 dark:text-gray-500 text-lg"},"alternate_email")],-1)),hi(v("input",{"onUpdate:modelValue":g[1]||(g[1]=_=>r.value=_),class:"w-full bg-gray-50 dark:bg-[#1a1a1a] border border-gray-200 dark:border-gray-800 rounded-lg px-4 py-3.5 pl-11 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-600 transition-all",id:"email",placeholder:"Masukan Email Anda",type:"email",required:""},null,512),[[Tn,r.value]])])]),v("div",null,[g[9]||(g[9]=v("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",for:"password"},"Password",-1)),v("div",k_,[g[8]||(g[8]=v("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[v("span",{class:"material-symbols-outlined text-gray-400 dark:text-gray-500 text-lg"},"lock")],-1)),hi(v("input",{"onUpdate:modelValue":g[2]||(g[2]=_=>n.value=_),type:a.value?"text":"password",class:"w-full bg-gray-50 dark:bg-[#1a1a1a] border border-gray-200 dark:border-gray-800 rounded-lg px-4 py-3.5 pl-11 pr-11 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-600 transition-all",id:"password",placeholder:"",required:""},null,8,A_),[[Tf,n.value]]),v("button",{type:"button",onClick:u,class:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-emerald-500 transition-colors"},[v("span",R_,X(a.value?"visibility_off":"visibility"),1)])])]),g[10]||(g[10]=na('<div class="flex items-center justify-between py-1" data-v-45f9dfc6><div class="flex items-center" data-v-45f9dfc6><input class="h-4 w-4 rounded border-gray-300 bg-white dark:bg-[#1a1a1a] text-emerald-600 focus:ring-emerald-500/20 focus:ring-offset-0" id="remember-me" name="remember-me" type="checkbox" data-v-45f9dfc6><label class="ml-2 block text-sm text-gray-600 dark:text-gray-400" for="remember-me" data-v-45f9dfc6>Remember me</label></div><a class="text-sm font-semibold text-emerald-700 dark:text-emerald-400 hover:text-emerald-600 transition-colors" href="#" data-v-45f9dfc6>Forgot password?</a></div>',1)),v("button",{disabled:i.value,class:"w-full bg-[#032A28] hover:bg-[#021A18] active:bg-[#01100F] dark:bg-emerald-500 dark:hover:bg-emerald-600 dark:active:bg-emerald-700 text-white font-bold py-4 rounded-lg shadow-lg shadow-emerald-900/10 transition-all flex items-center justify-center gap-2 group disabled:opacity-70",type:"submit"},[i.value?(ne(),le("span",O_,"Processing...")):(ne(),le("span",C_,X(d.value?"Sign Up":"Log In"),1))],8,T_),v("div",P_,[v("p",I_,[It(X(d.value?"Already have an account?":"Don't have an account?")+" ",1),v("button",{type:"button",onClick:p,class:"font-medium text-emerald-600 hover:text-emerald-500 transition-colors ml-1"},X(d.value?"Sign In":"Sign Up"),1)])])],32)]),g[12]||(g[12]=v("div",{class:"mt-10 text-center"},[v("p",{class:"text-sm text-gray-500 dark:text-gray-500"},"  2026 Digital Teknologi Perkasa. All rights reserved. ")],-1))])])])]))}},N_=Zu(j_,[["__scopeId","data-v-45f9dfc6"]]),ed=Cy({history:ly("/Monitoring-Digital-Teknologi-Perkasa/"),routes:[{path:"/login",name:"login",component:N_,meta:{guest:!0}},{path:"/",component:cb,meta:{requiresAuth:!0},children:[{path:"",name:"dashboard",component:c_,meta:{title:"Dashboard Overview",subtitle:"Overview sistem dan status pembaruan"}},{path:"logs",name:"logs",component:()=>es(()=>import("./Logs-BQsjeVWD.js"),[]),meta:{title:"Manajemen Semua Log",subtitle:"Monitoring dan tracking error sistem"}},{path:"version-control",name:"version-control",component:()=>es(()=>import("./VersionControl-DyzXn5nY.js"),[]),meta:{title:"Version Control",subtitle:"Riwayat pembaruan dan rilis sistem"}},{path:"access-control",name:"access-control",component:()=>es(()=>import("./AccessControl-pXdleQvB.js"),__vite__mapDeps([0,1])),meta:{title:"Access Control",subtitle:"Manajemen hak akses dan role pengguna"}},{path:"reports",name:"reports",component:()=>es(()=>import("./Reports-D9OYaNL7.js"),__vite__mapDeps([2,3])),meta:{title:"Laporan & Statistik",subtitle:"Analisis data dan performa sistem"}},{path:"features",name:"features",component:()=>es(()=>import("./FeatureManagement-Bh0giOdu.js"),__vite__mapDeps([4,5])),meta:{title:"Manajemen Fitur",subtitle:"Perencanaan dan penambahan fitur baru"}},{path:"settings",name:"settings",component:()=>es(()=>import("./Settings-Ct4md1vZ.js"),[]),meta:{title:"Pengaturan",subtitle:"Konfigurasi sistem dan preferensi"}},{path:"team",name:"team",component:()=>es(()=>import("./TeamManagement-Hzs-JzD_.js"),[]),meta:{title:"Manajemen Akses Tim",subtitle:"Manage roles and permissions for the development team",roles:["Super Admin","Editor"]}}]}]});ed.beforeEach(async(e,t,s)=>{const r=Kr();r.loading&&await r.initialize();const n=!!r.user;if(e.meta.requiresAuth&&!n)return s("/login");if(e.meta.guest&&n)return s("/");if(e.meta.roles&&n){const{data:i}=await je.from("profiles").select("role").eq("id",r.user.id).single(),o=i?.role||"Viewer";if(!e.meta.roles.includes(o))return s("/")}s()});const Uo=Df(Sm);Uo.use(Bf());Uo.use(ed);Uo.mount("#app");export{hr as A,et as B,je as C,ne as D,kf as E,$e as F,As as G,D_ as H,Tf as I,gt as J,Af as K,vm as L,$_ as T,Zu as _,Eo as a,v as b,le as c,wc as d,Be as e,hi as f,Tn as g,Oo as h,Mn as i,lt as j,X as k,Rf as l,vs as m,qn as n,qr as o,It as p,_e as q,Ee as r,jd as s,de as t,Kr as u,Qh as v,mr as w,ct as x,If as y,na as z};
